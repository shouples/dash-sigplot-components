/*! For license information please see dash_sigplot_components.min.js.LICENSE.txt */
window.dash_sigplot_components=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var n,r=function(){var t=document.currentScript;if(!t){for(var e=document.getElementsByTagName("script"),i=[],n=0;n<e.length;n++)i.push(e[n]);t=(i=i.filter((function(t){return!t.async&&!t.text&&!t.textContent}))).slice(-1)[0]}return t};if(Object.defineProperty(i,"p",{get:(n=r().src.split("/").slice(0,-1).join("/")+"/",function(){return n})}),"undefined"!=typeof jsonpScriptSrc){var o=jsonpScriptSrc;jsonpScriptSrc=function(t){var e=function(t){return/\/_dash-component-suites\//.test(t.src)}(r()),i=o(t);if(!e)return i;var n=i.split("/"),s=n.slice(-1)[0].split(".");return s.splice(1,0,"v0_0_1m1639943493"),n.splice(-1,1,s.join(".")),n.join("/")}}return i(i.s=3)}([function(t,e){t.exports=window.PropTypes},function(t,e){t.exports=window.React},function(t,e,i){window,t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=36)}([function(t,e,i){"use strict";(function(t){i.d(e,"e",(function(){return n})),i.d(e,"p",(function(){return r})),i.d(e,"a",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"d",(function(){return a})),i.d(e,"o",(function(){return l})),i.d(e,"q",(function(){return h})),i.d(e,"t",(function(){return c})),i.d(e,"i",(function(){return u})),i.d(e,"r",(function(){return d})),i.d(e,"s",(function(){return f})),i.d(e,"k",(function(){return p})),i.d(e,"m",(function(){return x})),i.d(e,"j",(function(){return m})),i.d(e,"l",(function(){return y})),i.d(e,"g",(function(){return v})),i.d(e,"f",(function(){return _})),i.d(e,"h",(function(){return b})),i.d(e,"n",(function(){return g})),i.d(e,"b",(function(){return w}));var n="1.12.0",r="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||Function("return this")()||{},o=Array.prototype,s=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,l=o.push,h=o.slice,c=s.toString,u=s.hasOwnProperty,d="undefined"!=typeof ArrayBuffer,f="undefined"!=typeof DataView,p=Array.isArray,x=Object.keys,m=Object.create,y=d&&ArrayBuffer.isView,v=isNaN,_=isFinite,b=!{toString:null}.propertyIsEnumerable("toString"),g=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],w=Math.pow(2,53)-1}).call(this,i(8))},function(t,e,i){t.exports=i(16)()},function(t,e,i){"use strict";t.exports=i(15)},function(t,e,i){!function(){"use strict";var e=i(9).bluefile,n=i(20);function r(){}r.log=n,navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||"undefined"==typeof Float64Array||Float64Array.emulated||!Float64Array.BYTES_PER_ELEMENT?r.PointArray=Float32Array:r.PointArray=Float64Array;var o={0:["None","U",!0,!0],1:["Time","sec",!0,!0],2:["Delay","sec",!0,!1],3:["Frequency","Hz",!0,!0],4:["Time code format","",!0,!1],5:["Distance","m",!0,!0],6:["Speed","m/s",!0,!0],7:["Acceleration","m/sec^2",!0,!0],8:["Jerk","m/sec^3",!0,!0],9:["Doppler","Hz",!0,!1],10:["Doppler rate","Hz/sec",!0,!0],11:["Energy","J",!0,!0],12:["Power","W",!0,!0],13:["Mass","g",!0,!0],14:["Volume","l",!0,!0],15:["Angular power density","W/ster",!0,!0],16:["Integrated power density","W/rad",!0,!0],17:["Spatial power density","W/m^2",!0,!0],18:["Integrated power density","W/m",!1,!0],19:["Spectral power density","W/MHz",!0,!0],20:["Amplitude","U",!0,!1],21:["Real","U",!0,!1],22:["Imaginary","U",!0,!1],23:["Phase","rad",!0,!0],24:["Phase","deg",!1,!0],25:["Phase","cycles",!1,!0],26:["10*Log","U",!0,!1],27:["20*Log","U",!0,!1],28:["Magnitude","U",!0,!1],29:["Unknown","U",!0,!1],30:["Unknown","U",!1,!1],31:["General dimensionless","",!0,!0],32:["Counts","",!0,!1],33:["Angle","rad",!0,!1],34:["Angle","deg",!1,!1],35:["Relative power","dB",!0,!0],36:["Relative power","dBm",!1,!0],37:["Relative power","dBW",!1,!0],38:["Solid angle","ster",!0,!0],40:["Distance","ft",!1,!0],41:["Distance","nmi",!1,!0],42:["Speed","ft/sec",!1,!0],43:["Speed","nmi/sec",!1,!0],44:["Speed","knots=nmi/hr",!1,!0],45:["Acceleration","ft/sec^2",!1,!0],46:["Acceleration","nmi/sec^2",!1,!0],47:["Acceleration","knots/sec",!1,!0],48:["Acceleration","G",!1,!0],49:["Jerk","G/sec",!1,!0],50:["Rotation","rps",!0,!1],51:["Rotation","rpm",!1,!1],52:["Angular velocity","rad/sec",!0,!0],53:["Angular velocity","deg/sec",!1,!0],54:["Angular acceleration","rad/sec^2",!0,!0],55:["Angular acceleration","deg/sec^2",!1,!0],60:["Latitude","deg",!0,!1],61:["Longitude","deg",!0,!1],62:["Altitude","ft",!0,!1],63:["Altitude","m",!1,!1]};r.UNITS=o,r.Mc={colormap:[{name:"Greyscale",colors:[{pos:0,red:0,green:0,blue:0},{pos:60,red:50,green:50,blue:50},{pos:100,red:100,green:100,blue:100},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0}]},{name:"Ramp Colormap",colors:[{pos:0,red:0,green:0,blue:15},{pos:10,red:0,green:0,blue:50},{pos:31,red:0,green:65,blue:75},{pos:50,red:0,green:85,blue:0},{pos:70,red:75,green:80,blue:0},{pos:83,red:100,green:60,blue:0},{pos:100,red:100,green:0,blue:0}]},{name:"Color Wheel",colors:[{pos:0,red:100,green:100,blue:0},{pos:20,red:0,green:80,blue:40},{pos:30,red:0,green:100,blue:100},{pos:50,red:10,green:10,blue:0},{pos:65,red:100,green:0,blue:0},{pos:88,red:100,green:40,blue:0},{pos:100,red:100,green:100,blue:0}]},{name:"Spectrum",colors:[{pos:0,red:0,green:75,blue:0},{pos:22,red:0,green:90,blue:90},{pos:37,red:0,green:0,blue:85},{pos:49,red:90,green:0,blue:85},{pos:68,red:90,green:0,blue:0},{pos:80,red:90,green:90,blue:0},{pos:100,red:95,green:95,blue:95}]},{name:"calewhite",colors:[{pos:0,red:100,green:100,blue:100},{pos:16.666,red:0,green:0,blue:100},{pos:33.333,red:0,green:100,blue:100},{pos:50,red:0,green:100,blue:0},{pos:66.666,red:100,green:100,blue:0},{pos:83.333,red:100,green:0,blue:0},{pos:100,red:100,green:0,blue:100}]},{name:"HotDesat",colors:[{pos:0,red:27.84,green:27.84,blue:85.88},{pos:14.2857,red:0,green:0,blue:35.69},{pos:28.571,red:0,green:100,blue:100},{pos:42.857,red:0,green:49.8,blue:0},{pos:57.14286,red:100,green:100,blue:0},{pos:71.42857,red:100,green:37.65,blue:0},{pos:85.7143,red:41.96,green:0,blue:0},{pos:100,red:87.84,green:29.8,blue:29.8}]},{name:"Sunset",colors:[{pos:0,red:10,green:0,blue:23},{pos:18,red:34,green:0,blue:60},{pos:36,red:58,green:20,blue:47},{pos:55,red:74,green:20,blue:28},{pos:72,red:90,green:43,blue:0},{pos:87,red:100,green:72,blue:0},{pos:100,red:100,green:100,blue:76}]},{name:"Hot",colors:["#000000","#7f0000","#b30000","#d7301f","#ef6548","#fc8d59","#fdbb84","#fdd49e","#fee8c8","#fff7ec","#ffffff"]},{name:"Cold",colors:["#000000","#023858","#045a8d","#0570b0","#3690c0","#74a9cf","#a6bddb","#d0d1e6","#ece7f2","#fff7fb","#ffffff"]},{name:"Purple",colors:["#230022","#4d004b","#810f7c","#88419d","#8c6bb1","#8c96c6","#9ebcda","#bfd3e6","#e0ecf4","#f7fcfd"]},{name:"BuGn",colors:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},{name:"YlOrBr",colors:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},{name:"YlGnBu",colors:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},{name:"YlOrRd",colors:["#000000","#662506","#993404","#cc4c02","#ec7014","#fe9929","#fec44f","#fee391","#fff7bc","#ffffe5","#ffffff"]},{name:"GreyNRed",colors:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"].reverse()}]},r.PIPESIZE=1048576,r.unit_lookup=function(t){for(var e=0;e<64;e++){var i,n=(i=void 0===o[e]?o[0]:o[e])[0],r=i[1],s=i[0]+" "+i[1],a=i[0]+"_"+i[1];if(t===n){if(i[2])return e}else if(t===r){if(i[3])return e}else if(t===s||t===a)return e}return t},r.initialize=function(t,i,n){var o=new e.BlueHeader(null);for(var s in o.version="BLUE",o.size=0,o.type=1e3,o.format="SF",o.timecode=0,o.xstart=0,o.xdelta=1,o.xunits=0,o.subsize=1,o.ystart=0,o.ydelta=1,o.yunits=0,o.enabled_streaming_pcut=!1,o.cleanup=n,i||(i={}),i)o[s]=i[s];if(o.xunits=r.unit_lookup(o.xunits),o.yunits=r.unit_lookup(o.yunits),o.subsize>1?o.type=2e3:Array.isArray(t)&&(Array.isArray(t[0])||ArrayBuffer.isView(t[0]))&&(o.type=2e3,o.subsize=t[0].length,o.size=t.length),o.class=o.type/1e3,2===o.class&&void 0===o.subsize)throw"subsize must be provided with type 2000 files";if(i.pipe){o.pipe=!0,o.in_byte=0,o.out_byte=0;var a=i.pipesize||r.PIPESIZE;o.buf=new ArrayBuffer(a),o.setData(o.buf),o.data_free=o.dview.length}else o.setData(t);return o},r.force1000=function(t){2===t.class&&(t.size&&!t.pipe?t.size=t.subsize*t.size:t.size=0,t.bpe=t.bpe/t.subsize,t.ape=1)},r.grab=function(t,e,i,n){if(!t.dview)return 0;"C"===t.format[0]&&(i*=2),n=t.ape*n;var r=Math.min(e.length,t.dview.length-i);if(void 0===e.set)for(var o=0;o<r;o++)e[o]=t.dview[i+o];else e.set(t.dview.subarray(i,i+r));return"C"===t.format[0]&&(r/=2),r},r.filad=function(t,e,i){if(t.data_free<e.length)throw"Pipe full";var n=t.in_byte/t.dview.BYTES_PER_ELEMENT,r=n+e.length;if(r>t.dview.length){var o=t.dview.length-n,s=e.length-o;e.subarray?(t.dview.set(e.subarray(0,o),n),t.dview.set(e.subarray(o,e.length),0)):(t.dview.set(e.slice(0,o),n),t.dview.set(e.slice(o,e.length),0)),t.in_byte=s*t.dview.BYTES_PER_ELEMENT}else t.dview.set(e,n),t.in_byte=r*t.dview.BYTES_PER_ELEMENT%t.buf.byteLength;if(t.data_free-=e.length,t.onwritelisteners)for(var a=0;a<t.onwritelisteners.length;a++)i?t.onwritelisteners[a]():window.setTimeout(t.onwritelisteners[a],0)},r.pavail=function(t){return t.dview.length-t.data_free},r.grabx=function(t,e,i,n){var r=t.dview.length-t.data_free;if(void 0===n&&(n=0),i){if(i>e.length-n)throw"m.grabx : nget larger then available buffer space"}else i=Math.min(e.length-n,r);if(i<0)throw"m.grabx : nget cannot be negative";if(i>r)return 0;var o=t.out_byte/t.dview.BYTES_PER_ELEMENT,s=o+i;if(s>=t.dview.length){var a=t.dview.length-o;s-=t.dview.length,e.set(t.dview.subarray(o,t.dview.length),n),e.set(t.dview.subarray(0,s),n+a)}else e.set(t.dview.subarray(o,s),n);return t.out_byte=s*t.dview.BYTES_PER_ELEMENT%t.buf.byteLength,t.data_free+=i,i},r.addPipeWriteListener=function(t,e){t.onwritelisteners||(t.onwritelisteners=[]),-1===t.onwritelisteners.indexOf(e)&&t.onwritelisteners.push(e)},r.units_name=function(t){var e=o[t];return e[0]+" ("+e[1]+")"},r.trim_name=function(t){var e=t.indexOf("]");-1===e&&(e=t.indexOf("/")),-1===e&&(e=t.indexOf(":"));var i=t.substr(e+1,t.length).indexOf(".");return i<0&&(i=t.length-e),t.substr(e+1,e+i+1)},r.label=function(t,e){var i=["Unknown","U"];"string"==typeof t?i=[t,null]:Array.isArray(t)?i=t:void 0===(i=o[t])&&(i=["Unknown","U"]);var n=r.mult_prefix(e);return i[1]?i[0]+" ("+n+i[1]+")":i[0]},r.bound=function(t,e,i){return t<e?e:t>i?i:t},r.touch_distance=function(t,e){var i=t.pageX-e.pageX,n=t.pageY-e.pageY;return Math.sqrt(i*i+n*n)},r.mult_prefix=function(t){var e="?";return 1==t?e="":10==t?e="da":.1==t?e="d":100==t?e="h":.01==t?e="c":1e3==t?e="K":.001==t?e="m":1e6==t?e="M":1e-6==t?e="u":1e9==t?e="G":1e-9==t?e="n":1e12==t?e="T":1e-12==t&&(e="p"),e};var s={MV:"F",MS:"F",nbpt:4,view:void 0};function a(t){return(t<10?"0":"")+t}r.vstype=function(t){s.MS=t,s.MV=t,"D"===s.MV?s.nbpt=8:"L"===s.MV||"F"===s.MV?s.nbpt=4:"I"===s.MV?s.nbpt=2:"B"===s.MV?s.nbpt=1:alert("Unsupported vector type")},r.log10=function(t,e){return void 0===e&&(e=1e-20),Math.log(Math.max(t,e))/Math.log(10)},r.vlog10=function(t,e,i){void 0===e&&(e=1e-20),void 0===i&&(i=t);for(var n=0;n<t.length&&!(i.length<=n);n++)i[n]=Math.log(Math.max(t[n],e))/Math.log(10)},r.vlogscale=function(t,e,i,n){void 0===e&&(e=1e-20),void 0===i&&(i=1),void 0===n&&(n=t);for(var r=0;r<t.length&&!(n.length<=r);r++)n[r]=Math.log(Math.abs(Math.max(t[r],e)))/Math.log(10),n[r]=n[r]*i},r.cvmag2logscale=function(t,e,i,n){void 0===e&&(e=1e-20),void 0===i&&(i=1),void 0===n&&(n=t);for(var r=0,o=0;o<n.length&&!((r=2*o+1)>=t.length);o++)n[o]=t[r-1]*t[r-1]+t[r]*t[r],n[o]=Math.log(Math.abs(Math.max(n[o],e)))/Math.log(10),n[o]=n[o]*i},r.vsmul=function(t,e,i,n){void 0===i&&(i=t),void 0===n&&(n=i.length),n=Math.min(i.length,n),n=Math.min(t.length,n);for(var r=0;r<n&&!(i.length<=r);r++)i[r]=t[r]*e},r.vmxmn=function(t,e){var i=t[0],n=t[0],r=0,o=0;e=Math.min(e,t.length);for(var s=0;s<e;s++)t[s]>i&&(i=t[s],r=s),t[s]<n&&(n=t[s],o=s);return{smax:i,smin:n,imax:r,imin:o}},r.vmov=function(t,e,i,n,r){void 0===r&&(r=t.length),r=Math.min(t.length,r);for(var o=0;o<r;o++){var s=o*e,a=o*n;if(s>=t.length)break;if(a>=i.length)break;i[a]=t[s]}},r.vfill=function(t,e,i){void 0===i&&(i=t.length),i=Math.min(t.length,i);for(var n=0;n<i;n++)t[n]=e},r.vabs=function(t,e,i){void 0===i&&(i=t.length),void 0===e&&(e=t);for(var n=0;n<i;n++)e[n]=Math.abs(t[n])},r.cvmag=function(t,e,i){void 0===i&&(i=e.length),i=Math.min(e.length,i);for(var n=0;n<i;n++){var r=2*n+1;if(r>=t.length)break;e[n]=Math.sqrt(t[r-1]*t[r-1]+t[r]*t[r])}},r.cvmag2=function(t,e,i){void 0===i&&(i=e.length),i=Math.min(e.length,i);for(var n=0,r=0;r<i&&!((n=2*r+1)>=t.length);r++)e[r]=t[n-1]*t[n-1]+t[n]*t[n]},r.cvpha=function(t,e,i){void 0===i&&(i=e.length),i=Math.min(e.length,i);for(var n=0,r=0,o=0,s=0;s<i&&!((n=2*s+1)>=t.length);s++)r=t[n-1],o=t[n],0===r&&0===o&&(r=1),e[s]=Math.atan2(o,r)},r.cvphad=function(t,e,i){void 0===i&&(i=e.length),i=Math.min(e.length,i);for(var n=0,r=0,o=0,s=0;s<i&&!((n=2*s+1)>=t.length);s++)r=t[n-1],o=t[n],0===r&&0===o&&(r=1),e[s]=Math.atan2(o,r)*(180/Math.PI)},r.trunc=function(t){return t-t%1},r.sign=function(t,e){return e>=0?Math.abs(t):-Math.abs(t)},r.sec2tod=function(t,e){var i="",n=Date.UTC(1950,0,1),r=(new Date(n),new Date),o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);if(t>=0)if(t<86400){var s=o.getTime()+1e3*t;i=a((r=new Date(s)).getHours())+":"+a(r.getMinutes())+":"+a(r.getSeconds())}else if(86400===t)i="24:00:00";else if(t<31536e3){d=[(d=t/86400)>0?Math.floor(d):Math.ceil(d)];var l=Math.floor(t%86400),h=Math.floor(l/3600),c=Math.floor(l/60%60);l%=60,i=d.toString()+"::"+a(h)+":"+a(c)+":"+a(l)}else{var u=Math.floor(1e3*t)+n;i=(r=new Date(u)).getUTCFullYear()+":"+a(r.getUTCMonth()+1)+":"+a(r.getUTCDate())+"::"+a(r.getUTCHours())+":"+a(r.getUTCMinutes())+":"+a(r.getUTCSeconds())}else if(t>-31536e3){var d;d=(d=t/86400)<=0?Math.ceil(d):Math.floor(d),l=Math.floor(Math.abs(t)%86400),h=Math.floor(l/3600),c=Math.floor(l/60%60),l%=60,i=(d=0===d?"-0":d.toString())+"::"+a(h)+":"+a(c)+":"+a(l)}else u=Math.floor(1e3*t)+n,i=(r=new Date(u)).getUTCFullYear()+":"+a(r.getUTCMonth()+1)+":"+a(r.getUTCDate())+"::"+a(r.getUTCHours())+":"+a(r.getUTCMinutes())+":"+a(r.getUTCSeconds());if(i+=0==t%1?".000000":"."+Math.abs(t%1).toPrecision(6).slice(2,8),e){var f=i.indexOf("."),p=-1;-1!==f&&(p=i.substr(f,i.length).indexOf("0")),-1!==p&&(i=i.substr(0,f+p))}return i},r.sec2tspec=function(t,e,i){return e=e||"",t>=0&&t<=86400?r.sec2tod(t,i):(t%=86400,"delta"!==e&&t<=0?r.sec2tod(t+86400,i):"delta"===e&&t<=0?"-"+r.sec2tod(-1*t,i):r.sec2tod(t,i))},r.sec2tod_j1970=function(t){var e,i="";if(t>=0&&t<86400)i=a((e=new Date(1e3*t)).getHours())+":"+a(e.getMinutes())+":"+a(e.getSeconds());else if(t<0&&t>-31536e3){var n=t/86400*-1;e=new Date(1e3*t),i=n.toString()+"::"+a(e.getHours())+":"+a(e.getMinutes())+":"+a(e.getSeconds())}else i=(e=new Date(1e3*(t-631152e3))).getFullYear()+":"+a(e.getMonth())+":"+a(e.getDate())+"::"+a(e.getHours())+":"+a(e.getMinutes())+":"+a(e.getSeconds());return t%1!=0&&(i+="."+(t%1).toPrecision(6).slice(2,8)),i},r.j1970toj1950=function(t){return void 0!==t.getTime?t.getTime()/1e3+631152e3:t+631152e3},r.j1950toj1970=function(t){return t-631152e3},r.throttle=function(t,e){var i=(new Date).getTime();return function(){var n=(new Date).getTime();n-i>=t&&(i=n,e.apply(null,arguments))}},r.pad=function(t,e){return e?("string"==typeof e&&(e=e.endsWith("%")?t*(parseFloat(e)/100):parseFloat(e)),e):0},t.exports=r}()},function(t,e,i){!function(){var e=i(10),n=i(21),r=i(5),o=i(22),s=i(3);function a(){}function l(){this.xo=0,this.yo=0,this.xl=0,this.yl=0,this.xmin=0,this.xmax=0,this.ymin=0,this.ymax=0,this.func=void 0,this.mode=void 0}function h(t){this.root=t,this.parent=document.createElement("div"),this.parent.style.position="relative",this.parent.width=t.clientWidth,this.parent.height=t.clientHeight,t.appendChild(this.parent),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.width=t.clientWidth,this.canvas.height=t.clientHeight,this.parent.appendChild(this.canvas),this.active_canvas=this.canvas,this.wid_canvas=document.createElement("canvas"),this.wid_canvas.style.position="absolute",this.wid_canvas.style.top="0px",this.wid_canvas.style.left="0px",this.wid_canvas.style.zIndex=1,this.wid_canvas.width=t.clientWidth,this.wid_canvas.height=t.clientHeight,this.parent.appendChild(this.wid_canvas),this.font=void 0,this.font_family="Courier New, monospace",this.font_width=8,this.font_scaled=!1,this.text_w=0,this.text_h=0,this.level=0,this.width=this.parent.width,this.height=this.parent.height,this.xpos=0,this.ypos=0,this.xmrk=0,this.ymrk=0,this.origin=1,this.stk=[new a.STKSTRUCT],this.mouseOver=!1,a.setbgfg(this,"black","white"),this.event_cb=void 0,this.warpbox=void 0,this.rmode=!1,this.linewidth=1,this.style=void 0,this.xi=!1,this.button_release=0,this.button_press=0,this.state_mask=0,this.l=0,this.r=this.width,this.t=0,this.b=this.height,this.scrollbar_x=new a.SCROLLBAR,this.scrollbar_y=new a.SCROLLBAR,this.prompt=void 0,this.pixel=void 0,this._renderCanvas=document.createElement("canvas"),this._syncRender=!1}function c(t,e,i){var n=!1,r=!1;return t>=e&&(n=!0),t<=i&&(r=!0),!0===n&&!0===r}function u(t,e,i,n,r,o){return(i-t)*(o-e)-(r-t)*(n-e)}function d(t,e,i,n,r,o,s){return r<=i?s>i&&u(e,i,n,r,o,s)>0&&(t+=1):s<=i&&u(e,i,n,r,o,s)<0&&(t-=1),t}a.DomMenu=i(23),a.XW_INIT=-3,a.XW_DRAW=1,a.XW_EVENT=2,a.XW_UPDATE=3,a.XW_COMMAND=5,a.SB_EXPAND=1,a.SB_SHRINK=2,a.SB_FULL=3,a.SB_STEPINC=4,a.SB_STEPDEC=5,a.SB_PAGEINC=6,a.SB_PAGEDEC=7,a.SB_DRAG=8,a.SB_WHEELUP=9,a.SB_WHEELDOWN=10,a.L_ArrowLeft=1001,a.L_ArrowRight=1002,a.L_ArrowUp=1003,a.L_ArrowDown=1004,a.L_dashed=801,a.GBorder=3,a.L_RModeOff=900,a.L_RModeOn=901,a.L_PixelSymbol=1,a.L_CircleSymbol=2,a.L_SquareSymbol=3,a.L_PlusSymbol=4,a.L_XSymbol=5,a.L_TriangleSymbol=6,a.L_ITriangleSymbol=7,a.L_HLineSymbol=8,a.L_VLineSymbol=9,a.LEGACY_RENDER=!1,a.LEGACY_BEHAVIOR=!1,a.STKSTRUCT=function(){this.xmin=0,this.xmax=0,this.ymin=0,this.ymax=0,this.xscl=0,this.yscl=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0},a.SCROLLBAR=function(){this.flag=null,this.action=null,this.smin=null,this.srange=null,this.tmin=null,this.trange=null,this.step=null,this.page=null,this.scale=null,this.dragoutline=null,this.initial_pause=null,this.repeat_pause=null,this.x=null,this.y=null,this.w=null,this.h=null,this.s1=null,this.sw=null,this.swmin=null,this.soff=null,this.a1=null,this.a2=null,this.arrow=null,this.mxevent=null,this.origin=null,this.repeat_count=null},a.open=function(t){var e=new h(t);return e.wid_canvas.oncontextmenu=function(t){return t.preventDefault(),!1},this._ctx=e.active_canvas.getContext("2d"),e.onmousemove=function(t){return function(e){var i=e.target.getBoundingClientRect();t.x=e.x||e.clientX,t.y=e.y||e.clientY,t.xpos=void 0===e.offsetX?e.pageX-i.left-window.scrollX:e.offsetX,t.ypos=void 0===e.offsetY?e.pageY-i.top-window.scrollY:e.offsetY,t.warpbox&&((e.ctrlKey||e.metaKey)&&void 0!==t.warpbox.alt_style?t.warpbox.style=t.warpbox.alt_style:t.warpbox.style=t.warpbox.def_style,a.redraw_warpbox(t)),a.widget_callback(t,e)}}(e),e.onmouseup=function(t){return function(e){if(t.warpbox){a.onWidgetLayer(t,(function(){a.erase_window(t)}));var i=t.warpbox;if(t.warpbox=void 0,(1===e.which||3===e.which)&&i.func){var n=i.xo,r=i.yo,o=i.xl,s=i.yl;"vertical"===i.mode?(n=t.l,o=t.r):"horizontal"===i.mode&&(r=t.t,s=t.b),i.func(e,n,r,o,s,i.style.return_value,i.mode)}}a.widget_callback(t,e)}}(e),e.onmousedown=function(t){return function(e){return e.preventDefault(),a.widget_callback(t,e),!1}}(e),e.onmouseover=function(t){return function(e){return t.mouseOver=!0,!1}}(e),e.onmouseleave=function(t){return function(e){return t.mouseOver=!1,!1}}(e),e.onkeydown=function(t){return function(e){if(t.warpbox){var i=r.getKeyCode(e);17!==i&&224!==i&&91!==i&&93!==i||t.warpbox.style===t.warpbox.alt_style||(t.warpbox.style=t.warpbox.alt_style,a.redraw_warpbox(t))}a.widget_callback(t,e)}}(e),e.onkeyup=function(t){return function(e){if(t.warpbox){var i=r.getKeyCode(e);17!==i&&224!==i&&91!==i&&93!==i||t.warpbox.style===t.warpbox.def_style||(t.warpbox.style=t.warpbox.def_style,a.redraw_warpbox(t))}}}(e),e.ontouchend=function(t){return function(e){t.onmouseup({which:1})}}(e),e.ontouchmove=function(t){return function(e){var i=t.canvas,n=0,r=0;if(void 0!==i.offsetParent)do{n+=i.offsetLeft,r+=i.offsetTop}while(i=i.offsetParent);t.xpos=e.targetTouches[0].pageX-n,t.ypos=e.targetTouches[0].pageY-r,a.redraw_warpbox(t)}}(e),a.enableListeners(e),e},a.enableListeners=function(t){a.addEventListener(t,"mousemove",t.onmousemove,!1),window.addEventListener("mouseup",t.onmouseup,!1),a.addEventListener(t,"mousedown",t.onmousedown,!1),a.addEventListener(t,"mouseover",t.onmouseover,!1),a.addEventListener(t,"mouseleave",t.onmouseleave,!1),window.addEventListener("keydown",t.onkeydown,!1),window.addEventListener("keyup",t.onkeyup,!1)},a.disableListeners=function(t){a.removeEventListener(t,"mousemove",t.onmousemove,!1),window.removeEventListener("mouseup",t.onmouseup,!1),a.removeEventListener(t,"mousedown",t.onmousedown,!1),a.removeEventListener(t,"mouseover",t.onmouseover,!1),a.removeEventListener(t,"mouseleave",t.onmouseleave,!1),window.removeEventListener("keydown",t.onkeydown,!1),window.removeEventListener("keyup",t.onkeyup,!1)},a.addEventListener=function(t,e,i,n){return t.wid_canvas.addEventListener(e,i,n)},a.removeEventListener=function(t,e,i,n){return t.wid_canvas.removeEventListener(e,i,n)},a.dispatchEvent=function(t,e){return t.wid_canvas.dispatchEvent(e)},a.onWidgetLayer=function(t,e){a.onCanvas(t,t.wid_canvas,e)},a.onCanvas=function(t,e,i){var n=t.active_canvas;t.active_canvas=e;try{if(i)return i()}finally{t.active_canvas=n}},a.withWidgetLayer=function(t,e){return function(){a.onWidgetLayer(t,e)}},a.render=function(t,e){if(e){var i=t.active_canvas;!1===t._syncRender?i._animationFrameHandle||(i._animationFrameHandle=requestAnimFrame((function(){i._animationFrameHandle=void 0,e()}))):e()}},a.fullscreen=function(t,e){void 0===e&&(e=!t.fullscreen),e?(t.fullscreen={position:t.root.style.position,height:t.root.style.height,width:t.root.style.width,left:t.root.style.left,top:t.root.style.top,zIndex:t.root.style.zIndex},t.root.style.position="fixed",t.root.style.height="100%",t.root.style.width="100%",t.root.style.left="0px",t.root.style.top="0px",t.root.style.zIndex=16777271):(t.root.style.position=t.fullscreen.position,t.root.style.height=t.fullscreen.height,t.root.style.width=t.fullscreen.width,t.root.style.left=t.fullscreen.left,t.root.style.top=t.fullscreen.top,t.root.style.zIndex=t.fullscreen.zIndex,t.fullscreen=void 0),a.checkresize(t)},a.checkresize=function(t){var e=t.canvas;return(e.height!==t.root.clientHeight||e.width!==t.root.clientWidth)&&(t.height=t.root.clientHeight,t.width=t.root.clientWidth,t.canvas.height=t.height,t.canvas.width=t.width,t.wid_canvas.height=t.height,t.wid_canvas.width=t.width,!0)},a.invertbgfg=function(t){a.setbgfg(t,t.fg,t.bg,!t.xi)},a.mixcolor=function(t,i,n){var r=e(t).toRgb(),o=e(i).toRgb(),s=1-n;return o.r=r.r*s+o.r*n,o.g=r.g*s+o.g*n,o.b=r.b*s+o.b*n,e(o).toHexString(!0)},a.linear_gradient=function(t,e,i,n,r,o){for(var s=t.active_canvas.getContext("2d"),a=1/o.length,l=s.createLinearGradient(e,i,n,r),h=0;h<o.length-1;h++)l.addColorStop(a*h,o[h]);return l.addColorStop(1,o[o.length-1]),l},a.setbgfg=function(t,i,n,r){if(t.bg=e(i).toHexString(),t.fg=e(n).toHexString(),t.xi=e(r).toHexString(),e.equals(t.bg,"black")&&e.equals(t.fg,"white"))t.xwfg=t.fg,t.xwbg="rgb(35%,35%,30%)",t.xwts="rgb(60%,60%,55%)",t.xwbs="rgb(25%,25%,20%)",t.xwms=a.mixcolor(t.xwts,t.xwbs,.5),t.xwlo="rgb(15%,15%,10%)",t.hi=t.xwts;else if(e.equals(t.bg,"white")&&e.equals(t.fg,"black"))t.xwfg=t.fg,t.xwbg="rgb(60%,60%,55%)",t.xwts="rgb(80%,80%,75%)",t.xwbs="rgb(40%,40%,35%)",t.xwms=a.mixcolor(t.xwts,t.xwbs,.5),t.xwlo="rgb(70%,70%,65%)",t.hi=t.xwbs;else{var o=e(t.bg).toRgb();Math.sqrt(o.r*o.r*.299+o.g*o.g*.587+o.b*o.b*.114)>127.5?(t.xwfg="black",t.xwbg="rgb(60%,60%,55%)",t.xwts="rgb(80%,80%,75%)",t.xwbs="rgb(40%,40%,35%)",t.xwms=a.mixcolor(t.xwts,t.xwbs,.5),t.xwlo="rgb(70%,70%,65%)",t.hi=t.xwts):(t.xwfg="white",t.xwbg="rgb(35%,35%,30%)",t.xwts="rgb(60%,60%,55%)",t.xwbs="rgb(25%,25%,20%)",t.xwms=a.mixcolor(t.xwts,t.xwbs,.5),t.xwlo="rgb(15%,15%,10%)",t.hi=t.xwbs)}},a.settheme=function(t,e){t.bg=e.bg,t.fg=e.fg,t.xi=e.xi,t.xwfg=e.xwfg,t.xwbg=e.xwbg,t.xwts=e.xwts,t.xwbs=e.xwbs,t.xwlo=e.xwlo,t.hi=e.hi},a.close=function(t){var e=t.wid_canvas;e.removeEventListener("mousemove",t.onmousemove,!1),e.removeEventListener("mouseup",t.onmouseup,!1),t.parent&&t.parent.parentNode&&t.parent.parentNode.removeChild(t.parent)},a.scrollbar=function(t,e,i,n,r,o,s,l,h,c,u){var d,f,p,x,m,y,v=0,_=new a.SCROLLBAR;switch(d=void 0!==e.flag?e.flag:e,f=Math.abs(d),p=o-r>n-i?t.origin<3?2:4:2&t.origin?3:1,f<10&&(e=_),(f<10||0===e.action)&&(a.scroll(t,e,a.XW_INIT,void 0,u),e.flag=d,e.initial_pause=-1,a.scroll_loc(e,i,r,n-i+1,o-r+1,p,u)),e.srange=s.pe-s.ps,f){case 0:x=m=y=1;break;case 1:case 11:x=m=.9*e.srange,y=2;break;case 2:case 12:m=9*(x=.1*e.srange),y=2;break;case 3:case 13:x=1,m=e.srange-1,y=1;break;default:return 0}return a.scroll_vals(e,s.ps,e.srange,l,h-l,x,m,y,u),0===d?a.scroll(t,e,a.XW_DRAW,void 0,void 0):a.scroll(t,e,a.XW_EVENT,c,u)&&(s.ps!==e.smin&&(s.ps=e.smin,v+=1),s.pe!==e.smin+e.srange&&(s.pe=e.smin+e.srange,v+=2)),v},a.scroll=function(t,e,i,n,r){var o,s,l,h;if(void 0===e)return!1;switch(i){case a.XW_INIT:a.scroll_loc(e,0,0,t.width,20,1,r),a.scroll_vals(e,0,10,0,100,1,10,1,r),e.flag=0,e.action=0,e.initial_pause=.25,e.repeat_pause=.05,e.mxevent=!0,e.repeat_count=0;break;case a.XW_EVENT:if(o=0,e.mxevent)o=t.button_release?-t.button_release:t.button_press;else if("mousedown"===n.type||"mouseup"===n.type){switch(n.which){case 1:o=1;break;case 2:o=2;break;case 3:o=3;break;case 4:o=4;break;case 5:o=5}"mouseup"===n.type&&(o=-o)}else"mousewheel"!==n.type&&"DOM-MouseScroll"!==n.type||(n.wheelDelta&&n.wheelDelta>0?o=4:n.wheelDelta&&n.wheelDelta<0&&(o=5));if(0===e.action){if(4!==o&&5!==o||(t.xpos=e.x),1!==o&&2!==o&&4!==o&&5!==o||t.xpos<e.x||t.ypos<e.y||t.xpos>e.x+e.w||t.ypos>e.y+e.h)return!1}else if(o<0)return e.action=e.repeat_count=0,!0;if(1&e.origin?(h=t.xpos-e.x,2&e.origin&&(h=e.w-h)):(h=t.ypos-e.y,e.origin<=2&&(h=e.h-h)),0===e.action){e.repeat_count=0;var c=a.scroll_real2pix(e);if(e.s1=r.s1=c.s1,e.sw=r.sw=c.sw,e.soff=r.soff=h-e.s1,0===e.trange)e.smin=r.smin=e.tmin,e.srange=r.srange=0;else switch(o){case 1:h>e.a1&&h<e.a2?e.action=e.soff>0?a.SB_PAGEINC:a.SB_PAGEDEC:e.action=e.soff>0?a.SB_STEPINC:a.SB_STEPDEC;break;case 4:e.action=a.SB_WHEELUP;break;case 5:e.action=a.SB_WHEELDOWN}}else switch(e.action){case a.SB_WHEELUP:case a.SB_WHEELDOWN:case a.SB_EXPAND:case a.SB_SHRINK:case a.SB_FULL:e.action=e.repeat_count=0}case a.XW_COMMAND:switch(s=e.smin,l=e.srange,e.action){case a.SB_STEPINC:s+=e.step;break;case a.SB_STEPDEC:s-=e.step;break;case a.SB_PAGEINC:s+=e.page;break;case a.SB_PAGEDEC:s-=e.page;break;case a.SB_FULL:s=e.tmin,l=e.trange;break;case a.SB_EXPAND:l*=e.scale,s<=0&&s+e.srange>=0?s*=e.scale:s-=(l-e.srange)/2;break;case a.SB_SHRINK:l/=e.scale,s<0&&s+e.srange>=0?s+=l/e.scale:0===s&&s+e.srange>=0?s=l/e.scale:s+=(e.srange-l)/2;break;case a.SB_WHEELUP:s-=e.page;break;case a.SB_WHEELDOWN:s+=e.page}e.trange>0?(s=Math.max(e.tmin,Math.min(s,e.tmin+e.trange-l)),l=Math.min(l,e.trange)):(s=Math.min(e.tmin,Math.max(s,e.tmin+e.trange-l)),l=Math.max(l,e.trange)),e.smin===s&&e.srange===l?e.action!==a.SB_DRAG&&(e.action=e.repeat_count=0):(e.smin=r.smin=s,e.srange=r.srange=l,e.repeat_count++),i===a.XW_COMMAND&&(a.scroll(t,e,a.XW_UPDATE,void 0),e.action=0);break;case a.XW_DRAW:case a.XW_UPDATE:a.redrawScrollbar(e,t,i)}return!0},a.scroll_loc=function(t,e,i,n,r,o,l){void 0!==t&&(t.x=l.x=e,t.y=l.y=i,t.w=l.w=n,t.h=l.h=r,t.origin=l.origin=Math.max(1,Math.min(4,o)),1&t.origin?(t.a2=l.a2=t.w,t.arrow=l.arrow=Math.min(s.trunc((t.w-s.trunc(2*a.GBorder))/3),t.h+a.GBorder)):(t.a2=l.a2=t.h,t.arrow=l.arrow=Math.min(s.trunc((t.h-s.trunc(2*a.GBorder))/3),t.w+a.GBorder)),t.a1=l.a1=t.arrow+a.GBorder,t.a2-=t.arrow+a.GBorder,l.a2-=t.arrow+a.GBorder,t.swmin=l.swmin=Math.min(10,t.a2-t.a1),t.s1=l.s1=0,t.sw=l.sw=0,t.action=l.action=0)},a.scroll_vals=function(t,e,i,n,r,o,s,a,l){void 0!==t&&(t.smin=l.smin=e,t.srange=l.srange=i,t.tmin=l.tmin=n,t.trange=l.trange=r,t.step=l.step=o,t.page=l.page=s,t.scale=l.scale=Math.max(a,1))},a.draw_symbol=function(t,e,i,n,r,o,l){for(var h,c=t.active_canvas.getContext("2d"),u=0,d=0,f=0,p=[],x=0;x<4;x++)p[x]={x:0,y:0};var m="";if(h=o<0,d=2*(u=Math.abs(o)),c.fillStyle=e,c.strokeStyle=e,"function"==typeof r)r(c,l,i,n);else switch(r){case a.L_CircleSymbol:c.beginPath(),h?(c.arc(i,n,u,0,360),c.fill()):(c.arc(i,n,u,0,360),c.stroke());break;case a.L_SquareSymbol:h?function(t,e,i,n,r,o,s,a){t.fillRect(e,i,n,r)}(c,i-u,n-u,d,d):function(t,e,i,n,r,o,s){t.strokeRect(e,i,n,r)}(c,i-u,n-u,d,d);break;case a.L_PixelSymbol:d=1,c.beginPath(),c.arc(i,n,1,0,2*Math.PI,!0),c.fill();break;case a.L_ITriangleSymbol:u=-u;case a.L_TriangleSymbol:d=s.trunc(1.5*u),f=s.trunc(.8*u),p[1].x=-f,p[1].y=d,p[2].x=2*f,p[2].y=0,p[3].x=-f,p[3].y=-d;var y=[];for(x=0;x<4;x++)y[x]={x:0,y:0};h?(y[0].x=i,y[0].y=n-u,y[1].x=y[0].x+p[1].x,y[1].y=y[0].y+p[1].y,y[2].x=y[1].x+p[2].x,y[2].y=y[1].y+p[2].y,y[3].x=y[2].x+p[3].x,y[3].y=y[2].y+p[3].y,_(c,y)):(y[0].x=i,y[0].y=n-u,y[1].x=y[0].x+p[1].x,y[1].y=y[0].y+p[1].y,y[2].x=y[1].x+p[2].x,y[2].y=y[1].y+p[2].y,y[3].x=y[2].x+p[3].x,y[3].y=y[2].y+p[3].y,function(t,e,i,n){b(t,e,void 0),t.stroke(),t.closePath()}(c,y));break;case a.L_PlusSymbol:v(c,i,n+u,i,n-u),v(c,i+u,n,i-u,n);break;case a.L_HLineSymbol:v(c,i+u,n,i-u,n);break;case a.L_VLineSymbol:v(c,i,n+u,i,n-u);break;case a.L_XSymbol:v(c,i-u,n-u,i+u,n+u),v(c,i+u,n-u,i-u,n+u);break;default:m=r,u=s.trunc(t.text_w/2),h&&c.fillText(m.substring(0,2),i-u,n+u)}},a.draw_symbols=function(t,e,i,n,r,o,s,l){for(var h=0;h<r;h++)a.draw_symbol(t,e,i[h],n[h],o,s,h+l)},a.trace=function(t,e,i,n,r,o,l,h,u,f,p){if(void 0===i||void 0===n)throw"mx.trace requires xpoint and ypoint";if(void 0===l&&(l=1),void 0===h&&(h=1),void 0===u&&(u=0),void 0===f&&(f=0),void 0===p&&(p={}),r<=0)s.log.warn("No points to draw");else if(0!==h||0!==u){var x;p.dashed&&(x={mode:"dashed",on:4,off:4});var m=a.origin(t.origin,4,t.stk[t.level]);if(0!==m.xscl&&0!==m.yscl){var v=m.x1,_=m.y1,b=m.xmin,g=1/m.xscl,w=m.ymin,M=1/m.yscl;p.noclip||a.clip(t,v,_,m.x2-v+1,m.y2-_+1);var k=Math.abs(m.xmax-m.xmin),S=Math.abs(m.ymax-m.ymin),E=Math.min(m.xmin,m.xmax),A=Math.min(m.ymin,m.ymax),z=E+k,C=A+S;p.pixels&&(g=1,b=0,M=1,w=0,E=0,A=0,z=Math.round(t.r-t.l),C=Math.round(t.b-t.t));var L=4*Math.ceil(2*i.length),T=new Int32Array(new ArrayBuffer(L)),O=new Int32Array(new ArrayBuffer(L)),P=0;if(0===h&&0!==u)for(var G=l-1;G<r;G+=l){var R=i[G],I=n[G];(Y=R>=E&&R<=z&&I>=A&&I<=C)&&(T[0]=Math.round((R-b)*g)+v,O[0]=Math.round((I-w)*M)+_,a.draw_symbol(t,e,T[0],O[0],u,f,o+G))}if(!0===p.vertsym)for(G=l-1;G<r;G+=l)if(R=i[G],I=n[G],R>=E&&R<=z){var D=Math.round((R-b)*g)+v;a.draw_line(t,e,D,0,D,t.height),I>=A&&I<=C&&(T[0]=D,O[0]=Math.round((I-w)*M)+_,a.draw_symbol(t,e,T[0],O[0],u,f,o+G))}if(!0===p.horzsym)for(G=l-1;G<r;G+=l)R=i[G],(I=n[G])>=A&&I<=C&&(D=Math.round((I-w)*M)+_,a.draw_line(t,e,0,D,t.width,D),R>=E&&R<=z&&(T[0]=Math.round((R-b)*g)+v,O[0]=D,a.draw_symbol(t,e,T[0],O[0],u,f,o+G)));else if(0!==h){var N;if(p&&p.highlight){N=[];for(var B=0;B<p.highlight.length;B++)if(!(p.highlight[B].xstart>=z||p.highlight[B].xend<=E)){var U=Math.max(p.highlight[B].xstart,E),j=Math.min(p.highlight[B].xend,z);if(U<j){for(var H=Math.round((U-b)*g)+v,W=Math.round((j-b)*g)+v,F=N.length-1;F>=0;F--)H<=N[F].start&&W>=N[F].end?N.splice(F,1):(H>=N[F].start&&W<=N[F].end?(N.push({start:W,end:N[F].end,color:N[F].color}),N[F].end=H):H<=N[F].start&&W>=N[F].start?N[F].start=W:H<=N[F].end&&W>=N[F].end&&(N[F].end=H),N[F].end<=N[F].start&&N.splice(F,1));N.push({start:H,end:W,color:p.highlight[B].color})}}N.push({start:v,color:e}),N.sort((function(t,e){return t.start-e.start}))}else N=e;var Y,X=0,V=(t.stk[t.level].xmax+t.stk[t.level].xmin)/2,q=(t.stk[t.level].ymax+t.stk[t.level].ymin)/2;R=i[0],I=n[0],X=d(X,V,q,t.stk[t.level].xmin,t.stk[t.level].ymin,R,I),(Y=R>=E&&R<=z&&I>=A&&I<=C)?(T[P]=Math.round((R-b)*g)+v,O[P]=Math.round((I-w)*M)+_,P+=1,0!==u&&a.draw_symbols(t,e,T,O,1,u,f,o)):P=0;var K=0,$=!1;for(G=l;G<=l*(r-1);G+=l){var J=R,Z=I;if(X=d(X,V,q,J,Z,R=i[G],I=n[G]),$=R>=E&&R<=z&&I>=A&&I<=C,Y&&$)T[P]=Math.round((R-b)*g)+v,O[P]=Math.round((I-w)*M)+_,P+=1;else if(Y=$,S=Z-I,0!=(k=J-R)||0!==S){var Q={tL:1,tE:0};y(k,E-R,Q)&&y(-k,R-z,Q)&&y(S,A-I,Q)&&y(-S,I-C,Q)&&(Q.tL<1&&(T[P]=Math.round((R-b+Q.tL*k)*g)+v,O[P]=Math.round((I-w+Q.tL*S)*M)+_,P+=1),Q.tE>0?(T[P]=Math.round((R-b+Q.tE*k)*g)+v,O[P]=Math.round((I-w+Q.tE*S)*M)+_,P+=1,a.draw_lines(t,N,T.subarray(K,P),O.subarray(K,P),P-K,h,x),0!==u&&P-K>2&&a.draw_symbols(t,e,T.subarray(K+1,P-1),O.subarray(K+1,P-1),P-K-2,u,f,o+G-(P-K-2)),K=P):(T[P]=Math.round((R-b)*g)+v,O[P]=Math.round((I-w)*M)+_,P+=1))}}if(X=d(X,V,q,R,I,t.stk[t.level].xmax,t.stk[t.level].ymin),X=d(X,V,q,t.stk[t.level].xmax,t.stk[t.level].ymin,t.stk[t.level].xmin,t.stk[t.level].ymin),P-K>0&&(a.draw_lines(t,N,T.subarray(K,P),O.subarray(K,P),P-K,h,x),$&&(K+=1),0!==u&&P-K>1&&a.draw_symbols(t,e,T.subarray(K,P),O.subarray(K,P),P-K,u,f,G-P+o)),!p.fillStyle||t.fillMin||t.fillMax||(P>1||0!==X)&&a.fill_trace(t,p.fillStyle,T,O,P),p.highlight)for(D=0;D<p.highlight.length;D++){var tt=p.highlight[D];if(tt.fill){var et=tt.xstart,it=tt.xend;if(console.log("x start ",et),console.log("x end ",it),!(et>=t.stk[t.level].xmax||it<=t.stk[t.level].xmin)&&(P>1||0!==X)){for(var nt=a.real_to_pixel(t,et,0),rt=a.real_to_pixel(t,it,0),ot=nt.x,st=rt.x,at=[],lt=[],ht=0;ht<P;ht++){var ct=T[ht],ut=O[ht];!0===c(ct,ot,st)&&(at.push(ct),lt.push(ut))}(at.length>0||0!==X)&&(ot=Math.max(ot,at[0]),st=Math.min(st,at[at.length-1]),a.fill_trace(t,tt.fill,at,lt,at.length,ot,st))}}}}p.noclip||a.clip(t,0,0,0,0)}}else s.log.warn("No line or symbol to draw")},a.draw_mode=function(t,e,i){t.linewidth=void 0===e?1:e,t.style=i},a.draw_line=function(t,e,i,n,r,o,a,l){var h=t.active_canvas.getContext("2d");void 0===a&&(a=t.linewidth),void 0===l&&(l=t.style),"number"==typeof e&&(t.pixel?(isNaN(e)&&(e=0),Math.max(0,Math.min(t.pixel.map.length,e)),e=w((e=t.pixel.getColor(e)).red,e.green,e.blue)):(s.log.warn("COLORMAP not initialized, defaulting to foreground"),e=t.fg)),v(h,i,n,r,o,l,e,a)},a.rubberline=function(t,e,i,n,r){v(t.active_canvas.getContext("2d"),e,i,n,r,{mode:"xor"},"white",1)},a.fill_trace=function(t,e,i,n,r,o,s){var l=t.active_canvas.getContext("2d");if(Array.isArray(e)?l.fillStyle=a.linear_gradient(t,0,0,0,t.b-t.t,e):l.fillStyle=e,r<1)l.fillRect(t.l,t.t,t.r-t.l,t.b-t.t);else if(void 0===o&&(o=t.l),void 0===s&&(s=t.r),e){var h=i[0],c=n[0];l.beginPath(),c===t.t?l.lineTo(o,t.t):l.lineTo(o,t.b),l.lineTo(h,c);for(var u=1;u<r;u++)h=i[u],c=n[u],l.lineTo(h,c);c===t.t&&l.lineTo(s,t.t),l.lineTo(s,t.b),n[0]===t.t&&l.lineTo(o,t.b),l.closePath(),l.fill("evenodd")}},a.draw_lines=function(t,e,i,n,o,a,l){var h=t.active_canvas.getContext("2d");if(!(o<1)){var c=i[0],u=n[0];void 0===a&&(a=t.linewidth),void 0===l&&(l=t.style),l&&"dashed"===l.mode&&(r.dashOn(h,l.on,l.off)||s.log.warn("WARNING: Dashed lines aren't supported on your browser")),h.lineWidth=a;var d,f=0;for("string"==typeof e?e=[{start:0,color:e}]:e instanceof Array||(void 0===e.start&&(e.start=0),e=[e]),d=e.length-1;d>=0;d--)null!=e[d].end&&e[d].end<c&&e.splice(d,1);for(d=0;d<e.length;d++)e[d].start<c&&(f=d);h.strokeStyle=e[f].color,h.beginPath(),h.moveTo(c,u);for(var p=0;p<o;p++)if(c!==i[p]||u!==n[p]){c=i[p],u=n[p];var x=!1;if(f>0&&null!=e[f].end&&e[f].end<c)for(x=!0;null!=e[f].end&&e[f].end<c&&(e.splice(f,1),0!=(f-=1)););if(f+1<e.length&&e[f+1].start<=c)for(x=!0;f+1<e.length&&e[f+1].start<=c;)f++;h.lineTo(c,u),x&&(h.stroke(),h.strokeStyle=e[f].color,h.beginPath(),h.lineTo(c,u))}h.stroke(),r.dashOff(h),h.beginPath()}},a.clip=function(t,e,i,n,r){var o=t.active_canvas.getContext("2d");0!==e||0!==i||0!==n||0!==r?(o.save(),o.beginPath(),o.rect(e,i,n,r),o.clip()):o.restore()},a.clear_window=function(t){var e=t.active_canvas.getContext("2d");e.fillStyle=t.bg,e.fillRect(0,0,t.width,t.height)},a.erase_window=function(t){t.active_canvas.getContext("2d").clearRect(0,0,t.width,t.height)},a.rubberbox=function(t,e,i,n,r){a.warpbox(t,t.xpos,t.ypos,t.xpos,t.ypos,0,t.width,0,t.height,e,i,n,r)},a.warpbox=function(t,e,i,n,r,o,s,a,h,c,u,d,f){d||(d={}),t.warpbox=new l,t.warpbox.xo=e,t.warpbox.yo=i,t.warpbox.xl=n,t.warpbox.yl=r,t.warpbox.xmin=o,t.warpbox.xmax=s,t.warpbox.ymin=a,t.warpbox.ymax=h,t.warpbox.func=c,t.warpbox.mode=u,t.warpbox.style=d,t.warpbox.def_style=d,t.warpbox.alt_style=f},a.origin=function(t,e,i){t=Math.max(1,t),e=Math.max(1,e);var n=new a.STKSTRUCT;if(n.xmin=i.xmin,n.xmax=i.xmax,n.ymin=i.ymin,n.ymax=i.ymax,n.xscl=i.xscl,n.yscl=i.yscl,n.x1=i.x1,n.y1=i.y1,n.x2=i.x2,n.y2=i.y2,t!==e){var r=Math.abs(e-t),o=e+t;2!==r&&5===o||(n.xmin=i.xmax,n.xmax=i.xmin,n.xscl=-i.xscl),2!==r&&5!==o||(n.ymin=i.ymax,n.ymax=i.ymin,n.yscl=-i.yscl)}return n},a.mult=function(t,e){var i=Math.max(Math.abs(t),Math.abs(e));if(0===i)return 1;var n=.1447648*Math.log(i);return n|=n,i<1&&(n-=1),n<0?1/Math.pow(10,-3*n):Math.pow(10,3*n)},a.widget_callback=function(t,e){t.prompt&&3===e.which&&t.prompt.input.onsubmit(),t.widget&&("mouseup"===e.type&&t.mouseUpLatch?t.mouseUpLatch=void 0:t.widget.callback(e))},a.prompt=function(t,e,i,n,r,s,l,h,c){if(void 0!==s){var u=i(s);if(!u.valid)throw"Prompt default input value not valid due to '"+u.reason+"'"}a.onWidgetLayer(t,(function(){var r=t.active_canvas.getContext("2d"),u=r.font.indexOf("px"),d=u+3,f=r.font.substr(0,u),p=r.font.substr(d,r.font.length).toString(),x=new o({height:t.text_h,fontFamily:p,fontSize:new Number(f),backgroundColor:t.bg,fontColor:t.fg,borderWidth:0,borderRadius:0,padding:0,boxShadow:"none",innerShadow:"none",width:30*t.text_w,value:void 0!==s?s.toString():"",disableBlur:!0,renderOnReturn:!1,tabToClear:!0}),m=function(e,r){return function(){var o=this.value(),s=i(o);s.valid?(t.prompt=void 0,this.cleanup(),a.onWidgetLayer(t,(function(){a.erase_window(t)})),n(o)):(a.message(t,"Value: '"+o+"' isn't valid due to '"+s.reason+"' - RETRY",void 0,e,r),setTimeout((function(){a.onWidgetLayer(t,(function(){a.erase_window(t)})),t.widget=null}),null!=c?c:4e3))}},y=function(t,e,i){return function(n,r){a.onWidgetLayer(t,(function(){var o=(i.length+2)*t.text_w,s=o+31*t.text_w+6,l=2*t.text_h+6;n||(n=t.xpos),r||(r=t.ypos);var h=Math.max(0,Math.min(n,t.width-s)),c=Math.max(0,Math.min(r,t.height-l)),u=h+3,d=c+3,f=d+1.5*t.text_h,p=u+t.text_w;a.widgetbox(t,h,c,s,l,u,d,0,""),a.text(t,p,f,i);var x=f-1.15*t.text_h;e.x(u+t.text_w+o-t.text_w),e.y(x),e.onsubmit(m(h,x-75)),e.canvas()?e.render():e.canvas(t.active_canvas)}))}}(t,x,e);y(l,h),x.focus(),t.prompt={redraw:y,input:x}}))},a.floatValidator=function(t,e){return(void 0!==e&&!1!==e||""!==t)&&isNaN(parseFloat(t))||!isFinite(t)?{valid:!1,reason:"Failed float validation: not a valid floating point number"}:{valid:!0,reason:""}},a.intValidator=function(t,e){return(void 0===e||!1===e)&&""===t||parseFloat(t)===parseInt(t,10)&&!isNaN(t)?{valid:!0,reason:""}:{valid:!1,reason:"Failed integer validation: not a valid integer"}},a.hexValidator=function(t,e){return(void 0===e||!1===e)&&""===t||!1!==/^(#)?([0-9a-fA-F]{3})([0-9a-fA-F]{3})?$/.test(t)?{valid:!0,reason:""}:{valid:!1,reason:"Failed hexcode validation: not a valid hexcode"}},a.message=function(t,e,i,n,r,o){a.onWidgetLayer(t,(function(){a.render_message_box(t,e,n,r),t.widget={type:o||"ONESHOT",callback:function(e){"mousedown"!==e.type&&"keydown"!==e.type||(t.widget=null,a.onWidgetLayer(t,(function(){a.erase_window(t)})))}}}))},a.render_message_box=function(t,e,i,n,r){var o,s=0;if(1===(p=e.split(/\r\n|\r|\n/g)).length){if(p=[],(s=Math.min((t.width-6)/t.text_w-2,e.length))<=0)return;for(;s>40&&2.5*t.text_h*e.length<t.height*s;)s-=5;var l=0,h=0,c=0,u=0,d=0,f=0,p=[];for(o=!0;h<e.length;){d=h+s-1,f=d=Math.min(d,e.length-1);var x=!1;for(l=h;l<=d&&!x;l++)switch(e[l]){case",":case";":case" ":case":":f=l;break;case"-":case"/":f!==l-1&&(f=l);break;case"@":case"\n":case"\r":o=!1,x=!0,f=l}if(l===e.length&&(f=d),x)p.push(e.substring(h,f));else{var m=e.substring(h,f+1).replace(/^\s+/,"");p.push(m)}h=f+1,u=Math.max(u,p[c].length)}}else for(c=0;c<p.length;c++)s=Math.min((t.width-6)/t.text_w-2,Math.max(s,p[c].length));var y=p.length;y>6&&(o=!1),l=0;var v=Math.max(1,t.height/t.text_h),_=Math.min(y,l+v-1),b=(s+2)*t.text_w+6,g=(_-l+1)*t.text_h+6;i||(i=t.xpos),n||(n=t.ypos);var w=Math.max(t.l,Math.min(i,t.r-b)),M=Math.max(t.t,Math.min(n,t.b-g)),k=w+3,S=M+3;for(a.widgetbox(t,w,M,b,g,k,S,0,""),u=S+t.text_h/3,c=k+t.text_w;l<_;)u+=t.text_h,o&&(c=w+b/2-p[l].length*t.text_w/2),a.text(t,c,u,p[l],r),l++},a.draw_round_box=function(t,e,i,n,r,o,s,a,l){var h=t.active_canvas.getContext("2d");if(l||(l=5),h.beginPath(),h.moveTo(i+l,n),h.lineTo(i+r-l,n),h.quadraticCurveTo(i+r,n,i+r,n+l),h.lineTo(i+r,n+o-l),h.quadraticCurveTo(i+r,n+o,i+r-l,n+o),h.lineTo(i+l,n+o),h.quadraticCurveTo(i,n+o,i,n+o-l),h.lineTo(i,n+l),h.quadraticCurveTo(i,n,i+l,n),h.closePath(),h.lineWidth=1,h.strokeStyle=e,h.stroke(),void 0!==s&&s>0){var c=h.globalAlpha;h.globalAlpha=s,h.fillStyle=a||e,h.fill(),h.globalAlpha=c}},a.draw_box=function(t,e,i,n,r,o,s,a){var l=t.active_canvas.getContext("2d");if("xor"!==e)l.lineWidth=1,l.strokeStyle=e,l.strokeRect(i,n,r,o);else if("undefined"==typeof Uint8ClampedArray)l.lineWidth=1,l.strokeStyle=t.fg,l.strokeRect(i,n,r,o);else{i=Math.floor(i),n=Math.floor(n),r=Math.floor(r),o=Math.floor(o);for(var h=t.canvas.getContext("2d"),c=(d=h.getImageData(i,n,r,1)).data,u=0;u<d.data.length;u++)c[4*u]=255-c[4*u],c[4*u+1]=255-c[4*u+1],c[4*u+2]=255-c[4*u+2],c[4*u+3]=255;for(l.putImageData(d,i,n),c=(d=h.getImageData(i,n+o,r,1)).data,u=0;u<d.data.length;u++)c[4*u]=255-c[4*u],c[4*u+1]=255-c[4*u+1],c[4*u+2]=255-c[4*u+2],c[4*u+3]=255;var d;for(l.putImageData(d,i,n+o),c=(d=h.getImageData(i,n,1,o)).data,u=0;u<o;u++)c[4*u]=255-c[4*u],c[4*u+1]=255-c[4*u+1],c[4*u+2]=255-c[4*u+2],c[4*u+3]=255;for(l.putImageData(d,i,n),c=(d=h.getImageData(i+r,n,1,o)).data,u=0;u<o;u++)c[4*u]=255-c[4*u],c[4*u+1]=255-c[4*u+1],c[4*u+2]=255-c[4*u+2],c[4*u+3]=255;l.putImageData(d,i+r,n)}if(void 0!==s&&s>0){var f=l.globalAlpha;l.globalAlpha=s,l.fillStyle=a||e,l.fillRect(i+1,n+1,r-1,o-1),l.globalAlpha=f}},a.set_font=function(t,e){var i=t.canvas.getContext("2d"),n=t.wid_canvas.getContext("2d");if(t.font&&t.font.width===e)i.font=t.font.font,n.font=t.font.font;else{var r=1;do{r+=1,i.font=r+"px "+t.font_family,n.font=r+"px "+t.font_family;var o=i.measureText("M");t.text_w=o.width,t.text_h=r}while(t.text_w<e);t.font={font:r+"px "+t.font_family,width:e}}},a.textline=function(t,e,i,n,r,o){var s=t.active_canvas.getContext("2d");o||(o={}),o.color||(o.color=t.fg),o.width||(o.width=1),v(s,e,i,n,r,o,o.color,o.width)},a.tics=function(t,e,i,n){var r=1,o=t;if(e===t)return{dtic:1,dtic1:t};var s,a,l=Math.abs(e-t)/i,h=(s=Math.max(l,1e-36),Math.log(s)/Math.log(10));h<0?(a=Math.ceil(h),a-=1):a=Math.floor(h);var c,u,d=l*Math.pow(10,-a),f=d*(h=Math.pow(10,a));return n&&f>=5&&f<=5140800?(c=f<17.5?5:f<37.5?15:f<270?60:f<1050?300:f<2250?900:f<7200?3600:f<16200?10800:f<32400?21600:f<129600?43200:f<518400?86400:604800,r=Math.round(f/c)*c):r=d<1.75?h:d<2.25?2*h:d<3.5?2.5*h:d<7?5*h:10*h,0===r&&(r=1),e>=t?(u=t>=0?t/r+.995:t/r-.005,o=(u=Math.floor(u))*r):(u=t>=0?t/r+.005:t/r-.995,o=(u=Math.floor(u))*r,r*=-1),o+r===o&&(r=e-t),{dtic:r,dtic1:o}},a.drawaxis=function(t,e,i,n,r,o,l){var h=a.origin(e.origin,1,e.stk[e.level]),c=0,u=0,d=0,f=0,p=0,x=0;r=void 0===r?30:r,o=void 0===o?30:o,l.exactbox?(c=Math.floor(h.x1),u=Math.floor(h.y1),p=(d=Math.floor(h.x2))-c,x=(f=Math.floor(h.y2))-u):(c=Math.max(Math.floor(h.x1)-2,0),u=Math.max(Math.floor(h.y1)-2,0),p=(d=Math.min(Math.floor(h.x2)+2,e.width))-c-4,x=(f=Math.min(Math.floor(h.y2)+2,e.height))-u-4);var m=e.active_canvas.getContext("2d");l.fillStyle?Array.isArray(l.fillStyle)?m.fillStyle=a.linear_gradient(e,0,0,0,f-u,l.fillStyle):m.fillStyle=l.fillStyle:m.fillStyle=e.bg,m.fillRect(c,u,d-c,f-u),l.noaxisbox||(a.textline(e,c,u,d,u),a.textline(e,d,u,d,f),a.textline(e,d,f,c,f),a.textline(e,c,f,c,u));var y={dtic:0,dtic1:0},v={dtic:0,dtic1:0};i<0?(y.dtic1=h.xmin,y.dtic=(h.xmin-h.xmax)/i):y=a.tics(h.xmin,h.xmax,i,l.xtimecode);var _=1;l.xmult?_=l.xmult:l.xtimecode||(_=a.mult(h.xmin,h.xmax)),n<0?(v.dtic1=h.ymin,v.dtic=(h.ymin-h.ymax)/n):v=a.tics(h.ymin,h.ymax,n,l.ytimecode);var b=1;l.ymult?b=l.ymult:l.ytimecode||(b=a.mult(h.ymin,h.ymax));var g,w,k,S=!l.noxtlab,E=!l.noytlab,A=Math.max(0,c-4*e.text_w);(k=l.ontop?Math.min(e.height,Math.floor(f+1.5*e.text_h)):Math.max(e.text_h,Math.floor(u-.5*e.text_h)))>0&&(l.noyplab||(w=l.ylabel instanceof Function?l.ylabel(o,b):void 0!==l.ylabel?l.ylabel:s.label(o,b)),l.noxplab||(g=l.xlabel instanceof Function?l.xlabel(r,_):void 0!==l.xlabel?l.xlabel:s.label(r,_))),g&&w?a.text(e,A,k,w+" vs "+g):g?a.text(e,A,k,g):w&&a.text(e,A,k,w);var z,C,L=5.5*e.text_w,T=0;T=l.ontop?l.inside?u+1*e.text_h:u-.2*e.text_h:l.inside?f-.5*e.text_h:f+1*e.text_h+2,z=h.xmin!==h.xmax?p/(h.xmax-h.xmin):p/1,C=0!==_?1/_:1;var O,P,G,R,I,D=Math.min(12,Math.round(z*y.dtic)/e.text_w),N=1,B="";if(S)if(l.xtimecode)N=(B=s.sec2tod(y.dtic1)).length*e.text_w<(d-c)/2;else for(O=y.dtic1;O<=h.xmax;O+=y.dtic){if((B=a.format_f(O*C,D,D/2))===P){N=0;break}P=B}for(0===y.dtic&&(y.dtic=h.xmax-y.dtic1+1),A=0,B="",O=y.dtic1;O<=h.xmax;O+=y.dtic)if(!((G=c+Math.round(z*(O-h.xmin))+2)<c)&&(l.grid&&"y"!==l.grid?(l.gridStyle||(a.LEGACY_RENDER?l.gridStyle={mode:"dashed",on:1,off:3}:l.gridStyle={color:e.xwms,mode:"dashed",on:1,off:3}),a.textline(e,G,f,G,u,l.gridStyle)):(a.textline(e,G,f-2,G,f+2),a.textline(e,G,u-2,G,u+2)),S))if(N){if(B=null,l.xtimecode?G>A&&(B=s.sec2tod(O,!0),A=G+e.text_w*(B.length+1)):B=M(B=a.format_f(O*C,D,D/2),!0),B){var U=Math.round(B.length/2)*e.text_w;l.inside&&(G=Math.max(c+U,G),G=Math.min(d-U,G)),G-U>=0&&a.text(e,G-U,T,B)}}else O===y.dtic1&&(l.xtimecode?(B=s.sec2tod(O,!0),l.inside&&(G=Math.floor(Math.max(c+L,G))),a.text(e,G-L,T,B+" +Δ "+s.sec2tod(y.dtic))):(B=(y.dtic1*C).toString(),l.inside&&(G=Math.floor(Math.max(c+L,G))),a.text(e,G-L,T,B+" +Δ "+y.dtic*C)));L=l.yonright?l.inside?Math.min(d-6*e.text_w,e.width-5*e.text_w):Math.min(d+e.text_w,e.width-5*e.text_w):l.inside?Math.max(0,c+e.text_w):Math.max(0,Math.floor(c-(e.l-.5)*e.text_w)),T=.4*e.text_h,z=h.ymin!==h.ymax?-x/(h.ymax-h.ymin):-x/1,C=0!==b?1/b:1,0===v.dtic&&h.ymax,R=h.ymax>=h.ymin?function(t){return t<=h.ymax}:function(t){return t>=h.ymax};for(var j=v.dtic1;R(j);j+=v.dtic)if(!((G=f+Math.round(z*(j-h.ymin))-2)>f)&&(l.grid&&"x"!==l.grid?(l.gridStyle||(l.gridStyle={mode:"dashed",on:1,off:3}),a.textline(e,c,G,d,G,l.gridStyle)):(a.textline(e,c-2,G,c+2,G),a.textline(e,d-2,G,d+2,G)),E))if(l.inside&&(G<u+e.text_h||G>f-2*e.text_h));else if(l.ytimecode){I=s.sec2tod(j);var H=G+T-e.text_h,W=I.indexOf("::");-1!==W&&(H>u&&H<f&&a.text(e,L,H,I.substring(0,W)),W+=1),a.text(e,L,Math.min(f,G+T),I.substring(W+1,W+6)),(H=G+T+e.text_h)>u&&H<f&&"00"!==I.substring(W+7,W+9)&&(I+=".00",a.text(e,L,H,I.substring(W+7,W+12)))}else I=M(I=a.format_f(j*C,12,6),l.inside),a.text(e,L,Math.min(f,G+T),I)},a.inrect=function(t,e,i,n,r,o){return t>=i&&t<=i+r&&e>=n&&e<=n+o};var f={GBorder:3,sidelab:0,toplab:1,n_show:0};function p(t,e){if(!e.animationFrameHandle){var i=t.canvas.height-70,n=1.5*t.text_h,r=Math.floor(i/n);r>=e.items.length?f.n_show=e.items.length:f.n_show=r,e.animationFrameHandle=requestAnimFrame(a.withWidgetLayer(t,(function(){a.erase_window(t),e.animationFrameHandle=void 0;var i=1.5*t.text_h;e.x=Math.max(e.x,0),e.y=Math.max(e.y,0),e.x=Math.min(e.x,t.width-e.w),e.y=Math.min(e.y,t.height-e.h);var n=e.x+f.GBorder+Math.max(0,f.sidelab),r=e.y+f.GBorder+f.toplab*(i+f.GBorder),o=e.w-2*f.GBorder-Math.abs(f.sidelab),s=e.h-2*f.GBorder-f.toplab*(i+f.GBorder);a.widgetbox(t,e.x,e.y,e.w,e.h,n,r,o,s,e.title);var l=t.wid_canvas.getContext("2d");l.lineWidth=1,l.strokeStyle=t.xwbs,l.beginPath(),l.moveTo(n,r-4+.5),l.lineTo(n+o-1,r-4+.5),l.stroke(),l.strokeStyle=t.xwts,l.beginPath(),l.moveTo(n,r-3+.5),l.lineTo(n+o-1,r-3+.5),l.stroke();var h=e.queue[0],c=e.queue[f.n_show-1];if(0===c){for(var u=0;u<f.n_show;u++)e.queue[u]=u;h=e.queue[0],c=e.queue[f.n_show-1]}for(var d=0,p=h;p<=c;p++){var x=e.items[p],m=r+i*d;d+=1,"separator"===x.style?(l.fillStyle=t.xwbs,l.fillRect(n,m,o,i),l.beginPath(),l.moveTo(n,m+.5),l.lineTo(n+o,m+.5),l.stroke(),l.textBaseline="middle",l.textAlign="left",l.fillStyle=t.xwfg,l.fillText(" "+x.text+" ",n+2*t.text_w,m+i/2)):(a.LEGACY_RENDER?(l.fillStyle=t.xwlo,l.fillRect(n,m,o,i),l.beginPath(),l.moveTo(n,m+.5),l.lineTo(n+o,m+.5),l.stroke(),x.selected&&a.shadowbox(t,n-1,m,o+2,i,1,2,"",.75)):(l.save(),l.globalAlpha=.75,x.selected?l.fillStyle=t.xwts:l.fillStyle=t.xwlo,l.fillRect(n,m,o,i),l.restore(),l.strokeStyle=t.bg,l.beginPath(),l.moveTo(n,m+.5),l.lineTo(n+o,m+.5),l.stroke()),l.textBaseline="middle",l.textAlign="left",l.fillStyle=t.xwfg,"checkbox"===x.style?(l.fillText(" "+x.text+" ",n+2*t.text_w,m+i/2),l.strokeStyle=t.xwfg,l.strokeRect(n+1+t.text_w,m+(i-t.text_w)/2,t.text_w,t.text_w),x.checked&&(l.beginPath(),l.moveTo(n+1+t.text_w,m+(i-t.text_w)/2),l.lineTo(n+1+t.text_w+t.text_w,m+(i-t.text_w)/2+t.text_w),l.stroke(),l.beginPath(),l.moveTo(n+1+t.text_w+t.text_w,m+(i-t.text_w)/2),l.lineTo(n+1+t.text_w,m+(i-t.text_w)/2+t.text_w),l.stroke())):(l.fillText(" "+x.text+" ",n,m+i/2),x.checked&&(l.beginPath(),l.moveTo(n+1,m+t.text_h/4),l.lineTo(n+1+t.text_w-2,m+t.text_h/4+t.text_h/2),l.lineTo(n+1,m+t.text_h/4+t.text_h),l.lineTo(n+1,m+t.text_h/4),l.fill())))}})))}}function x(t,e){a.onWidgetLayer(t,(function(){a.erase_window(t)})),t.menu=void 0,t.widget=null;for(var i=0;i<e.items.length;i++){var n=e.items[i];if(n.selected){if(n.handler)n.handler();else if(n.menu){var r=n.menu;"function"==typeof n.menu&&(r=n.menu()),r.finalize=e.finalize,a.menu(t,r)}break}}!t.menu&&e.finalize&&e.finalize()}function m(t,e,i){var n=e.queue[0],o=e.queue[f.n_show-1];if(void 0===i)p(t,e);else if("mousemove"===i.type){void 0!==e.drag_x&&void 0!==e.drag_y&&Math.abs(t.xpos-e.drag_x)>2&&Math.abs(t.ypos-e.drag_y)>2&&(e.x+=t.xpos-e.drag_x,e.y+=t.ypos-e.drag_y,e.drag_x=t.xpos,e.drag_y=t.ypos);for(var s=e.x+f.GBorder+Math.max(0,f.sidelab),l=e.w-2*f.GBorder-Math.abs(f.sidelab),h=1.5*t.text_h,c=e.y+f.GBorder+f.toplab*(h+f.GBorder),u=n;u<=o;u++){var d=c+h*u;(b=e.items[u]).selected=!1,a.inrect(t.xpos,t.ypos,s,d,l,h)&&(b.selected=!0)}p(t,e)}else if("mouseup"===i.type)1===i.which?void 0!==e.drag_x&&void 0!==e.drag_y?(e.drag_x=void 0,e.drag_y=void 0):x(t,e):3===i.which&&function(t,e){a.onWidgetLayer(t,(function(){a.erase_window(t)})),t.useDomMenu&&t.menu.remove(),t.menu=void 0,t.widget=null,!t.menu&&e.finalize&&e.finalize()}(t,e);else if("mousedown"===i.type)i.preventDefault(),1===i.which?t.xpos>e.x&&t.xpos<e.x+e.w&&t.ypos>e.y&&t.ypos<e.y+1.5*t.text_h&&(e.drag_x=t.xpos,e.drag_y=t.ypos):2===i.which&&x(t,e);else if("keydown"===i.type&&t.menu){e=t.menu,i.preventDefault();var m=r.getKeyCode(i);if(13===m)x(t,e);else if(38===m){for(u=n;u<o;u++){if((b=e.items[u]).selected){b.selected=!1,void 0!==e.items[u-1]&&(e.items[u-1].selected=!0);break}u===n&&0!==n?(e.queue.pop(),e.queue.unshift(n-1),p(t,e),e.items[o-1].selected=!0):0===n&&!0===e.items[n].selected&&(p(t,e),e.items[0].selected=!0)}p(t,e)}else if(40===m){for(u=n;u<o;u++){if((b=e.items[u]).selected){b.selected=!1,void 0!==e.items[u+1]&&(e.items[u+1].selected=!0);break}if(u===o-1){var y=o+1;o+1===e.items.length&&(y=0),e.queue.shift(),e.queue.push(y),e.items[o].selected=!1,e.items[y].selected=!0,p(t,e)}}p(t,e)}else if(m>=48&&m<=57||m>=65&&m<=90){var v=String.fromCharCode(m).toUpperCase();void 0===e.keypresses?e.keypresses=v:e.keypresses=e.keypresses+v;var _=0;for(u=0;u<e.items.length;u++){var b;(b=e.items[u]).selected=!1,b.text&&0===b.text.toUpperCase().indexOf(e.keypresses)&&(0===_&&(b.selected=!0),_++)}0===_?(e.keypresses=void 0,p(t,e)):1===_?x(t,e):p(t,e)}}}function y(t,e,i){var n,r=!0;return n=e/t,t>0?n>i.tL?r=!1:n>i.tE&&(i.tE=n):t<0?n<i.tE?r=!1:n<i.tL&&(i.tL=n):e>0&&(r=!1),r}function v(t,e,i,n,o,s,a,l){if(e<0&&(e=0),i<0&&(i=0),n<0&&(n=0),o<0&&(o=0),l&&(t.lineWidth=l),a&&(t.strokeStyle=a),t.lineWidth%2==1&&(e===n&&(n=e=Math.floor(e)+.5),i===o&&(o=i=Math.floor(i)+.5)),s&&s.mode){if("dashed"===s.mode)if(r.dashOn(t,s.on,s.off))t.beginPath(),t.moveTo(e,i),t.lineTo(n,o),t.stroke(),r.dashOff(t),t.beginPath();else{if(t.beginPath(),i===o){var h=Math.min(e,n);for(n=Math.max(e,n);h<n;)t.moveTo(h,i),t.lineTo(h+s.on,i),t.stroke(),h+=s.on+s.off}else{if(e!==n)throw"Only horizontal or vertical dashed lines are supported";var c=Math.min(i,o);for(o=Math.max(i,o);c<o;)t.moveTo(e,c),t.lineTo(e,c+s.on),t.stroke(),c+=s.on+s.off}t.beginPath()}else if("xor"===s.mode)if("undefined"==typeof Uint8ClampedArray)t.beginPath(),t.moveTo(e,i),t.lineTo(n,o),t.stroke(),t.beginPath();else{var u=0,d=0;if(i===o)u=Math.abs(n-e),d=l,e=Math.min(e,n);else{if(e!==n)throw"Only horizontal and vertical lines can be drawn with XOR";u=l,d=Math.abs(o-i),i=Math.min(i,o)}if(0===u||0===d)return;e=Math.floor(e),i=Math.floor(i);for(var f=t.getImageData(e,i,u,d),p=f.data,x=0,m=p.length;x<m;x+=4)p[x]=255-p[x],p[x+1]=255-p[x+1],p[x+2]=255-p[x+2],p[x+3]=255;t.putImageData(f,e,i),t.clearRect(0,0,1,1)}}else t.beginPath(),t.moveTo(e,i),t.lineTo(n,o),t.stroke(),t.beginPath()}function _(t,e,i,n,r){b(t,e,r),i&&(t.strokeStyle=i),n&&(t.fillStyle=n),t.fill(),t.closePath()}function b(t,e,i){if(!(e.length<1)){var n=e[0].x,r=e[0].y;t.lineWidth=i||1,t.beginPath(),t.moveTo(n,r);for(var o=0;o<e.length;o++)n=e[o].x,r=e[o].y,t.lineTo(n,r)}}function g(t){return Math.floor(Math.round(t/100*255))}function w(t,e,i){return"rgb("+Math.round(t)+", "+Math.round(e)+", "+Math.round(i)+")"}function M(t,e){var i,n;if(".000000"===t.substring(5,8))i=4;else for(i=t.length-1;"0"===t[i];)i-=1;for(n=0;" "===t[n]&&(i-n+1>5||e);)n+=1;var r=t.substring(n,i+1);return-1===r.indexOf(".")&&(r+="."),r}function k(t,e,i,n,r,o,s,a){let l=t.pixel;var h=new Uint32Array(i);o||(o=i.width),s||(s=i.height),n||(n=0),r||(r=0);var c=e.width,u=e.height,d=e.getContext("2d");t.scaledImgd&&t.scaledImgd.width===c&&t.scaledImgd.height===u||(t.scaledImgd=d.createImageData(c,u));var f,p=new Uint32Array(t.scaledImgd.data.buffer),x=o/c,m=s/u,y=0,v=0,_=0,b=l.getNColors()/2;if(a&&"rgba"!==i.contents)for(w=0;w<p.length;w++){if(y=Math.floor(w%c*x)+n,v=Math.floor(w/c*m)+r,f=h[_=Math.floor(v*i.width+y)],"avg"===a){for(var g=1;g<x;g++)f+=h[_+g];f=Math.round(f/x)}else if("min"===a)for(g=1;g<x;g++)f=Math.min(f,h[_+g]);else if("max"===a)for(g=1;g<x;g++)f=Math.max(f,h[_+g]);else if("minmax"===a)for(g=1;g<x;g++)f=Math.abs(f-b)>Math.abs(h[_+g]-b)?f:h[_+g];p[w]=l.getColorByIndex(f).color}else for(var w=0;w<p.length;w++)y=Math.floor(w%c*x)+n,v=Math.floor(w/c*m)+r,f=h[_=Math.floor(v*i.width+y)],"rgba"!==i.contents?p[w]=l.getColorByIndex(f).color:p[w]=h[_];d.putImageData(t.scaledImgd,0,0)}a.menu=function(t,e){if(t.useDomMenu)new a.DomMenu(t,e);else{var i=1.5*t.text_h,n=t.canvas.height-70,r=1.5*t.text_h,o=Math.floor(n/r);if(o>=e.items.length?f.n_show=e.items.length:f.n_show=o,e){if(!t.widget){e.x=t.xpos,e.y=t.ypos,e.val=0,e.h=2*f.GBorder+i*f.n_show+f.toplab*(i+f.GBorder)-1,e.y=e.y-((f.toplab+Math.max(1,e.val)-.5)*i+(1+f.toplab)*f.GBorder)+1;for(var s=e.title.length,l=0,h=0;h<e.items.length;h++){var c=e.items[h];s=Math.max(s,c.text.length),"checkbox"===c.style&&(s+=2),"separator"===c.style&&(s+=2),c.checked&&"checkbox"!==c.style&&(l=i*h)}e.queue=[];for(var u=0;u<f.n_show;u++)e.queue.push(u);e.y=e.y-l,s+=2,s*=t.text_w,e.w=2*f.GBorder+Math.abs(f.sidelab)+s-1,e.x=e.x-e.w/2,t.menu=e,t.widget={type:"MENU",callback:function(i){m(t,e,i)}}}p(t,e)}}},a.widgetbox=function(t,e,i,n,r,o,s,l,h,c){if(a.shadowbox(t,e,i,n,r,1,2,"",.75),c){var u=c.length;u=Math.min(u,n/t.text_w);var d=e+(n-(u=Math.max(u,1))*t.text_w)/2,f=(i+=3)+(s-i+.7*t.text_h)/2;a.text(t,d,f,c,t.xwfg)}if(l>0&&h>0){var p=t.active_canvas.getContext("2d");a.LEGACY_RENDER?(p.fillStyle=t.bg,p.fillRect(o,s,l,h)):(p.save(),p.globalAlpha=.1,p.fillStyle=t.bg,p.fillRect(o,s,l,h),p.restore())}},a.text=function(t,e,i,n,r){var o=t.active_canvas.getContext("2d");if(e=Math.max(0,e),i=Math.max(0,i),e<0||i<0)throw"On No!";o.textBaseline="bottom",o.textAlign="left",o.font=t.font.font,o.fillStyle=void 0===r?t.fg:r,o.fillText(n,e,i)},a.getcolor=function(t,e,i){for(var n=0;n<6&&0===e[n+1].pos;n++);for(;i>e[n].pos&&n<6;)n++;if(0===n||i>=e[n].pos)return w(g(e[n].red),g(e[n].green),g(e[n].blue));var r=g((i-e[n-1].pos)/(e[n].pos-e[n-1].pos)*100),o=255-r;return w(r*(e[n].red/100)+o*(e[n-1].red/100),r*(e[n].green/100)+o*(e[n-1].green/100),r*(e[n].blue/100)+o*(e[n-1].blue/100))},a.redraw_warpbox=function(t){t.warpbox&&(t._animationFrameHandle&&cancelAnimFrame(t._animationFrameHandle),t._animationFrameHandle=requestAnimFrame((function(){!function(t){t._animationFrameHandle=void 0;var e=t.warpbox;if(t.active_canvas.getContext("2d"),e&&t.xpos>=e.xmin&&t.xpos<=e.xmax&&t.ypos>=e.ymin&&t.ypos<=e.ymax){a.LEGACY_BEHAVIOR?(e.xl=t.xpos,e.yl=t.ypos):(e.xl=Math.min(t.r,Math.max(t.xpos,t.l)),e.yl=Math.min(t.b,Math.max(t.ypos,t.t)));var i=Math.min(e.xo,e.xl),n=Math.min(e.yo,e.yl),r=Math.abs(e.xl-e.xo),o=Math.abs(e.yl-e.yo);if(0===r||0===o)return;"vertical"===e.mode?(i=t.l,r=t.r-t.l):"horizontal"===e.mode&&(n=t.t,o=t.b-t.t),a.onWidgetLayer(t,(function(){a.erase_window(t),a.draw_box(t,"xor",i,n,r,o,e.style.opacity,e.style.fill_color)}))}}(t)})))},a.format_g=function(t,e,i,n){e=Math.min(e,i+7);var r=Math.abs(t).toString(),o=r.indexOf(".");-1===o&&(o=(r+=".").length);var s=0,l=r.indexOf("e");-1!==l&&(s=parseInt(r.slice(l+1,r.length),10),r=r.slice(0,l));for(var h=Math.min(i-(r.length-o)+1,i),c=0;c<h;c++)r+="0";if(0!==t)if(Math.abs(t)<1)if("0."===r.slice(0,2))for(c=2;c<r.length;c++){if("0"!==r[c]){r="0."+r.slice(c,c+i);break}s-=1}else r=r.slice(0,i+2);else o>i?(s=Math.max(0,o-1),r=r[0]+"."+r.slice(1,i+1)):r=r.slice(0,i+2);if(0===s)r+="    ";else{var u=a.pad(Math.abs(s).toString(),2,"0");r=s<0?r+"E-"+u:r+"E+"+u}return t<0?"-"+r:" "+r},a.format_f=function(t,e,i){i=Math.max(Math.min(i,20),0);var n=t.toFixed(i).toString();return a.pad(n,e+i," ")},a.pad=function(t,e,i){for(;t.length<e;)t=i+t;return t},a.legacy_shadowbox=function(t,e,i,n,r,o,l,h){for(var c=h.length,u=0,d=0,f=0,p=[],x=0;x<11;x++)p[x]={x:0,y:0};var m=!(1===l||-1===l);if(o===a.L_ArrowLeft||a.L_ArrowUp,0!==l&&a.GBorder>0&&(f=s.trunc(Math.min(n,r)/3),f=Math.max(1,Math.min(f,a.GBorder))),f>0){switch(p[0].x=p[1].x=e,p[8].x=p[9].x=e+n,p[1].y=p[8].y=i,p[0].y=p[9].y=i+r,o){case a.L_ArrowLeft:p[0].y=p[1].y=i+s.trunc(r/2),e+=2,--n;break;case a.L_ArrowRight:p[8].y=p[9].y=i+s.trunc(r/2),--e,--n;break;case a.L_ArrowUp:p[1].x=p[8].x=e+s.trunc(n/2),i+=2,--r;break;case a.L_ArrowDown:p[0].x=p[9].x=e+s.trunc(n/2),--i,--r}p[2]=p[8],p[10]=p[0],e+=f,i+=f,n-=2*f,r-=2*f}switch(p[4].x=p[5].x=e,p[3].x=p[6].x=e+n,p[3].y=p[4].y=i,p[5].y=p[6].y=i+r,o){case a.L_ArrowLeft:p[4].y=p[5].y=i+s.trunc(r/2);break;case a.L_ArrowRight:p[3].y=p[6].y=i+s.trunc(r/2);break;case a.L_ArrowUp:p[3].x=p[4].x=e+s.trunc(n/2);break;case a.L_ArrowDown:p[5].x=p[6].x=e+s.trunc(n/2)}p[7]=p[3];var y=t.active_canvas.getContext("2d");f>0&&(y.fillStyle=l>0?t.xwts:t.xwbs,_(y,p.slice(0,7)),y.fillStyle=l<0?t.xwts:t.xwbs,_(y,p.slice(5,11))),m&&(y.fillStyle=t.xwbg,_(y,p.slice(3,8))),y.fillStyle=t.xwfg,y.textBaseline="alphabetic",m&&c>0&&(c=Math.min(c,s.trunc(n/t.text_w)),c=Math.max(c,1),u=e+s.trunc((n-c*t.text_w)/2),d=i+s.trunc((r+.7*t.text_h)/2),y.fillText(h,u,d))},a.sigplot_shadowbox=function(t,e,i,n,r,o,l,h,c){var u=t.active_canvas.getContext("2d"),d=h.length,f=l<0?t.xwts:t.xwbs;c=c||1;for(var p=[],x=0;x<11;x++)p[x]={x:0,y:0};switch(o){case a.L_ArrowLeft:case a.L_ArrowRight:case a.L_ArrowUp:case a.L_ArrowDown:p=a.chevron(o,e,i,n,r),u.fillStyle=l>0?t.xwts:t.xwbs,_(u,p.slice(0,6));break;default:a.draw_round_box(t,f,e,i,n,r,c,t.xwbg,5,t.xwbs)}if(u.fillStyle=t.xwfg,u.textBaseline="alphabetic",1!==l&&-1!==l&&d>0){d=Math.min(d,s.trunc(n/t.text_w)),d=Math.max(d,1);var m=e+s.trunc((n-d*t.text_w)/2),y=i+s.trunc((r+.7*t.text_h)/2);u.fillText(h,m,y)}},a.LEGACY_RENDER?a.shadowbox=a.legacy_shadowbox:a.shadowbox=a.sigplot_shadowbox,a.chevron=function(t,e,i,n,r,o){var l=Math.min(n,r);o||(o=.25*l);for(var h=[],c=0;c<6;c++)h[c]={x:0,y:0};var u=s.trunc((n-l)/2+l/4-o/2.828),d=s.trunc((r-l)/2+l/4-o/2.828);switch(t){case a.L_ArrowLeft:h[0].x=e+u,h[0].y=i+s.trunc(l/2),h[1].x=e+u+s.trunc(l/2),h[1].y=i,h[2].x=e+u+s.trunc(l/2+o/1.414),h[2].y=i+s.trunc(o/1.414),h[3].x=e+u+s.trunc(2*o/1.414),h[3].y=i+s.trunc(l/2),h[4].x=e+u+s.trunc(l/2+o/1.414),h[4].y=i+r-s.trunc(o/1.414),h[5].x=e+u+s.trunc(l/2),h[5].y=i+l;break;case a.L_ArrowRight:h[0].x=e+n-u,h[0].y=i+s.trunc(l/2),h[1].x=e+n-u-s.trunc(l/2),h[1].y=i,h[2].x=e+n-u-s.trunc(l/2+o/1.414),h[2].y=i+s.trunc(o/1.414),h[3].x=e+n-u-s.trunc(2*o/1.414),h[3].y=i+s.trunc(l/2),h[4].x=e+n-u-s.trunc(l/2+o/1.414),h[4].y=i+r-s.trunc(o/1.414),h[5].x=e+n-u-s.trunc(l/2),h[5].y=i+l;break;case a.L_ArrowUp:h[0].x=e+s.trunc(l/2),h[0].y=i+d,h[1].x=e,h[1].y=i+d+s.trunc(l/2),h[2].x=e+s.trunc(o/1.414),h[2].y=i+d+s.trunc(l/2+o/1.414),h[3].x=e+s.trunc(l/2),h[3].y=i+d+s.trunc(2*o/1.414),h[4].x=e+n-s.trunc(o/1.414),h[4].y=i+d+s.trunc(l/2+o/1.414),h[5].x=e+l,h[5].y=i+d+s.trunc(l/2);break;case a.L_ArrowDown:h[0].x=e+s.trunc(l/2),h[0].y=i+r-d,h[1].x=e,h[1].y=i+r-d-s.trunc(l/2),h[2].x=e+s.trunc(o/1.414),h[2].y=i+r-d-s.trunc(l/2+o/1.414),h[3].x=e+s.trunc(l/2),h[3].y=i+r-d-s.trunc(2*o/1.414),h[4].x=e+n-s.trunc(o/1.414),h[4].y=i+r-d-s.trunc(l/2+o/1.414),h[5].x=e+l,h[5].y=i+r-d-s.trunc(l/2)}return h},a.ifevent=function(t,e){t.button_press=0,t.button_release=0,t.state_mask=0;var i=e.target.getBoundingClientRect(),n=void 0===e.offsetX?e.pageX-i.left-window.scrollX:e.offsetX,r=void 0===e.offsetX?e.pageY-i.top-window.scrollY:e.offsetY;switch(e.type){case"mousedown":switch(t.xpos=s.bound(n,0,t.width),t.ypos=s.bound(r,0,t.height),e.which){case 1:t.button_press=1;break;case 2:t.button_press=2;break;case 3:t.button_press=3;break;case 4:t.button_press=4;break;case 5:t.button_press=5}break;case"mouseup":switch(t.xpos=s.bound(n,0,t.width),t.ypos=s.bound(r,0,t.height),e.which){case 1:t.button_release=1;break;case 2:t.button_release=2;break;case 3:t.button_release=3;break;case 4:t.button_release=4;break;case 5:t.button_release=5}}},a.scroll_real2pix=function(t){return 0===t.range?{s1:t.a1,sw:t.a2-t.a1}:(e=(t.a2-t.a1)/t.trange,n=(i=t.a1+Math.floor(.5+(t.smin-t.tmin)*e))+Math.floor(.5+t.srange*e),i=i>t.a2-t.swmin?t.a2-t.swmin:Math.max(i,t.a1),n=n<t.a1+t.swmin?t.a1+t.swmin:Math.min(n,t.a2),{s1:i,sw:Math.max(n-i,t.swmin)});var e,i,n},a.redrawScrollbar=function(t,e,i){var n,r,o,l,h,c,u,d,f,p,x=e.active_canvas.getContext("2d"),m=a.scroll_real2pix(t);if(f=m.s1,p=m.sw,u=f,d=t.s1,o=t.x,l=t.y,h=t.w,c=t.h,1&t.origin){if(r=l+c/2,2&t.origin&&(d=h-d-t.sw,u=h-u-p),i===a.XW_DRAW){var y=t.arrow;a.shadowbox(e,o,l,y,c-1,a.L_ArrowLeft,2,"",0),a.shadowbox(e,o+h-y,l,y-1,c,a.L_ArrowRight,2,"",0)}a.LEGACY_RENDER?(a.draw_line(e,e.fg,o+t.a1,r,o+t.a2,r),a.shadowbox(e,o+u,l,p+1,c,1,2,"",0)):((v=x.createLinearGradient(o+t.a1,0,o+t.a2,0)).addColorStop(0,e.xwbs),v.addColorStop(.5,e.xwts),v.addColorStop(1,e.xwbs),a.draw_line(e,v,o+t.a1,r,o+t.a2,r,1),(v=x.createLinearGradient(0,l,0,l+c)).addColorStop(.1,e.xwts),v.addColorStop(.75,e.xwbs),a.draw_round_box(e,e.xwbg,o+u,l,p+1,c,1,v,8,e.xwbs))}else{var v;n=o+s.trunc(h/2),t.origin<=2&&(d=c-d-t.sw,u=c-u-p),i===a.XW_DRAW&&(y=t.arrow,a.shadowbox(e,o,l,h-1,y,a.L_ArrowUp,2,"",0),a.shadowbox(e,o,l+c-y,h-1,y,a.L_ArrowDown,2,"",0)),a.LEGACY_RENDER?(a.draw_line(e,e.fg,n,l+t.a1,n,l+t.a2),a.shadowbox(e,o,l+u,h,p+1,1,2,"",0)):((v=x.createLinearGradient(0,l+t.a1,0,l+t.a2)).addColorStop(0,e.xwbs),v.addColorStop(.5,e.xwts),v.addColorStop(1,e.xwbs),a.draw_line(e,v,n,l+t.a1,n,l+t.a2,1),(v=x.createLinearGradient(o,0,o+h,0)).addColorStop(.1,e.xwts),v.addColorStop(.75,e.xwbs),a.draw_round_box(e,e.xwbg,o-1,l+u,h,p+1,1,v,8,e.xwbs))}t.s1=f,t.sw=p},a.real_distance_to_pixel=function(t,e,i,n,r,o){var s=a.real_to_pixel(t,e,i,o),l=a.real_to_pixel(t,n,r,o),h=l.x-s.x,c=l.y-s.y;return{x:h,y:c,d:Math.sqrt(h*h+c*c),clipped:s.clipped||l.clipped}},a.real_box_to_pixel=function(t,e,i,n,r,o){var s,l;return 1===t.origin?(s=a.real_to_pixel(t,e,i,o),l=a.real_to_pixel(t,e+n,i-r,o)):2===t.origin?(s=a.real_to_pixel(t,e,i,o),l=a.real_to_pixel(t,e-n,i-r,o)):3===t.origin?(s=a.real_to_pixel(t,e,i,o),l=a.real_to_pixel(t,e-n,i+r,o)):4===t.origin&&(s=a.real_to_pixel(t,e,i,o),l=a.real_to_pixel(t,e+n,i+r,o)),{ul:s,lr:l,w:l.x-s.x,h:l.y-s.y,clipped:s.clipped||l.clipped}},a.real_to_pixel=function(t,e,i,n){var r=a.origin(t.origin,4,t.stk[t.level]);if(0===r.xscl||0===r.yscl)return{x:0,y:0};var o=r.x1,s=r.y1,l=r.xmin,h=1/r.xscl,c=r.ymin,u=1/r.yscl,d=!1,f=!1;return null!==e&&(1===t.origin||4===t.origin?(d=e>r.xmax||e<r.xmin,n&&(e=Math.min(e,r.xmax),e=Math.max(e,r.xmin))):(d=e<r.xmax||e>r.xmin,n&&(e=Math.max(e,r.xmax),e=Math.min(e,r.xmin))),e=Math.round((e-l)*h)+o),null!==i&&(1===t.origin||2===t.origin?(f=i>r.ymin||i<r.ymax,n&&(i=Math.min(i,r.ymin),i=Math.max(i,r.ymax))):(f=i<r.ymin||i>r.ymax,n&&(i=Math.max(i,r.ymin),i=Math.min(i,r.ymax))),i=Math.round((i-c)*u)+s),{x:e=Math.round(e),y:i=Math.round(i),clipped_x:d,clipped_y:f,clipped:d||f}},a.pixel_to_real=function(t,e,i){var n=Math.min(t.r,Math.max(t.l,e)),r=Math.min(t.b,Math.max(t.t,i)),o=t.level;return{x:2!==t.origin&&3!==t.origin?t.stk[o].xmin+(n-t.stk[o].x1)*t.stk[o].xscl:t.stk[o].xmin+(t.stk[o].x2-n)*t.stk[o].xscl,y:t.origin>2?t.stk[o].ymin+(r-t.stk[o].y1)*t.stk[o].yscl:t.stk[o].ymin+(t.stk[o].y2-r)*t.stk[o].yscl}},a.colormap=function(t,e,i){t.pixel=new n(e,{ncolors:i})},a.colorbar=function(t,e,i,n,r){if(t.pixel){t.pixel.setRange(0,t.pixel.map.length);for(var o=1;o<r;o++){var l=Math.floor(t.pixel.map.length*(o-1)/r);a.draw_line(t,l,e,i+r-o,e+n,i+r-o)}a.draw_box(t,t.fg,e+.5,i,n,r)}else s.log.warn("COLORMAP not initialized, cannot draw colorbar")},a.legend_colorbar=function(t,e,i,n,r){if(t.pixel){t.pixel.setRange(0,t.pixel.map.length);for(var o=1;o<n;o++){var l=Math.floor(t.pixel.map.length*(o-1)/n);a.draw_line(t,l,e+n-o,i,e+n-o,i+r)}a.draw_box(t,t.fg,e+.5,i,n,r)}else s.log.warn("COLORMAP not initialized, cannot draw colorbar")};var S="undefined"==typeof Uint8ClampedArray?function(t,e,i,n,r,o,s,a,l,h,c,u,d,f,p){void 0===c&&(c=0),void 0===u&&(u=0),void 0===d&&(d=i.width-c),void 0===f&&(f=i.height-u),t._renderCanvas.width=i.width,t._renderCanvas.height=i.height;for(var x=t._renderCanvas.getContext("2d"),m=x.createImageData(t._renderCanvas.width,t._renderCanvas.height),y=new Uint32Array(i),v=0;v<y.length;++v){var _=4*v,b=t.pixel.getColorByIndex(y[v]);m.data[_]=b.red,m.data[_+1]=b.green,m.data[_+2]=b.blue,m.data[_+3]=255}x.putImageData(m,0,0),e.save(),e.globalAlpha=n,o||(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1),p?(e.translate(s+l/2,a+h/2),e.rotate(-Math.PI/2),e.translate(-(s+h/2),-(a+l/2)),e.drawImage(t._renderCanvas,c,u,d,f,s,a,h,l)):e.drawImage(t._renderCanvas,c,u,d,f,s,a,l,h),e.restore()}:function(t,e,i,n,r,o,s,a,l,h,c,u,d,f,p){if(void 0===c&&(c=0),void 0===u&&(u=0),void 0===d&&(d=i.width-c),void 0===f&&(f=i.height-u),i.width<32768&&i.height<32768){t._renderCanvas.width=i.width,t._renderCanvas.height=i.height;var x=t._renderCanvas.getContext("2d"),m=x.createImageData(t._renderCanvas.width,t._renderCanvas.height),y=new Uint32Array(i),v=new Uint32Array(m.data.buffer);if("rgba"!==i.contents)for(var _=0;_<y.length;_++)v[_]=t.pixel.getColorByIndex(y[_]).color;else for(_=0;_<y.length;_++)v[_]=y[_];x.putImageData(m,0,0)}else r?(t._renderCanvas.width=l,t._renderCanvas.height=h,k(t,t._renderCanvas,i,c,u,d,f,r),d=t._renderCanvas.width,f=t._renderCanvas.height):d<32767&&f<32767?(t._renderCanvas.width=d,t._renderCanvas.height=f,k(t,t._renderCanvas,i,c,u,d,f)):(t._renderCanvas.width=Math.min(2*l,i.width),t._renderCanvas.height=Math.min(2*h,i.height),k(t,t._renderCanvas,i,c,u,d,f),d=t._renderCanvas.width,f=t._renderCanvas.height),c=0,u=0;e.save(),e.globalAlpha=n,o||(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1),p?(e.translate(s+l/2,a+h/2),e.rotate(p),e.translate(-(s+h/2),-(a+l/2)),e.drawImage(t._renderCanvas,c,u,d,f,s,a,h,l)):e.drawImage(t._renderCanvas,c,u,d,f,s,a,l,h),e.restore()};a.shift_image_rows=function(t,e,i,n){var r=new Uint32Array(e);return i>0?(i*=e.width,r.set(r.subarray(0,r.length-i),i),n&&r.fill(0,0,i)):i<0&&(i=Math.abs(i)*e.width,r.set(r.subarray(i)),n&&r.fill(0,r.length-i)),e},a.update_image_row=function(t,e,i,n,r,o,s){var a=new Uint32Array(e,n*e.width*4,e.width);t.pixel.setRange(r,o);for(var l=Math.max(1,i.length/e.width),h=0;h<e.width;h++){var c=Math.floor(h*l),u=i[c];if(l>1)if(1===s){for(var d=1;d<l;d++)u+=i[c+d];u/=l}else if(2===s)for(d=1;d<l;d++)u=Math.min(u,i[c+d]);else if(3===s)for(d=1;d<l;d++)u=Math.max(u,i[c+d]);else if(4===s)u=i[h];else if(5===s)for(d=1;d<l;d++)u=Math.max(Math.abs(u),Math.abs(i[c+d]));var f=t.pixel.getColorIndex(u);a[h]=f}return a},a.update_image_col=function(t,e,i,n,r,o,s){var a=new Uint32Array(e);t.pixel.setRange(r,o);for(var l=Math.max(1,i.length/e.height),h=0;h<e.height;h++){var c=Math.floor(h*l),u=i[c];if(l>1)if(1===s){for(var d=1;d<l;d++)u+=i[c+d];u/=l}else if(2===s)for(d=1;d<l;d++)u=Math.min(u,i[c+d]);else if(3===s)for(d=1;d<l;d++)u=Math.max(u,i[c+d]);else if(4===s)u=i[h];else if(5===s)for(d=1;d<l;d++)u=Math.max(Math.abs(u),Math.abs(i[c+d]));var f=t.pixel.getColorIndex(u);a[(e.height-h)*e.width+n]=f}return a},a.create_image=function(t,e,i,r,o,a,l,h,c){if(t.active_canvas.getContext("2d"),t.pixel||(console.log("COLORMAP not initialized, defaulting to foreground"),t.pixel=new n(s.Mc.colormap[1].colors)),"horizontal"===c){let t=r;r=o,o=t}t.pixel.setRange(a,l),r=Math.ceil(r),o=Math.ceil(o);var u,d=new ArrayBuffer(r*o*4);d.width=r,d.height=o,u="horizontal"!==c?Math.max(1,i/r):Math.max(1,i/o);var f=new Uint32Array(d);if(e)for(var p=0;p<f.length;p++){var x,m,y;x=1===t.origin||4===t.origin?Math.floor(p%r):r-Math.floor(p%r)-1,m=3===t.origin||4===t.origin?Math.floor(p/r):o-Math.floor(p/r)-1;var v=e[y="horizontal"!==c?m*i+Math.floor(x*u):x*i+Math.floor(m*u)];if(u>1)if(1===h){for(var _=1;_<u;_++)v+=e[y+_];v/=u}else if(2===h)for(_=1;_<u;_++)v=Math.min(v,e[y+_]);else if(3===h)for(_=1;_<u;_++)v=Math.max(v,e[y+_]);else if(4===h)v=e[y];else if(5===h)for(_=1;_<u;_++)v=Math.max(Math.abs(v),Math.abs(e[y+_]));var b=t.pixel.getColorIndex(v);f[p]=b}return d},a.resize_image_height=function(t,e,i){if(e.height===i)return e;var n=ArrayBuffer.transfer(e,e.width*i*4);return Object.assign(n,e),n.height=i,n},a.put_image=function(t,e,i,r,o,a,l,h,c,u,d,f){var p,x,m=t.active_canvas.getContext("2d");t.pixel||(s.log.warn("COLORMAP not initialized, defaulting to foreground"),t.pixel=new n(s.Mc.colormap[1].colors)),p=o>0?i*o:-o,p=Math.floor(p),x=Math.floor(r*a);var y=new ArrayBuffer(p*x*4);y.width=p,y.height=x;for(var v=new Uint32Array(y),_=0;_<v.length;_++){var b=t.pixel.getColorIndex(e[_]);b&&(v[_]=b.color)}return S(t,m,y,u,f,d,l,h,p,x),y},a.draw_image=function(t,e,i,n,r,o,s,l,h,c,u,d){var f=Math.max(i,t.stk[t.level].xmin),p=Math.min(r,t.stk[t.level].xmax),x=Math.max(n,t.stk[t.level].ymin),m=Math.min(o,t.stk[t.level].ymax);if(!(p<f||m<x||e.width<=1||0===Math.abs(r-i)||e.height<=1||0===Math.abs(o-n))){var y,v,_,b,g,w,M,k,E,A,z=e.width/(r-i),C=e.height/(o-n);if(1===t.origin)if(c){if(!(Math.abs(c- -Math.PI/2)<1e-12))throw new RangeError(`Rotation angle ${c} rad not supported. Must be -Math.PI/2.`);z=e.height/(r-i),C=e.width/(o-n),E=(b=Math.max(0,Math.floor((x-n)*C)))/C+n,A=(b+(g=Math.min(e.width-b,Math.ceil((m-x)*C)+1)))/C+n,M=(_=Math.max(0,Math.floor((f-i)*z)))/z+i,k=(_+(w=Math.min(e.height-_,Math.ceil((p-f)*z)+1)))/z+i,y=a.real_to_pixel(t,M,A),v=a.real_to_pixel(t,k,E)}else _=Math.max(0,Math.floor((o-m)*C)),w=Math.min(e.height-_,Math.ceil((m-x)*C)+1),M=(b=Math.max(0,Math.floor((f-i)*z)))/z+i,k=(b+(g=Math.min(e.width-b,Math.ceil((p-f)*z)+1)))/z+i,E=o-(_+w)/C,A=o-_/C,y=a.real_to_pixel(t,M,A),v=a.real_to_pixel(t,k,E);else 2===t.origin?(_=Math.max(0,Math.floor((o-m)*C)),w=Math.min(e.height-_,Math.ceil((m-x)*C)+1),M=r-((b=Math.max(0,Math.floor((p-r)*z)))+(g=Math.min(e.width-b,Math.floor((p-f)*z))))/z,k=r-b/z,E=o-(_+w)/C,A=o-_/C,y=a.real_to_pixel(t,k,A),v=a.real_to_pixel(t,M,E)):3===t.origin?(_=Math.max(0,Math.floor((x-n)*C)),w=Math.min(e.height-_,Math.ceil((m-x)*C)+1),M=r-((b=Math.max(0,Math.floor((p-r)*z)))+(g=Math.min(e.width-b,Math.ceil((p-f)*z)+1)))/z,k=r-b/z,E=_/C+n,A=(_+w)/C+n,y=a.real_to_pixel(t,k,E),v=a.real_to_pixel(t,M,A)):4===t.origin&&(_=Math.max(0,Math.floor((x-n)*C)),w=Math.min(e.height-_,Math.ceil((m-x)*C)+1),M=(b=Math.max(0,Math.floor((f-i)*z)))/z+i,k=(b+(g=Math.min(e.width-b,Math.ceil((p-f)*z)+1)))/z+i,E=_/C+n,A=(_+w)/C+n,y=a.real_to_pixel(t,M,E),v=a.real_to_pixel(t,k,A));var L=v.x-y.x,T=v.y-y.y;g=Math.max(1,g),w=Math.max(1,w),"number"==typeof l&&(l=(t.r-t.l)/g<=l);var O=t.active_canvas.getContext("2d");O.save(),O.beginPath(),O.rect(t.l,t.t,t.r-t.l,t.b-t.t),O.clip(),S(t,O,e,s,h,l,y.x,y.y,L,T,b,_,g,w,c),u&&(O.strokeStyle=u,O.strokeRect(y.x,y.y,L,T)),d&&a.text(t,y.x,y.y+t.text_h,d,t.fg),O.restore()}},t.exports=a}()},function(t,e,i){(function(e,i){var n;t.exports={},window.ArrayBuffer&&(ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(t,e){var i=new Uint8Array(this);void 0===e&&(e=i.length);for(var n=new ArrayBuffer(e-t),r=new Uint8Array(n),o=0;o<r.length;o++)r[o]=i[o+t];return n}),ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return null!==t&&"object"==typeof t&&t.buffer instanceof ArrayBuffer})),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCanelAnimationFrame||function(t){window.clearTimeout(t)},t.exports.dashOn=function(t,e,i){return t.setLineDash?(t.setLineDash([e,i]),!0):void 0!==t.mozDash?(t.mozDash=[e,i],!0):!(!t.webkitLineDash||0!==t.webkitLineDash.length||(t.webkitLineDash=[e,i],0))},t.exports.dashOff=function(t){t.setLineDash?t.setLineDash([]):t.mozDash?t.mozDash=null:t.webkitLineDash&&(t.webkitLineDash=[])},t.exports.getKeyCode=function(t){return(t=window.event||t).charCode||t.keyCode},t.exports.setKeypressHandler=function(t){window.addEventListener?window.addEventListener("keypress",t,!1):window.attachEvent&&window.attachEvent("onkeypress",t)},String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return(void 0===e||e>this.length)&&(e=this.length),this.substring(e-t.length,e)===t}),Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),Int8Array.prototype.slice||Object.defineProperty(Int8Array.prototype,"slice",{value:Array.prototype.slice}),Int16Array.prototype.slice||Object.defineProperty(Int16Array.prototype,"slice",{value:Array.prototype.slice}),Int32Array.prototype.slice||Object.defineProperty(Int32Array.prototype,"slice",{value:Array.prototype.slice}),Float32Array.prototype.slice||Object.defineProperty(Float32Array.prototype,"slice",{value:Array.prototype.slice}),Float64Array.prototype.slice||Object.defineProperty(Float64Array.prototype,"slice",{value:Array.prototype.slice}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),window.Float64Array||(window.Float64Array=window.Float64Array||function(t,e,i){if(!(t instanceof ArrayBuffer))throw"Invalid type";var n=new DataView(t),r=[],o=(t.byteLength-e)/8;r.length=void 0===i?o:Math.min(i,o);for(var s=0;s<r.length;s++)r[s]=n.getFloat64(8*s+e,!0);return r.subarray=function(t,e){return r.slice(t,e)},r}),ArrayBuffer.transfer||(ArrayBuffer.transfer=function(t,e){if(!(t instanceof ArrayBuffer))throw new TypeError("Source must be an instance of ArrayBuffer");if(e<=t.byteLength)return t.slice(0,e);var i=new Uint8Array(t),n=new Uint8Array(new ArrayBuffer(e));return n.set(i),n.buffer}),function(){var t=function(){};if(window.console||(window.console={log:t,info:t,warn:t,debug:t,error:t}),new Int8Array([0,1,0]).subarray(1).subarray(1)[0]){var e=function(t,e){0===arguments.length?(t=0,e=this.length):(t<0&&(t+=this.length),t=Math.max(0,Math.min(this.length,t)),1===arguments.length?e=this.length:(e<0&&(e+=this.length),e=Math.max(t,Math.min(this.length,e))));var i=this.byteOffset+t*this.BYTES_PER_ELEMENT;return new this.constructor(this.buffer,i,e-t)};[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach((function(t){t.prototype.subarray=e}))}}(),function(t,e){var i,n,r="";function o(e,o,s,a){e[i](r+o,"wheel"===n?s:function(e){!e&&(e=t.event);var i={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===e.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"===n?(i.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(i.deltaX=-1/40*e.wheelDeltaX)):i.deltaY=e.detail,s(i)},a||!1)}t.addEventListener?i="addEventListener":(i="attachEvent",r="on"),n="onwheel"in e.createElement("div")?"wheel":void 0!==e.onmousewheel?"mousewheel":"DOMMouseScroll",t.addWheelListener=function(t,e,i){o(t,n,e,i),"DOMMouseScroll"===n&&o(t,"MozMousePixelScroll",e,i)}}(window,document),window.Proxy||(n=void 0!==e&&"[object process]"==={}.toString.call(e)||"undefined"!=typeof navigator&&"ReactNative"===navigator.product?i:self).Proxy||(n.Proxy=function(){function t(t){return!!t&&("object"==typeof t||"function"==typeof t)}var e=null,i=function(i,n){function r(){}if(!t(i)||!t(n))throw new TypeError("Cannot create proxy with a non-object as target or handler");e=function(){r=function(t){throw new TypeError("Cannot perform '"+t+"' on a proxy that has been revoked")}};var o=n;for(var s in n={get:null,set:null,apply:null,construct:null},o){if(!(s in n))throw new TypeError("Proxy polyfill does not support trap '"+s+"'");n[s]=o[s]}"function"==typeof o&&(n.apply=o.apply.bind(o));var a=this,l=!1,h=!1;"function"==typeof i?(a=function(){var t=this&&this.constructor===a,e=Array.prototype.slice.call(arguments);return r(t?"construct":"apply"),t&&n.construct?n.construct.call(this,i,e):!t&&n.apply?n.apply(i,this,e):t?(e.unshift(i),new(i.bind.apply(i,e))):i.apply(this,e)},l=!0):i instanceof Array&&(a=[],h=!0);var c=n.get?function(t){return r("get"),n.get(this,t,a)}:function(t){return r("get"),this[t]},u=n.set?function(t,e){r("set"),n.set(this,t,e,a)}:function(t,e){r("set"),this[t]=e},d={};if(Object.getOwnPropertyNames(i).forEach((function(t){if(!l&&!h||!(t in a)){var e={enumerable:!!Object.getOwnPropertyDescriptor(i,t).enumerable,get:c.bind(i,t),set:u.bind(i,t)};Object.defineProperty(a,t,e),d[t]=!0}})),o=!0,Object.setPrototypeOf?Object.setPrototypeOf(a,Object.getPrototypeOf(i)):a.__proto__?a.__proto__=i.__proto__:o=!1,n.get||!o)for(var f in i)d[f]||Object.defineProperty(a,f,{get:c.bind(i,f)});return Object.seal(i),Object.seal(a),a};return i.revocable=function(t,n){return{proxy:new i(t,n),revoke:e}},i}(),n.Proxy.revocable=n.Proxy.revocable),t.exports.update=function t(e,i){for(var n in i){var r=i[n];"object"==typeof r?t(e[n],r):e[n]=r}return e},t.exports.debounce=function(t,e,i){var n;return function(){var r=this,o=arguments,s=function(){n=null,i||t.apply(r,o)},a=i&&!n;clearTimeout(n),n=setTimeout(s,e),a&&t.apply(r,o)}},t.exports.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}}).call(this,i(19),i(8))},function(t,e,i){!function(){var e=i(13),n=i(18),r=i(5),o=i(9),s=o.bluefile,a=o.matfile,l=i(3),h=i(4),c=i(24),u=i(25),d=i(26),f=i(29),p=(i(12),i(30)),x=i(31),m=i(32),y=i(33),v=i(34);function _(t,e){if(!(this instanceof _))return new _.Plot(t,e)}_.bluefile=s,_.matfile=a,_.m=l,_.mx=h,_.Layer1D=c,_.Layer2D=u,_.version="version-PLACEHOLDER";var b={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#FFF",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"};_.browserIsCompatible=function(){var t=!!document.createElement("canvas").getContext,e="ArrayBuffer"in window;return t&&e};var g=function(t,e){if(!_.browserIsCompatible())throw"Browser is not compatible";this._Mx=h.open(t);var i,n=this._Mx;return this._Gx=new k,this._Gx.parent=t,this.mouseOnCanvas=!1,e||(e={}),function(t,e){var i=t._Mx,n=t._Gx;e.xlab||(e.xlab=0),e.ylab||(e.ylab=0),e.useDomMenu&&(i.useDomMenu=!0),e.xlab=l.unit_lookup(e.xlab),e.ylab=l.unit_lookup(e.ylab),n.xmin=void 0===e.xmin?0:e.xmin,n.xmax=void 0===e.xmax?0:e.xmax;var r,o=void 0!==e.xmin,s=void 0!==e.xmax;if("number"==typeof e.cmode)switch(e.cmode){case 1:r="MA";break;case 2:r="PH";break;case 3:r="RE";break;case 4:r="IM";break;case 5:r="IR";break;case 6:r="LO";break;case 7:r="L2";break;default:throw new RangeError("Invalid cmode value")}else r=void 0===e.cmode?"":e.cmode.toUpperCase();void 0===e.line||e.line,n.ylab=e.ylab,n.ylabel=e.ylabel,n.ymin=void 0===e.ymin?0:e.ymin,n.ymax=void 0===e.ymax?0:e.ymax;var a=void 0!==e.ymin,c=void 0!==e.ymax;n.zmin=e.zmin,n.zmax=e.zmax;var u=void 0!==e.zmin,d=void 0!==e.zmax;void 0!==e.colors&&h.setbgfg(i,e.colors.bg,e.colors.fg,i.xi),e.xi&&h.invertbgfg(i),n.forcelab=void 0===e.forcelab||e.forcelab,n.all=void 0!==e.all&&e.all,n.expand=void 0!==e.expand&&e.expand,n.xlab=e.xlab,n.xlabel=e.xlabel,n.segment=void 0!==e.segment&&e.segment,n.plab=24;var f=void 0===e.phunits?"D":e.phunits;"R"===f[0]?n.plab=23:"C"===f[0]&&(n.plab=25),n.xdiv=void 0===e.xdiv?5:e.xdiv,n.ydiv=void 0===e.ydiv?5:e.ydiv,n.xcompression=e.xcmp||0,n.rasterDownscale=e.downscale||0,n.rasterSmoothing=e.smoothing||!1,i.origin=1,e.yinv&&(i.origin=4),n.pmt=void 0===e.pmt?1:e.pmt,n.bufmax=void 0===e.bufmax?32768:e.bufmax,n.sections=void 0===e.nsec?0:e.nsec,n.anno_type=void 0===e.anno_type?0:e.anno_type,n.xfmt=void 0===e.xfmt?"":e.xfmt,n.yfmt=void 0===e.yfmt?"":e.yfmt,n.index=void 0!==e.index&&e.index;var p=n.index||"IN"===r.slice(0,2);p&&(o&&1===n.xmin&&(o=!1),s&&1===n.xmin&&(s=!1)),n.xdata=!1,n.note=e.note||"",n.hold=0,n.always_show_marker=e.always_show_marker||!1,l.vstype("D"),e.inputs||T(t,!1);var x=r;if(n.lyr.length>0&&n.lyr[0].cx?n.cmode=1:n.cmode=3,"MA"!==x&&"INMA"!==x&&"ABMA"!==x&&"__MA"!==x&&"MAGNITUDE"!==x||(n.cmode=1),"PH"!==x&&"INPH"!==x&&"ABPH"!==x&&"__PH"!==x&&"PHASE"!==x||(n.cmode=2),"RE"!==x&&"INRE"!==x&&"ABRE"!==x&&"__RE"!==x&&"REAL"!==x||(n.cmode=3),"IM"!==x&&"INIM"!==x&&"ABIM"!==x&&"__IM"!==x&&"IMAGINARY"!==x||(n.cmode=4),"LO"!==x&&"D1"!==x&&"INLO"!==x&&"IND1"!==x&&"ABIM"!==x&&"ABD1"!==x&&"__LO"!==x&&"__D1"!==x&&"10*LOG10"!==x||(n.cmode=6),"L2"!==x&&"D2"!==x&&"INL2"!==x&&"IND2"!==x&&"ABLO"!==x&&"ABD2"!==x&&"__L2"!==x&&"__D2"!==x&&"20*LOG10"!==x||(n.cmode=7),"RI"!==x&&"IR"!==x&&"INRI"!==x&&"INIR"!==x&&"ABRI"!==x&&"ABIR"!==x&&"__RI"!==x&&"__IR"!==x&&"IMAG/REAL"!==x&&"REAL/IMAG"!==x||(n.index?l.log.error("Imag/Real mode not permitted in INDEX mode"):n.cmode=5),n.basemode=n.cmode,t.change_settings({cmode:n.cmode}),n.dbmin=1e-20,n.cmode>=6){var m=10;7===n.cmode&&(m=20),"L"===x[0]||"1"===x[0]||"2"===x[0]?(n.lyr.length>0&&n.lyr[0].cx?(n.ymin=Math.max(n.ymin,1e-10),n.ymax=Math.max(n.ymax,1e-10)):(n.ymin=Math.max(n.ymin,1e-20),n.ymax=Math.max(n.ymax,1e-20)),n.ymin=l.log10(n.ymin)*m,n.ymax=l.log10(n.ymax)*m):n.lyr.length>0&&n.lyr[0].cx?(n.ymin=Math.max(-18*m,n.ymin),n.ymax=Math.max(-18*m,n.ymax),n.dbmin=1e-37):Math.min(n.ymin,n.ymax)<-20*m&&(n.ymin=Math.max(-37*m,n.ymin),n.ymax=Math.max(-37*m,n.ymax),n.dbmin=Math.pow(10,Math.min(n.ymin,n.ymax)/m))}switch(i.level=0,p&&!n.index&&(o&&(n.xmin=n.xstart+n.xdelta*(n.xmin-1)),o&&(n.xmax=n.xstart+n.xdelta*(n.xmax-1))),n.xmult=e.xmult,n.ymult=e.xmult,e.autox){case"none":e.autox=-1;break;case"min":e.autox=1;break;case"max":e.autox=2;break;case"full":e.autox=3}switch(n.autox=void 0===e.autox?-1:e.autox,n.autox<0&&(n.autox=0,o||(n.autox+=1),s||(n.autox+=2)),e.autoy){case"none":e.autoy=-1;break;case"min":e.autoy=1;break;case"max":e.autoy=2;break;case"full":e.autoy=3}switch(n.autoy=void 0===e.autoy?-1:e.autoy,n.autoy<0&&(n.autoy=0,a||(n.autoy+=1),c||(n.autoy+=2)),e.autoz){case"none":e.autoz=-1;break;case"min":e.autoz=1;break;case"max":e.autoz=2;break;case"full":e.autoz=3}n.autoz=void 0===e.autoz?-1:e.autoz,n.autoz<0&&(n.autoz=0,u||(n.autoz+=1),d||(n.autoz+=2)),n.autol=void 0===e.autol?-1:e.autol,o||(n.xmin=void 0),s||(n.xmax=void 0),V(t,0,n.xmin,n.xmax,n.xlab,n.ylab),o||(n.xmin=i.stk[0].xmin),s||(n.xmax=i.stk[0].xmax),a||(n.ymin=i.stk[0].ymin),c||(n.ymax=i.stk[0].ymax),n.xmin>n.xmax&&(i.stk[0].xmin=n.xmax,n.xmax=n.xmin,n.xmin=i.stk[0].xmin),n.ymin>n.ymax&&(i.stk[0].ymin=n.ymax,n.ymax=n.ymin,n.ymin=i.stk[0].ymin),i.stk[0].xmin=n.xmin,i.stk[0].xmax=n.xmax,i.stk[0].ymin=n.ymin,i.stk[0].ymax=n.ymax,n.panxmin=Math.min(n.panxmin,n.xmin),n.panxmax=Math.max(n.panxmax,n.xmax),n.panymin=Math.min(n.panymin,n.ymin),n.panymax=Math.max(n.panymax,n.ymax),n.panxpad=e.panxpad,n.panypad=e.panypad;var y=n.panxmax-n.panxmin,v=n.panymax-n.panymin;n.panxmin-=l.pad(y,n.panxpad),n.panxmax+=l.pad(y,n.panxpad),n.panymin-=l.pad(v,n.panypad),n.panymax+=l.pad(v,n.panypad),n.xmin=i.stk[0].xmin,n.ymin=i.stk[0].ymin,e.font_family&&(i.font_family=e.font_family),e.font_width&&(i.font_width=e.font_width),e.font_scaled&&(i.font_scaled=!0);var _=i.font_width;i.font_scaled&&(_=Math.min(i.font_width,i.width/64)),h.set_font(i,_),n.ncolors=void 0===e.ncolors?500:e.ncolors,n.cmap=null,void 0!==e.cmap?n.cmap=e.cmap:n.cmap=void 0===e.xc?-1:e.xc,S(t,n.cmap),"leftmouse"===e.xcnt?n.cntrls=1:"continuous"===e.xcnt?n.cntrls=2:n.cntrls=void 0===e.xcnt?1:e.xcnt,n.default_rubberbox_mode=void 0===e.rubberbox_mode?"box":e.rubberbox_mode,n.default_rubberbox_action=void 0===e.rubberbox_action?"zoom":e.rubberbox_action,n.default_rightclick_rubberbox_mode=void 0===e.rightclick_rubberbox_mode?"box":e.rightclick_rubberbox_mode,n.default_rightclick_rubberbox_action=void 0===e.rightclick_rubberbox_action?null:e.rightclick_rubberbox_action,n.cross=void 0!==e.cross&&e.cross,n.grid=void 0===e.nogrid||!e.nogrid,n.fillStyle=e.fillStyle,n.gridBackground=e.gridBackground,n.gridStyle=e.gridStyle,n.wheelZoom=e.wheelZoom,n.wheelZoomPercent=e.wheelZoomPercent,n.legend=void 0!==e.legend&&e.legend,n.no_legend_button=void 0!==e.no_legend_button&&e.no_legend_button,n.legendBtnLocation=null,n.pan=void 0===e.nopan||!e.nopan,n.nomenu=void 0!==e.nomenu&&e.nomenu,n.modmode=0,n.modlayer=-1,n.modsource=0,n.modified=e.mod&&n.lyr.length>0,n.nmark=0,n.iabsc=0,n.index&&(n.iabsc=1),n.specs=!e.nospecs,n.scroll_time_interval=void 0===e.scroll_time_interval?n.scroll_time_interval:e.scroll_time_interval,n.autohide_readout=e.autohide_readout,n.autohide_panbars=e.autohide_panbars,n.x_scrollbar_location=e.x_scrollbar_location,n.specs?(n.show_x_axis=!e.noxaxis,n.show_y_axis=!e.noyaxis,n.show_readout=!e.noreadout,n.show_x_axis||n.show_y_axis||n.show_readout?n.specs=!0:n.specs=!1):(n.show_x_axis=!1,n.show_y_axis=!1,n.show_readout=!1),n.hide_note=e.hide_note||!1,n.xmrk=0,n.ymrk=0,e.nodragdrop||(h.addEventListener(i,"dragover",(function(t){t.preventDefault()}),!1),h.addEventListener(i,"drop",function(t){return function(e){var i=e.dataTransfer.files;i.length>0&&(e.preventDefault(),t.load_files(i))}}(t),!1)),n.initialized=!0}(this,e),this.mimicListeners={other:null,listeners:{zoom:null,unzoom:null,xpan:null,ypan:null}},this._refresh(),this.onmousemove=(i=this,function(t){var e,n=i._Mx,r=i._Gx,o=t.target.getBoundingClientRect(),s=void 0===t.offsetX?t.pageX-o.left-window.scrollX:t.offsetX,a=void 0===t.offsetX?t.pageY-o.top-window.scrollY:t.offsetY,l=K(i,s,a);r.retx=l.x,r.rety=l.y,n.widget||(X(i),(e=document.createEvent("Event")).initEvent("mmove",!0,!0),e.originalEvent=t,e.xpos=s,e.ypos=a,e.x=r.retx,e.y=r.rety,h.dispatchEvent(n,e)&&(r.cross&&(n.warpbox?(void 0!==r.cross_xpos&&h.rubberline(n,r.cross_xpos,n.t,r.cross_xpos,n.b),void 0!==r.cross_ypos&&h.rubberline(n,n.l,r.cross_ypos,n.r,r.cross_ypos),r.cross_xpos=void 0,r.cross_ypos=void 0):i.mouseOnCanvas&&(U(i),r.p_cuts&&1===r.lyr.length&&2===r.lyr[0].hcb.class&&(r.y_cut_press_on||r.x_cut_press_on||B(i)))),2===r.cntrls&&((e=document.createEvent("Event")).initEvent("mtag",!0,!0),e.originalEvent=t,e.x=r.retx,e.y=r.rety,e.xpos=s,e.ypos=a,h.dispatchEvent(n,e))))}),this.throttledOnMouseMove=l.throttle(this._Gx.scroll_time_interval,this.onmousemove),h.addEventListener(n,"mousemove",this.throttledOnMouseMove,!1),this.onmouseout=function(t){return function(e){var i=t._Gx,n=t._Mx;t.mouseOnCanvas&&(t.mouseOnCanvas=!1,i.autohide_readout&&X(t),i.autohide_panbars&&W(t),n.prompt&&n.prompt.input.enableBlur())}}(this),h.addEventListener(n,"mouseout",this.onmouseout,!1),this.onmouseover=function(t){return function(e){var i=t._Gx,n=t._Mx;t.mouseOnCanvas=!0,i.autohide_panbars&&W(t),n.prompt&&n.prompt.input.disableBlur()}}(this),h.addEventListener(n,"mouseover",this.onmouseover,!1),this.onmousedown=function(t){return function(e){e.preventDefault();var i=t._Mx,n=t._Gx;if(i.widget&&"ONESHOT"===i.widget.type&&(i.widget=null,t.refresh()),n.mouseClickActive=!0,h.ifevent(i,e),(G=document.createEvent("Event")).initEvent("mdown",!0,!0),G.originalEvent=e,G.xpos=i.xpos,G.ypos=i.ypos,G.x=n.retx,G.y=n.rety,G.which=e.which,!h.dispatchEvent(i,G))return!1;var r,o,s,a,c,u,d=J(t);if(d.inPanRegion){if(e.preventDefault()," "!==d.command){var f=null,p=null;if("XPAN"===d.command?f=i.scrollbar_x:"YPAN"===d.command&&(f=i.scrollbar_y),2===e.which)p={x:i.xpos,y:i.ypos},void 0!==f&&Z(p,f)&&function(t,e){var i=t._Mx;h.removeEventListener(i,"mousedown",t.onmousedown,!1),h.menu(i,{title:"SCROLLBAR",refresh:function(){t.refresh()},finalize:function(){h.addEventListener(i,"mousedown",t.onmousedown,!1),t.refresh()},items:[{text:"Expand Range",handler:function(){Q(t,h.SB_EXPAND,e)}},{text:"Shrink Range",handler:function(){Q(t,h.SB_SHRINK,e)}},{text:"Expand Full",handler:function(){Q(t,h.SB_FULL,e)}}]})}(t,d.command);else if(" "!==d.command&&!Z(p={x:i.xpos,y:i.ypos},f)&&1===e.which){F(t,d.command,0,e);var x=function(){Z({x:i.xpos,y:i.ypos},f)?n.stillPanning&&(window.clearInterval(n.stillPanning),n.repeatPanning=void 0):F(t,d.command,0,e)};n.stillPanning=window.setTimeout((function(){n.repeatPanning=window.setInterval(x,50)}),250)}}}else if(1===e.which||3===e.which){var m=!1;if(n.legendBtnLocation&&(r=i.xpos,o=i.ypos,s=n.legendBtnLocation.x,a=n.legendBtnLocation.y,c=n.legendBtnLocation.width,u=n.legendBtnLocation.height,m=r>=s&&r<=s+c&&o>=a&&o<=a+u),n.legend)for(var y=P(t),v=y.height/n.lyr.length,_=0;_<n.lyr.length;_++){if(y.x<=i.xpos&&y.x+y.width>=i.xpos&&y.y<=i.ypos&&y.y+v>=i.ypos)return i.mouseUpLatch=!0,C(t,_),!1;y.y+=v}if(n.lg_colorbar&&2===n.lyr[0].hcb.class&&(1===e.which||3===e.which)){var b=i.xpos,g=i.ypos,w=n.cbb_top_x1,M=n.cbb_top_y1;if($(b,g,w,M,w+n.cbb_width,M,w+.5*n.cbb_width,M-n.cbb_height)){var k=n.cmap;t.get_layer(0).img=void 0;var S=l.Mc.colormap[k];for(_=0;_<S.colors.length;_++)S.colors[_].pos+=5;h.colormap(i,S.colors,16),t.refresh()}var E=n.cbb_bot_x1,A=n.cbb_bot_y1;if($(b,g,E,A,E+n.cbb_width,A,E+.5*n.cbb_width,A+n.cbb_height)){for(k=n.cmap,S=l.Mc.colormap[k],t.get_layer(0).img=void 0,_=0;_<S.colors.length;_++)S.colors[_].pos-=5;h.colormap(i,S.colors,16),t.refresh()}}if(m)t.change_settings({legend:!n.legend});else{X(t);var T={opacity:0,return_value:"zoom"},O={opacity:.4,fill_color:i.hi,return_value:"select"};1===e.which?"zoom"===n.default_rubberbox_action?h.rubberbox(i,L(t,e.which),n.default_rubberbox_mode,T,O):"select"===n.default_rubberbox_action&&h.rubberbox(i,L(t,e.which),n.default_rubberbox_mode,O,T):3===e.which&&("zoom"===n.default_rightclick_rubberbox_action?h.rubberbox(i,L(t,e.which),n.default_rightclick_rubberbox_mode,T,O):"select"===n.default_rightclick_rubberbox_action&&h.rubberbox(i,L(t,e.which),n.default_rightclick_rubberbox_mode,O,T))}}else if(2===e.which){var G;n.nomenu||((G=document.createEvent("Event")).initEvent("showmenu",!0,!0),G.originalEvent=e,G.x=i.x,G.y=i.y,h.dispatchEvent(i,G)&&z(t))}return!1}}(this),h.addEventListener(n,"mousedown",this.onmousedown,!1),this.ontouchstart=function(t){return function(e){if(e.preventDefault(),1===e.targetTouches.length)if(n.touchClear&&n.touches)window.clearTimeout(n.touchClear),t.unzoom(),Q(t,h.SB_FULL,"XPAN"),Q(t,h.SB_FULL,"YPAN");else{var i=e.targetTouches[0],r=i.target.getBoundingClientRect(),o={x:i.pageX-r.left-window.scrollX,y:i.pageY-r.top-window.scrollY};n.xpos=l.bound(o.x,0,n.width),n.ypos=l.bound(o.y,0,n.height),J(t,o).inPanRegion||(n.touches=e.targetTouches)}else 2===e.targetTouches.length&&(n.touch_distance=l.touch_distance(e.targetTouches[0],e.targetTouches[1]))}}(this),h.addEventListener(n,"touchstart",this.ontouchstart,!1),this.ontouchmove=function(t){return function(e){var i=t._Mx,n=t._Gx,r=i.level;if(e.preventDefault(),1===e.targetTouches.length){var o=i.touches[0],s=o.target.getBoundingClientRect(),a=(o.pageX,s.left,window.scrollX,o.pageY,s.top,window.scrollY,e.targetTouches[0]),h=(s=a.target.getBoundingClientRect(),{x:a.pageX-s.left-window.scrollX,y:a.pageY-s.top-window.scrollY}),c=l.bound(h.x,0,i.width),u=l.bound(h.y,0,i.height),d=c-i.xpos,f=u-i.ypos;if(i.xpos=c,i.ypos=u,J(t,h).inPanRegion)return;var p=i.stk[r].xscl*d,x=i.stk[r].yscl*f;1===i.origin?p*=-1:2===i.origin||3===i.origin?x*=-1:4===i.origin&&(p*=-1,x*=-1);var m=i.stk[r].xmin+p,y=i.stk[r].xmax+p,v=i.stk[r].ymin+x,_=i.stk[r].ymax+x;m>=n.xmin&&y<=n.xmax&&(i.stk[r].xmin=m,i.stk[r].xmax=y),v>=n.ymin&&_<=n.ymax&&(i.stk[r].ymin=v,i.stk[r].ymax=_),n.cmode===n.basemode&&1===i.level&&(n.xmin=Math.min(n.xmin,m),n.xmax=Math.max(n.xmax,y),n.ymin=Math.min(n.ymin,v),n.ymax=Math.max(n.ymax,_)),t.refresh()}else if(2===e.targetTouches.length){var b=l.touch_distance(e.targetTouches[0],e.targetTouches[1]),g=.05*(1-i.touch_distance/b),w=i.stk[r].xmax-i.stk[r].xmin,M=i.stk[r].ymax-i.stk[r].ymin;m=i.stk[r].xmin+g*w,y=i.stk[r].xmax-g*w,v=i.stk[r].ymin+g*M,_=i.stk[r].ymax-g*M,i.stk[r].xmin=Math.max(n.xmin,m),i.stk[r].xmax=Math.min(n.xmax,y),i.stk[r].ymin=Math.max(n.ymin,v),i.stk[r].ymax=Math.min(n.ymax,_),t.refresh()}}}(this),this.throttledOnTouchMove=l.throttle(this._Gx.scroll_time_interval,this.ontouchmove),h.addEventListener(n,"touchmove",this.throttledOnTouchMove,!1),this.ontouchend=function(t){return function(e){var i=t._Gx,n=t._Mx;e.preventDefault(),console.log("on touch end ",e.targetTouches.length),i.panning=void 0,t._Mx.scrollbar_x.action=0,t._Mx.scrollbar_y.action=0,n.touch_distance=void 0,h.widget_callback(n,e),n.touchClear=window.setTimeout((function(){n.touches=void 0,n.touchClear=void 0}),100)}}(this),h.addEventListener(n,"touchend",this.ontouchend,!1),this.docMouseUp=function(t){return function(e){var i=t._Gx;if(1===e.which&&(i.panning=void 0,t._Mx.scrollbar_x.action=0,t._Mx.scrollbar_y.action=0),i.stillPanning&&(window.clearTimeout(i.stillPanning),i.stillPanning=void 0),i.repeatPanning&&(window.clearInterval(i.repeatPanning),i.repeatPanning=void 0),h.ifevent(t._Mx,e),!1===n.mouseOver&&i.mouseClickActive){var r=document.createEvent("Event");r.initEvent("mup",!0,!0),r.originalEvent=e,r.xpos=n.xpos,r.ypos=n.ypos,r.x=i.retx,r.y=i.rety,r.which=e.which,h.dispatchEvent(n,r)}return i.mouseClickActive=!1,!1}}(this),document.addEventListener("mouseup",this.docMouseUp,!1),this.mouseup=function(t){return function(e){e.preventDefault();var i=t._Gx,n=t._Mx;if(h.ifevent(t._Mx,e),(a=document.createEvent("Event")).initEvent("mup",!0,!0),a.originalEvent=e,a.xpos=n.xpos,a.ypos=n.ypos,a.x=i.retx,a.y=i.rety,a.which=e.which,h.dispatchEvent(n,a)){if(n.warpbox||n.widget||n.prompt)return;if(1===e.which){var r=function(t){var e=!1,i=t._Mx,n=i.xpos,r=i.ypos,o=i.text_h,s=i.text_w,a=" ";return n<i.l-s&&r<=i.b&&r>=i.t?(a="YCENTER",e=!0):r>i.b+l.trunc(.5*s)&&r<=i.b+l.trunc(l.trunc(3*o)/2)&&n>=i.l&&n<=i.r&&(a="XCENTER",e=!0),{inCenterRegion:e,command:a}}(t);if(r.inCenterRegion)" "!==r.command&&F(t,r.command,0,e);else if(1===i.cntrls){i.xmrk=i.retx,i.ymrk=i.rety;var o=document.createEvent("Event");if(o.initEvent("mtag",!0,!0),o.originalEvent=e,o.x=i.xmrk,o.y=i.ymrk,o.xpos=e.x||e.clientX,o.ypos=e.y||e.clientY,o.w=void 0,o.h=void 0,o.shift=e.shiftKey,h.dispatchEvent(n,o)){var s=document.createEvent("Event");s.initEvent("mclick",!0,!0),s.originalEvent=e,s.xpos=o.xpos,s.ypos=o.ypos,s.x=o.x,s.y=o.y,s.which=1,h.dispatchEvent(n,s)}t.redraw()}}else if(2===e.which){var a;if(i.nomenu&&((a=document.createEvent("Event")).initEvent("showmenu",!0,!0),a.originalEvent=e,a.x=e.x||e.clientX,a.y=e.y||e.clientY,h.dispatchEvent(n,a))){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,h.removeEventListener(n,"mousedown",t.onmousedown,!1);var c=function(){try{var e=document.createEvent("Event");e.initEvent("hidemenu",!0,!0),h.dispatchEvent(n,e)&&h.addEventListener(n,"mousedown",t.onmousedown,!1)}finally{document.removeEventListener("mouseup",c,!1)}};document.addEventListener("mouseup",c,!1)}}else 3===e.which&&(e.preventDefault(),t.unzoom(1),t.refresh())}}}(this),h.addEventListener(n,"mouseup",this.mouseup,!1),this.mouseclick=function(t){return function(e){return e.preventDefault(),t._Gx,t._Mx,h.ifevent(t._Mx,e),!1}}(this),h.addEventListener(n,"click",this.mouseclick,!1),this.mousedblclick=function(t){return function(e){e.preventDefault();var i=t._Gx,n=t._Mx;h.ifevent(t._Mx,e);var r=document.createEvent("Event");return r.initEvent("mdblclick",!0,!0),r.originalEvent=e,r.xpos=n.xpos,r.ypos=n.ypos,r.x=i.retx,r.y=i.rety,r.which=e.which,h.dispatchEvent(n,r),!1}}(this),h.addEventListener(n,"dblclick",this.mousedblclick,!1),this.dragMouseDownHandler=function(t){return function(e){var i=t._Mx,n=t._Gx,r=J(t);if(r.inPanRegion&&(e.preventDefault()," "!==r.command)){var o;"XPAN"===r.command?o=i.scrollbar_x:"YPAN"===r.command&&(o=i.scrollbar_y);var s={x:i.xpos,y:i.ypos};void 0!==o&&Z(s,o)&&1===e.which&&(n.panning={axis:r.command,xpos:e.screenX,ypos:e.screenY,xmin:i.stk[i.level].xmin,xmax:i.stk[i.level].xmax,ymin:i.stk[i.level].ymin,ymax:i.stk[i.level].ymax})}}}(this),window.addEventListener("mousedown",this.dragMouseDownHandler,!1),this.dragMouseMoveHandler=function(t){return function(e){var i=t._Gx;if(void 0!==i.panning)try{!function(t,e,i){var n,r,o,s=t._Mx,a=t._Gx;if("XPAN"===e)o=t._Mx.scrollbar_x;else{if("YPAN"!==e)throw"Unable to drag scrollbar - scrollAction is not 'XPAN' or 'YPAN'!!";o=t._Mx.scrollbar_y}o.flag=-12;var l=s.level;"XPAN"===e?(n=s.stk[l].xmin,r=s.stk[l].xmax):"YPAN"===e?(n=s.stk[l].ymin,r=s.stk[l].ymax):(n=void 0,r=void 0);var c={min:n,max:r};(function(t,e,i,n,r,o){if(i.action=h.SB_DRAG,"YPAN"===n){var s=t.scrollbar_y.trange/t.scrollbar_y.h;4===i.origin&&(s*=-1);var a=(o.screenY-e.panning.ypos)*s;e.panning.ymin-a<e.panymin?(r.max=e.panymin+(r.max-r.min),r.min=e.panymin):e.panning.ymax-a>e.panymax?(r.min=e.panymax-(r.max-r.min),r.max=e.panymax):(r.min=e.panning.ymin-a,r.max=e.panning.ymax-a)}else"XPAN"===n&&(s=t.scrollbar_x.trange/t.scrollbar_x.w,3===i.origin&&(s*=-1),a=(o.screenX-e.panning.xpos)*s,e.panning.xmin+a<e.panxmin?(r.max=e.panxmin+(r.max-r.min),r.min=e.panxmin):e.panning.xmax+a>e.panxmax?(r.min=e.panxmax-(r.max-r.min),r.max=e.panxmax):(r.min=e.panning.xmin+a,r.max=e.panning.xmax+a))})(s,a,o,e,c,i),n=c.min,r=c.max,o.smin=n,o.srange=r-n,h.redrawScrollbar(o,s,void 0),tt(t,o.smin,o.smin+o.srange,e.slice(0,1)),t.inPan=!0;var u=document.createEvent("Event");"XPAN"===e?u.initEvent("xpan",!0,!0):"YPAN"===e&&u.initEvent("ypan",!0,!0),u.level=s.level,u.xmin=s.stk[s.level].xmin,u.ymin=s.stk[s.level].ymin,u.xmax=s.stk[s.level].xmax,u.ymax=s.stk[s.level].ymax,h.dispatchEvent(s,u),t.inPan=!1,o.action=0,t.refresh()}(t,i.panning.axis,e)}catch(t){console.log("Error: "+t)}}}(this),this.throttledDragOnMouseMove=l.throttle(this._Gx.scroll_time_interval,this.dragMouseMoveHandler),window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1),this.dragMouseUpHandler=function(t){return function(e){var i=t._Gx;1===e.which&&(i.panning=void 0)}}(this),window.addEventListener("mouseup",this.dragMouseUpHandler,!1),this.onresize=function(t){return function(e){h.checkresize(t._Mx)&&t.refresh()}}(this),this.wheelHandler=function(t){var e=t._Mx,i=t._Gx,n=l.throttle(100,(function(n){var r;"XPAN"===n.command?r=e.scrollbar_x:"YPAN"===n.command&&(r=e.scrollbar_y),i.wheelscroll_mode_natural?r.action=event.deltaY<0?h.SB_WHEELDOWN:h.SB_WHEELUP:r.action=event.deltaY<0?h.SB_WHEELUP:h.SB_WHEELDOWN,r.step=.1*r.srange,r.page=9*r.step,h.scroll(e,r,h.XW_COMMAND,void 0,r),tt(t,r.smin,r.smin+r.srange,n.command.slice(0,1))})),r=l.throttle(100,(function(){var e=i.wheelZoomPercent||.2;i.wheelscroll_mode_natural?event.deltaY>0&&(e*=-1):event.deltaY<0&&(e*=-1),"x"===i.wheelZoom?t.percent_zoom(e,1,!0):"y"===i.wheelZoom?t.percent_zoom(1,e,!0):t.percent_zoom(e,e,!0)}));return function(o){h.ifevent(e,o);var s=J(t);t.mouseOnCanvas&&(o.preventDefault(),s.inPanRegion?n(s):i.wheelZoom&&r())}}(this),window.addWheelListener(window,this.wheelHandler,!1),window.addEventListener("resize",this.onresize,!1),e.nokeypress||(this.onkeypress=function(t){return function(e){var i=t._Mx,n=t._Gx;if(t.mouseOnCanvas){if(i.widget&&"MENU"===i.widget.type)return;if(i.widget&&"ONESHOT"===i.widget.type)return i.widget=null,void t.refresh();var o=r.getKeyCode(e);if((a=document.createEvent("Event")).initEvent("plotkeypress",!0,!0),a.originalEvent=e,a.keyCode=o,a.shiftKey=e.shiftKey,a.ctrlKey=e.ctrlKey,a.altKey=e.altKey,a.metaKey=e.metaKey,!h.dispatchEvent(i,a))return;if(97===o)n.iabsc=(n.iabsc+1)%4,X(t);else if(108===o)t.change_settings({legend:!n.legend});else if(103===o)t.change_settings({grid:!n.grid});else if(98===o||2===o)i.warpbox&&("box"===i.warpbox.mode?i.warpbox.mode="horizontal":"horizontal"===i.warpbox.mode?i.warpbox.mode="vertical":i.warpbox.mode="box",h.redraw_warpbox(i));else if(99===o)t.change_settings({xcnt:-1*n.cntrls});else if(114===o)t.change_settings({show_readout:!n.show_readout});else if(115===o)t.change_settings({specs:!n.specs});else if(112===o)t.change_settings({p_cuts:!n.p_cuts});else if(120===o){if(n.x_cut_press_on){for(var s=0;s<n.lyr.length;s++)if(n.lyr[s].xCut){n.lyr[s].xCut();break}}else if("pop-up"===n.xyKeys)n.x_pop_now?n.x_pop_now=!1:(E(t),n.x_pop_now=!0);else if(1===n.lyr[0].hcb.class&&"automatic"===n.xyKeys)n.x_pop_now?n.x_pop_now=!1:(E(t),n.x_pop_now=!0);else if("disable"!==n.xyKeys&&2===n.lyr[0].hcb.class&&!n.y_cut_press_on)for(s=0;s<n.lyr.length;s++)if(n.lyr[s].xCut){n.lyr[s].xCut(K(t,0,i.ypos).y);break}}else if(121===o){if(n.y_cut_press_on){for(s=0;s<n.lyr.length;s++)if(n.lyr[s].yCut){n.lyr[s].yCut();break}}else if("pop-up"===n.xyKeys)n.y_pop_now?n.y_pop_now=!1:(A(t),n.y_pop_now=!0);else if(1===n.lyr[0].hcb.class&&"automatic"===n.xyKeys)n.y_pop_now?n.y_pop_now=!1:(A(t),n.y_pop_now=!0);else if("disable"!==n.xyKeys&&2===n.lyr[0].hcb.class&&!n.x_cut_press_on)for(s=0;s<n.lyr.length;s++)if(n.lyr[s].yCut){n.lyr[s].yCut(K(t,i.xpos,0).x);break}}else if(122===o)!function(t){var e=t._Gx,i=t._Mx;if(void 0!==e.zmin&&void 0!==e.zmax){var n;if(1===e.lyr.length){var r=e.lyr[0].get_z(e.retx,e.rety);void 0!==r&&(n="Z = "+r.toString())}else n=null;n&&h.message(i,n)}}(t);else if(116===o)!function(t){var e=t._Gx,i=t._Mx;if(e.lyr.length>0){var n=e.lyr[0].hcb;n&&(1!==n.class||1!==n.xunits&&4!==n.xunits?2!==n.class||1!==n.yunits&&4!==n.yunits?h.message(i,"Time = UNK"):h.message(i,"Time = "+l.sec2tod(n.timecode+e.rety),!0):h.message(i,"Time = "+l.sec2tod(n.timecode+e.retx),!0))}}(t);else if(109===o){var a;n.nomenu||((a=document.createEvent("Event")).initEvent("showmenu",!0,!0),a.originalEvent=e,a.x=i.x,a.y=i.y,h.dispatchEvent(i,a)&&z(t))}else 63===o?h.message(i,"To zoom, press and drag the left mouse (LM) over the region of interest and release. To unzoom, press right mouse (RM).  Press the middle mouse (MM) button or press the 'M' key to open the main menu.View the function of all keypresses by selecting 'Keypress Info' from the main menu."):102===o?(h.fullscreen(i),t.refresh()):9===o&&e.ctrlKey?t.change_settings({invert:null}):107===o&&(n.show_marker=!n.show_marker,t.redraw())}}}(this),r.setKeypressHandler(this.onkeypress)),this};g.prototype={add_plugin:function(t,e){if(void 0===e&&(e=Number.MAX_VALUE),e<=0)throw"Invalid plugin zorder";var i=document.createElement("canvas");i.width=this._Mx.canvas.width,i.height=this._Mx.canvas.height,t.init(this,i),this._Gx.plugins.push({impl:t,zorder:e,canvas:i}),this._Gx.plugins.sort((function(t,e){return t.zorder-e.zorder})),this.refresh()},remove_plugin:function(t){for(var e=this._Gx.plugins.length;e--;)this._Gx.plugins[e].impl===t&&(t.dispose&&t.dispose(),this._Gx.plugins[e].canvas.parentNode&&this._Gx.plugins[e].canvas.parentNode.removeElement(this._Gx.plugins[e].canvas),this._Gx.plugins.splice(e,1));this._Gx.plugins.sort((function(t,e){return t.zorder-e.zorder})),this.refresh()},addListener:function(t,e){var i=this._Mx;h.addEventListener(i,t,e,!1)},removeListener:function(t,e){var i=this._Mx;h.removeEventListener(i,t,e,!1)},change_settings:function(t){for(var e,i=this._Gx,n=this._Mx,r=0;r<i.lyr.length;r++)i.lyr[r].change_settings(t);void 0!==t.xyKeys&&(null===t.xyKeys?i.xyKeys="automatic":i.xyKeys=t.xyKeys),void 0!==t.grid&&(null===t.grid?i.grid=!i.grid:i.grid=t.grid),void 0!==t.gridBackground&&(i.gridBackground=t.gridBackground),void 0!==t.gridStyle&&(i.gridStyle=t.gridStyle),void 0!==t.wheelZoom&&(i.wheelZoom=t.wheelZoom),void 0!==t.wheelZoomPercent&&(i.wheelZoomPercent=t.wheelZoomPercent),void 0!==t.autol&&(i.autol=t.autol),void 0!==t.index&&t.index!==i.index&&(null===t.index?i.index=!i.index:i.index=t.index,i.index&&1!==i.iabsc?i.iabsc=1:i.index||1!==i.iabsc||(i.iabsc=0),V(this,0,void 0,void 0),this.unzoom()),void 0!==t.all&&(null===t.all?i.all=!i.all:i.all=t.all),void 0!==t.show_x_axis&&(null===t.show_x_axis?i.show_x_axis=!i.show_x_axis:i.show_x_axis=t.show_x_axis,i.specs=i.show_x_axis||i.show_y_axis||i.show_readout),void 0!==t.show_y_axis&&(null===t.show_y_axis?i.show_y_axis=!i.show_y_axis:i.show_y_axis=t.show_y_axis,i.specs=i.show_x_axis||i.show_y_axis||i.show_readout),void 0!==t.show_readout&&(null===t.show_readout?i.show_readout=!i.show_readout:i.show_readout=t.show_readout,i.specs=i.show_x_axis||i.show_y_axis||i.show_readout),void 0!==t.specs&&(null===t.specs?i.specs=!i.specs:i.specs=t.specs,i.specs?(i.show_x_axis=!0,i.show_y_axis=!0,i.show_readout=!0):(i.show_x_axis=!1,i.show_y_axis=!1,i.show_readout=!1)),void 0!==t.xcnt&&("leftmouse"===t.xcnt?i.cntrls=1:"continuous"===t.xcnt?i.cntrls=2:"disable"===t.xcnt&&i.cntrls>0||"enable"===t.xcnt&&i.cntrls<0?i.cntrls=-1*i.cntrls:i.cntrls=t.xcnt),void 0!==t.legend&&(null===t.legend?i.legend=!i.legend:i.legend=t.legend),void 0!==t.pan&&(null===t.pan?i.pan=!i.pan:i.pan=t.pan),void 0!==t.cross&&(null===t.cross?i.cross=!i.cross:i.cross=t.cross,i.cross?(i.cross_xpos=void 0,i.cross_ypos=void 0,!n.warpbox&&this.mouseOnCanvas&&U(this)):(void 0!==i.cross_xpos&&h.rubberline(n,i.cross_xpos,n.t,i.cross_xpos,n.b),void 0!==i.cross_ypos&&h.rubberline(n,n.l,i.cross_ypos,n.r,i.cross_ypos),i.cross_xpos=void 0,i.cross_ypos=void 0));var o=void 0===t.cmode?"":t.cmode;e="string"==typeof o?(o+="").toUpperCase():o,void 0!==t.cmode&&("MA"!==e&&"INMA"!==e&&"ABMA"!==e&&"__MA"!==e&&"MAGNITUDE"!==e&&1!==e||(e=1),"PH"!==e&&"INPH"!==e&&"ABPH"!==e&&"__PH"!==e&&"PHASE"!==e&&2!==e||(e=2),"RE"!==e&&"INRE"!==e&&"ABRE"!==e&&"__RE"!==e&&"REAL"!==e&&3!==e||(e=3),"IM"!==e&&"INIM"!==e&&"ABIM"!==e&&"__IM"!==e&&"IMAGINARY"!==e&&4!==e||(e=4),"LO"!==e&&"D1"!==e&&"INLO"!==e&&"IND1"!==e&&"ABIM"!==e&&"ABD1"!==e&&"__LO"!==e&&"__D1"!==e&&"10*LOG10"!==e&&6!==e||(e=6),"L2"!==e&&"D2"!==e&&"INL2"!==e&&"IND2"!==e&&"ABLO"!==e&&"ABD2"!==e&&"__L2"!==e&&"__D2"!==e&&"20*LOG10"!==e&&7!==e||(e=7),"RI"!==e&&"IR"!==e&&"INRI"!==e&&"INIR"!==e&&"ABRI"!==e&&"ABIR"!==e&&"__RI"!==e&&"__IR"!==e&&"IMAG/REAL"!==e&&"REAL/IMAG"!==e&&5!==e||(i.index?l.log.error("Imag/Real mode not permitted in INDEX mode"):e=5),H(this,e)),void 0!==t.phunits&&function(t,e){var i=t._Gx,n=t._Mx,r=i.plab;if("R"===e?r=23:"D"===e&&(r=24),"C"===e&&(r=25),r!==i.plab){var o=[Math.PI,180,.5],s=o[r-23]/o[i.plab-23];if(i.plab=r,2===i.cmode){for(var a=0;a<=n.level;a++)n.stk[a].ymin=n.stk[a].ymin*s,n.stk[a].ymax=n.stk[a].ymax*s,n.stk[a].yscl=n.stk[a].yscl*s;i.panymin=i.panymin*s,i.panymax=i.panymax*s,t.refresh()}}}(this,t.phunits),void 0!==t.rubberbox_action&&(i.default_rubberbox_action=t.rubberbox_action),void 0!==t.rubberbox_mode&&(i.default_rubberbox_mode=t.rubberbox_mode),void 0!==t.rightclick_rubberbox_action&&(i.default_rightclick_rubberbox_action=t.rightclick_rubberbox_action),void 0!==t.rightclick_rubberbox_mode&&(i.default_rightclick_rubberbox_mode=t.rightclick_rubberbox_mode),void 0!==t.wheelscroll_mode_natural&&(i.wheelscroll_mode_natural=t.wheelscroll_mode_natural),void 0!==t.colors&&(t.colors.fg||(t.colors.fg=n.fg),t.colors.bg||(t.colors.bg=n.bg),h.setbgfg(n,t.colors.bg,t.colors.fg,n.xi)),void 0!==t.cmap&&(null===t.cmap?2===i.cmode?i.cmap=2:i.cmap=1:i.cmap=t.cmap,S(this,i.cmap)),void 0!==t.yinv&&(t.yinv?n.origin=4:n.origin=1),void 0!==t.rasterSmoothing&&(null===t.rasterSmoothing?i.rasterSmoothing=!i.rasterSmoothing:i.rasterSmoothing=t.rasterSmoothing),void 0!==t.fillStyle&&(i.fillStyle=t.fillStyle),void 0!==t.invert&&(null===t.invert?h.invertbgfg(n):!0===t.invert?h.setbgfg(this,"white","black"):h.setbgfg(this,"black","white")),void 0!==t.nomenu&&(null===t.nomenu?i.nomenu=!i.nomenu:i.nomenu=t.nomenu),void 0!==t.ymax&&(null===t.ymax?(i.autoy=2|i.autoy,i.panymax=void 0,V(this),i.ymax=i.panymax):(i.autoy=13&i.autoy,i.ymax=t.ymax,tt(this,n.stk[0].ymin,t.ymax,"Y"),this.redraw())),void 0!==t.ymin&&(null===t.ymin?(i.autoy=1|i.autoy,i.panymin=void 0,V(this),i.ymin=i.panymin):(i.autoy=14&i.autoy,i.ymin=t.ymin,tt(this,t.ymin,n.stk[0].ymax,"Y"),this.redraw())),void 0!==t.autoy&&(i.autoy=t.autoy,0!=(1&i.autoy)&&(i.ymin=void 0),0!=(2&i.autoy)&&(i.ymax=void 0)),void 0!==t.xmin&&(tt(this,t.xmin,n.stk[0].xmax,"X"),i.autox=2&i.autox,this.redraw()),void 0!==t.xmax&&(tt(this,n.stk[0].xmin,t.xmax,"X"),i.autox=1&i.autox,this.redraw()),void 0!==t.zmin&&(i.zmin=t.zmin,i.autoz=2&i.autoz),void 0!==t.zmax&&(i.zmax=t.zmax,i.autoz=1&i.autoz),void 0!==t.autoz&&(i.autoz=t.autoz,0!=(1&i.autoz)&&(i.zmin=void 0),0!=(2&i.autoz)&&(i.zmax=void 0)),void 0!==t.note&&(i.note=t.note),void 0!==t.lg_colorbar&&(i.lg_colorbar=!i.lg_colorbar),void 0!==t.p_cuts&&(null===t.p_cuts?i.p_cuts=!i.p_cuts:i.p_cuts=t.p_cuts),void 0!==t.xcut_now&&(i.xcut_now=!i.xcut_now),void 0!==t.ycut_now&&(i.ycut_now=!i.ycut_now),this.refresh(),void 0!==t.pan&&X(this)},reread:function(){for(var t=this._Gx,i=[],n=0;n<t.lyr.length;n++)i[n]=t.lyr[n];var r=t.HCB.slice(),o=e.clone(t.HCB_UUID);this.deoverlay();for(var s=0;s<r.length;s++)this.overlay_bluefile(o[r[s]]);for(var a=0;a<t.lyr.length;a++)t.lyr[a].symbol=i[a].symbol,t.lyr[a].radius=i[a].radius;this.refresh();var l=document.createEvent("Event");l.initEvent("reread",!0,!0),h.dispatchEvent(this._Mx,l)},cleanup:function(){},reload:function(t,i,n,r){var o=this._Mx,s=this._Gx,a=-1;if(e.has(s.HCB_UUID,t)&&(a=this.get_lyrn(t)),a<0||a>=s.lyr.length){if("number"==typeof t)throw"reload requires use the layer uuid returned by overlay and no longer supports layer indexes"}else if(void 0!==s.lyr[a].reload){var l=s.lyr[a].reload(i,n);0===o.level&&V(this,0,l.xmin,l.xmax),r?this._refresh():this.refresh()}},rescale:function(){0===this._Mx.level&&V(this,0,void 0,void 0),this.refresh()},headermod:function(t,e){this.change_settings(e),this.push(t,[],e)},push:function(t,i,n,r,o){var s=this._Mx,a=this._Gx,l=-1;if(e.has(a.HCB_UUID,t)&&(l=this.get_lyrn(t)),l<0||l>=a.lyr.length){if("number"==typeof t)throw"push requires use the layer uuid returned by overlay and no longer supports layer indexes"}else if(void 0!==a.lyr[l].push&&!1!==a.lyr[l].display){var h=n;n&&(h=JSON.parse(JSON.stringify(n)),0===i.length&&(h.xmin=s.stk[0].xmin,h.xmax=s.stk[0].xmax,h.ymin=s.stk[0].ymin,h.ymax=s.stk[0].ymax));var c=a.lyr[l].push(i,h,r);0===s.level&&c&&V(this),o?this._refresh():this.refresh()}},overlay_array:function(t,e,i){l.log.debug("Overlay array");var n=l.initialize(t,e);return this.overlay_bluefile(n,i)},overlay_pipe:function(t,e){l.log.debug("Overlay pipe"),t||(t={}),t.pipe=!0;var i=l.initialize(null,t);return this.overlay_bluefile(i,e)},overlay_websocket:function(t,e,i){l.log.debug("Overlay websocket: "+t);var n=new WebSocket(t,"plot-data");n.binaryType="arraybuffer";var r=this;e||(e={}),e.pipe=!0;var o=l.initialize(null,e,()=>n.close());o.ws=n;var s=this.overlay_bluefile(o,i);return n.onopen=function(t){},n.onmessage=function(t){if(t.data instanceof ArrayBuffer){var e=o.createArray(t.data);r.push(s,e)}else if("string"==typeof t.data){r._Gx.lyr[s].hcb||l.log.warning("Couldn't find header for layer "+s);var i=JSON.parse(t.data);r.push(s,[],i)}},s},overlay_wpipe:function(t,e,i,n){let r=this,o={hcb:null,layer_n:null,plotLayerOptions:null,ws:null};return o.ws=new WebSocket(t,"pipe-data"),o.ws.binaryType="arraybuffer",l.log.debug("Overlay websocket: "+t),o.ws.onopen=function(t){o.ws.send(JSON.stringify({event:"open",payload:{set_buffer:{fps:n}}}))},o.ws.onmessage=(o.ws,function(t){if("string"==typeof t.data){var n=JSON.parse(t.data);if("version"===n.event)l.log.debug("server: "+n.payload.server+"\nxm-ver: "+n.payload["xm-ver"]);else if("header"===n.event)o.hcb=n.payload,o.hcb.ws=o.ws,o.hcb.ystart=0,o.hcb.class=Math.floor(o.hcb.type/1e3);else if("out_buffer"===n.event){null!==o.layer_n&&(r.remove_layer(o.layer_n),o.layer_n=null);var s={framesize:n.payload.framesize,cmode:n.payload.mode,xcmp:n.payload.xcmp,ycmp:n.payload.ycmp,fps:n.payload.fps};o.plotLayerOptions=null!=i?Object.assign(s,i):s,null!=e&&(o.hcb=Object.assign(o.hcb,e)),o.hcb.pipe=!0;try{o.hcb=l.initialize(null,o.hcb,()=>o.ws.close()),o.layer_n=r.overlay_bluefile(o.hcb,o.plotLayerOptions)}catch(t){o.ws.close()}}else if("error"===n.event)l.log.error(n);else{if("eof"===n.event)return void o.ws.close();"abscissa_update"===n.event?o.plotLayerOptions.layerType===c?o.hcb.xstart+=n.payload.skip_count*o.hcb.xdelta:o.plotLayerOptions.layerType===u&&(o.hcb.ystart+=n.payload.skip_count*o.hcb.ydelta):(l.log.error('Received unexpected pipe-data event "'+n.event+'"'),o.ws.close())}}else if(o.plotLayerOptions.layerType===c){var a=o.hcb.createArray(t.data);r.push(o.layer_n,a)}else if(o.plotLayerOptions.layerType===u)for(var h=t.data.byteLength/o.hcb.bpe,d=0;d<h;++d){var f=d*o.hcb.bpe,p=o.hcb.subsize*o.hcb.spa,x=o.hcb.createArray(t.data,f,p);r.push(o.layer_n,x)}}),o.layer_n},overlay_href:function(t,e,i,n){var r=this,o=[];return t.split("|").forEach((function(t){var s=r.overlay_href_single(t.trim(),e,i,n);o.push(s)})),0===o.length?null:1===o.length?o[0]:o},overlay_href_single:function(t,e,i,n){var o=this.reg_hcb(null);l.log.debug("Overlay href: "+t+" "+o);try{this.show_spinner();var h,c,u=function(e,s){return function(a){try{var h;a?(a._uuid=o,r.update(a,n),h=t.endsWith(".mat")?e.overlay_matfile(a,i):e.overlay_bluefile(a,i),s&&s(a,h)):l.log.error("Failed to load data: "+t)}finally{e.hide_spinner()}}}(this,e),d=function(e,s){return function(a,h){try{var c=null;a?(a._uuid=o,r.update(a,n),"SDS"===h?1e3===a.file_type?i.layerType="1DSDS":i.layerType="2DSDS":i.layerType=h,c=e.overlay_bluefile(a,i),s&&s(a,c)):l.log.error("Failed to load data: "+t)}finally{e.hide_spinner()}}}(this,e);if(t.endsWith(".mat")?(h=new a.MatFileReader,c=h.read_http(t,u)):!i||"2DSDS"!==i.layerType&&"1DSDS"!==i.layerType&&"SDS"!==i.layerType?(h=new s.BlueFileReader,c=h.read_http(t,u)):((c=new XMLHttpRequest).open("GET",t,!0),c.responseType="",c.onload=function(e){var n=JSON.parse(c.responseText);n&&(n.url=t),d(n,i.layerType)},c.onerror=function(t){},c.send(null)),c){const t=this.get_layer_n(o);this._Gx.HCB[t].cleanup=()=>c.abort()}}catch(t){this.hide_spinner()}return o},show_spinner:function(){this._Gx.spinner||(b.color=this._Mx.xwfg,this._Gx.spinner=new n(b).spin(this._Gx.parent))},hide_spinner:function(t){var i=0;e.mapObject(this._Gx.HCB_UCB,(t,e)=>{null===e&&(i+=1)}),(0===i||t)&&(this._Gx.spinner&&this._Gx.spinner.stop(),this._Gx.spinner=void 0)},reg_hcb:function(t){var e=r.uuidv4();return this._Gx.HCB_UUID[e]=t,e},get_lyrn:function(t){return e.indexOf(this._Gx.HCB,t)},get_lyr_uuid:function(t){return this._Gx.HCB[t]},get_hcb_by_uuid:function(t){return this._Gx.HCB[t]},get_hcb_by_lyrn:function(t){return this.get_hcb_by_uuid(this.get_lyr_uuid(t))},add_layer:function(t){var e=this._Gx,i=this._Mx,n=document.createEvent("Event");return n.initEvent("lyradd",!0,!0),n.name=t.name,n.layer=t,!!h.dispatchEvent(i,n)&&(e.lyr.push(t),t.index=e.lyr.length-1,!0)},get_layer:function(t){var i=this._Gx;return e.has(i.HCB_UUID,t)&&(t=this.get_lyrn(t)),t>=0&&t<i.lyr.length?i.lyr[t]:null},overlay_matfile:function(t,e){return l.log.debug("Overlay matfile: "+t.file_name),this.overlay_array(t.dview)},overlay_bluefile:function(t,i){l.log.debug("Overlay bluefile: "+t.file_name);var n=this._Mx,r=this._Gx;i=i||{};var o=0===r.HCB.length,s=t._uuid;if(s){if(!e.has(r.HCB_UUID,s))return;r.HCB_UUID[s]=t}else s=this.reg_hcb(t);this._Gx.HCB.push(s),1===r.HCB.length&&T(this,!0);var a=null;if(void 0===i.layerType?1===t.class?a=c.overlay(this,t,i):2===t.class&&(a=u.overlay(this,t,i)):a="1D"===i.layerType?c.overlay(this,t,i):"2D"===i.layerType?u.overlay(this,t,i):"1DSDS"===i.layerType?d.overlay(this,t,i):"2DSDS"===i.layerType?f.overlay(this,t,i):i.layerType.overlay(this,t,i),null!==a&&0!==a.length){if(i.user_data&&a.forEach((function(t){t.user_data=i.user_data})),H(this,r.cmode),o||i.expand){var h,p;0===e.size(r.HCB_UUID)?T(this,!1):(r.basemode=r.cmode,0==(1&r.autox)&&(h=r.xmin),0==(2&r.autox)&&(p=r.xmax),V(this,0,h,p),n.level=0,0!=(1&r.autox)&&(r.xmin=n.stk[0].xmin),0!=(2&r.autox)&&(r.xmax=n.stk[0].xmax),0!=(1&r.autoy)&&(r.ymin=n.stk[0].ymin),0!=(2&r.autoy)&&(r.ymax=n.stk[0].ymax),n.resize=!0,r.lyr[0].preferred_origin?n.origin=r.lyr[0].preferred_origin:n.origin=1)}else{var x=this;a.forEach((function(t){D(x,t)}))}return G(this),this.refresh(),s}l.log.debug("failed to create layers")},load_files:function(t,e){for(var i,n=(i=this,function(t){i.overlay_bluefile(t,e)}),r=0;r<t.length;r++){var o=t[r];(new s.BlueFileReader).read(o,n)}},deoverlay:function(t){var i=this._Gx;if(this._Mx,e.has(i.HCB_UUID,t))this.remove_layer(t);else if(i.HCB.length>0)if(void 0===t)for(var n=i.HCB.length-1;n>=0;n--)this.remove_layer(this.get_lyr_uuid(n));else if(t<0){if((n=i.HCB.length+t)<0)return;this.remove_layer(this.get_lyr_uuid(n))}else t<i.HCB.length&&this.remove_layer(this.get_lyr_uuid(t));0===e.size(i.HCB_UUID)&&(T(this,!1),V(this))},remove_layer:function(t){var i=this._Gx,n=i.HCB_UUID[t];delete i.HCB_UUID[t],n&&e.isFunction(n.cleanup)&&n.cleanup();var r="";n&&(r=n.file_name);var o=this.get_lyrn(t);if(o>=0&&o<i.HCB.length){i.HCB[o]=null;for(var s=o;s<i.HCB.length-1;s++)i.HCB[s]=i.HCB[s+1];i.HCB.length-=1}if(n&&o>=0)for(s=i.lyr.length-1;s>=0;s--)i.lyr[s].hcb===n&&N(this,s);G(this),this.refresh();var a=document.createEvent("Event");a.initEvent("file_deoverlayed",!0,!0),""!==r&&(a.fileName=r),h.dispatchEvent(this._Mx,a)},pixel_zoom:function(t,e,i,n,r){var o=K(this,t,e),s=K(this,i,n);this.zoom(o,s,r)},percent_zoom:function(t,e,i){var n=this._Mx,r=this._Gx,o=0;Math.abs(t)<1&&(o=(o=Math.abs(n.stk[n.level].xmax-n.stk[n.level].xmin))*t/2);var s=0;Math.abs(e)<1&&(s=(s=Math.abs(n.stk[n.level].ymax-n.stk[n.level].ymin))*e/2);var a={x:Math.max(n.stk[n.level].xmin+o,r.panxmin),y:Math.max(n.stk[n.level].ymin+s,r.panymin)},l={x:Math.min(n.stk[n.level].xmax-o,r.panxmax),y:Math.min(n.stk[n.level].ymax-s,r.panymax)};this.zoom(a,l,i)},zoom:function(t,e,i){var n=this._Mx,r=this._Gx;if(!(n.level>=9)){if(void 0===t.x&&(t.x=n.stk[n.level].xmin),void 0===t.y&&(t.y=n.stk[n.level].ymin),void 0===e.x&&(e.x=n.stk[n.level].xmax),void 0===e.y&&(e.y=n.stk[n.level].ymax),e.x<t.x){var o=e.x;e.x=t.x,t.x=o}if(e.y<t.y){var s=e.y;e.y=t.y,t.y=s}var a={};a.xscl=n.stk[n.level].xscl,a.yscl=n.stk[n.level].yscl,a.xmin=t.x,a.xmax=e.x,a.ymin=t.y,a.ymax=e.y,r.index&&(a.xmin=Math.min(a.xmin/r.xdelta),a.xmax=Math.min(a.xmax/r.xdelta)),i&&r.inContinuousZoom?n.stk[n.level]=a:(n.stk.push(a),n.level=n.stk.length-1),r.inContinuousZoom=i,this.inZoom=!0;var l=document.createEvent("Event");l.initEvent("zoom",!0,!0),l.level=n.level,l.inContinuousZoom=r.inContinuousZoom,l.xmin=n.stk[n.level].xmin,l.ymin=n.stk[n.level].ymin,l.xmax=n.stk[n.level].xmax,l.ymax=n.stk[n.level].ymax,h.dispatchEvent(n,l),this.inZoom=!1,this.refresh()}},unzoom:function(t){var e=this._Mx,i=this._Gx;if(0!==e.level){for(t||(t=e.stk.length);t>0&&0!==e.level;)e.stk.pop(),e.level=e.stk.length-1,t-=1;0===e.level&&this.rescale(),i.inContinuousZoom=!1,this.inZoom=!0;var n=document.createEvent("Event");n.initEvent("unzoom",!0,!0),n.level=e.level,n.xmin=e.stk[e.level].xmin,n.ymin=e.stk[e.level].ymin,n.xmax=e.stk[e.level].xmax,n.ymax=e.stk[e.level].ymax,h.dispatchEvent(e,n),this.inZoom=!1,this.refresh()}},expand_full:function(t,e){t&&(tt(this,this._Gx.panxmin,this._Gx.panxmax,"X"),this._refresh()),e&&tt(this,this._Gx.panymin,this._Gx.panymax,"Y"),this.refresh()},set_view:function({xmin:t,xmax:e,ymin:i,ymax:n}){var r=this._Mx,o=(this._Gx,r.level);void 0!==t&&(r.stk[o].xmin=t),void 0!==e&&(r.stk[o].xmax=e),void 0!==i&&(r.stk[o].ymin=i),void 0!==n&&(r.stk[o].ymax=n),this.refresh()},get_view:function(){var t=this._Mx,e=(this._Gx,t.level);return{xmin:t.stk[e].xmin,xmax:t.stk[e].xmax,ymin:t.stk[e].ymin,ymax:t.stk[e].ymax}},mimic:function(t,e){var i=this;if(!e)throw"mimic must be called with at least one event mask";if(this.unmimic(t),e.zoom){var n=function(t){i.inZoom||i.zoom({x:t.xmin,y:t.ymin},{x:t.xmax,y:t.ymax},t.inContinuousZoom)};t.addListener("zoom",n),this.mimicListeners.listeners.zoom=n}else e.xzoom?(n=function(t){i.inZoom||i.zoom({x:t.xmin,y:void 0},{x:t.xmax,y:void 0},t.inContinuousZoom)},t.addListener("zoom",n),this.mimicListeners.listeners.zoom=n):e.yzoom&&(n=function(t){i.inZoom||i.zoom({x:void 0,y:t.ymin},{x:void 0,y:t.ymax},t.inContinuousZoom)},t.addListener("zoom",n),this.mimicListeners.listeners.zoom=n);e.unzoom&&(n=function(t){i.inZoom||t.level<i._Mx.level&&i.unzoom(i._Mx.level-t.level)},t.addListener("unzoom",n),this.mimicListeners.listeners.unzoom=n),(e.pan||e.xpan)&&(n=function(t){i.inPan||tt(i,t.xmin,t.xmax,"X")},t.addListener("xpan",n),this.mimicListeners.listeners.xpan=n),(e.pan||e.ypan)&&(n=function(t){i.inPan||tt(i,t.ymin,t.ymax,"Y")},t.addListener("ypan",n),this.mimicListeners.listeners.ypan=n),this.mimicListeners.other=t},unmimic:function(t){if(t=this.mimicListeners.other){var e=this;Object.keys(this.mimicListeners.listeners).forEach((function(i){e.mimicListeners.listeners[i]&&t.removeListener(i,e.mimicListeners.listeners[i])}))}this.mimicListeners={other:null,listeners:{zoom:null,unzoom:null,xpan:null,ypan:null}}},redraw:function(){var t=this._Gx,e=this._Mx,i=e.canvas.getContext("2d");t.plotData.valid?(i.drawImage(t.plotData,e.l-1,e.t-1,e.r-e.l+2,e.b-e.t+2,e.l-1,e.t-1,e.r-e.l+2,e.b-e.t+2),O(this),t.cross_xpos=void 0,t.cross_ypos=void 0,!e.warpbox&&this.mouseOnCanvas&&U(this),(t.always_show_marker||t.show_marker)&&j(this)):this.refresh()},refresh:function(){if(this._Gx.initialized&&!(this._Gx.refresh_after_ctr>0)){var t=this;h.render(this._Mx,(function(){t._refresh()}))}},refresh_after:function(t){this._Gx.refresh_after_ctr+=1;try{t(this)}finally{this._Gx.refresh_after_ctr=Math.max(this._Gx.refresh_after_ctr-1,0),0===this._Gx.refresh_after_ctr&&this.refresh()}},enable_listeners:function(){var t=this._Mx;h.addEventListener(t,"mousedown",this.onmousedown,!1),h.addEventListener(t,"mousemove",this.throttledOnMouseMove,!1),window.addEventListener("mouseup",t.onmouseup,!1),window.addEventListener("keydown",t.onkeydown,!1),window.addEventListener("keyup",t.onkeyup,!1),window.addEventListener("resize",this.onresize,!1),document.addEventListener("mouseup",this.docMouseUp,!1),h.addEventListener(t,"mouseup",this.mouseup,!1),window.addEventListener("mousedown",this.dragMouseDownHandler,!1),window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1),window.addEventListener("mouseup",this.dragMouseUpHandler,!1),window.addEventListener("wheel",this.wheelHandler,!1),window.addEventListener("mousewheel",this.wheelHandler,!1),window.addEventListener("DOMMouseScroll",this.wheelHandler,!1),window.addEventListener("keypress",this.onkeypress,!1)},disable_listeners:function(){var t=this._Mx;h.removeEventListener(t,"mousedown",this.onmousedown,!1),h.removeEventListener(t,"mousemove",this.throttledOnMouseMove,!1),h.removeEventListener(t,"mouseup",this.mouseup,!1),window.removeEventListener("mouseup",t.onmouseup,!1),window.removeEventListener("keydown",t.onkeydown,!1),window.removeEventListener("keyup",t.onkeyup,!1),window.removeEventListener("resize",this.onresize,!1),document.removeEventListener("mouseup",this.docMouseUp,!1),window.removeEventListener("mousedown",this.dragMouseDownHandler,!1),window.removeEventListener("mousemove",this.throttledDragOnMouseMove,!1),window.removeEventListener("mouseup",this.dragMouseUpHandler,!1),window.removeEventListener("wheel",this.wheelHandler,!1),window.removeEventListener("mousewheel",this.wheelHandler,!1),window.removeEventListener("DOMMouseScroll",this.wheelHandler,!1),window.removeEventListener("keypress",this.onkeypress,!1)},checkresize:function(){h.checkresize(this._Mx)&&this.refresh()},addColorMaps:function(t){t.forEach((function(t){t.hasOwnProperty("name")&&l.Mc.colormap.push(t)}))},_refresh:function(){var t=this._Mx,e=this._Gx;if(t.canvas.getContext("2d"),!e.hold){var i=t.font_width;if(t.font_scaled&&(i=Math.min(t.font_width,t.width/64)),h.set_font(t,i),e.pthk=1.5*t.text_w,e.specs){var n=!1;4===e.ylab&&(n=!0),!0===e.show_y_axis?(t.l=6*t.text_w,n&&(Math.abs(t.stk[0].ymin)>=31536e3||Math.abs(t.stk[0].ymax)>=31536e3)&&(t.l=11*t.text_w)):t.l=1,!0===e.pan?t.r=t.width-(e.pthk+2*t.text_w):t.r=t.width-5,e.show_readout?(t.t=2*t.text_h,e.show_x_axis?t.b=t.height-4*t.text_h:t.b=t.height-3*t.text_h):"bottom"===e.x_scrollbar_location?(t.t=2*t.text_h,e.pan?e.show_x_axis?t.b=t.height-3*t.text_h:t.b=t.height-2*t.text_h:e.show_x_axis?t.b=t.height-2*t.text_h:t.b=t.height-5):(e.pan?t.t=e.pthk+2*t.text_w:t.t=1,e.show_x_axis?t.b=t.height-3*t.text_h/2:t.b=t.height-2),e.show_readout?e.pl=50*t.text_w:"bottom"===e.x_scrollbar_location?e.pl=t.l:e.pl=35*t.text_w,e.pr=Math.max(e.pl+9*t.text_w,t.r),e.show_readout||"bottom"===e.x_scrollbar_location?e.show_x_axis?e.pt=t.b+t.text_h+(t.height-t.b-t.text_h-e.pthk)/2:e.pt=t.b+(t.height-t.b-e.pthk)/2:e.pt=(t.t-e.pthk)/2,e.lbtn=t.text_h+t.text_w+2}else e.pan?(t.t=e.pthk+2*t.text_w,t.r=t.width-(e.pthk+t.text_w)):(t.t=1,t.r=t.width-2),t.b=t.height-2,t.l=1,e.pl=t.l,e.pr=t.r,e.pt=(t.t-e.pthk)/2,e.lbtn=0;if(e.pyl=t.r+(t.width-t.r-e.pthk)/2+1,e.lg_colorbar&&2===e.lyr[0].hcb.class){var r=t.r;t.r=r-100}if(e.p_cuts&&1===e.lyr.length&&2===e.lyr[0].hcb.class){e.cross=!0,r=t.r,t.r=r-100;var o=t.b;t.b=o-100}e.xcut_now&&(t.canvas.width=e.x_box_w-1,t.canvas.height=e.x_box_h,t.r=e.x_box_w-1,t.l=0,t.b=e.x_box_h,t.t=0),e.ycut_now&&(t.canvas.width=e.y_box_h-1,t.canvas.height=e.y_box_w,t.r=e.y_box_h-1,t.l=0,t.b=e.y_box_w,t.t=0),void 0!==e.panymin&&void 0!==e.panymax||V(this),t.l=Math.floor(t.l),t.r=Math.ceil(t.r),t.t=Math.floor(t.t),t.b=Math.ceil(t.b);var s=t.level;t.stk[s].x1=t.l,t.stk[s].y1=t.t,t.stk[s].x2=t.r,t.stk[s].y2=t.b,t.stk[s].xscl=(t.stk[s].xmax-t.stk[s].xmin)/(t.r-t.l),t.stk[s].yscl=(t.stk[s].ymax-t.stk[s].ymin)/(t.b-t.t);var a=K(this,t.xpos,t.ypos);e.retx=a.x,e.rety=a.y,0!==e.panning&&0===e.panning||(e.plotData.valid=!1,h.clear_window(t));var d=e.xlab,f=e.ylab;if(void 0===d&&(d=30),e.index&&(d=0),void 0===f){var p=e.lyr.length>0&&e.lyr[0].cx;1===e.cmode?f=28:2===e.cmode?f=e.plab:3===e.cmode&&p?f=21:4===e.cmode?f=22:5===e.cmode?(f=22,d=21):f=6===e.cmode?26:7===e.cmode?27:0}if(e.specs){if(0===e.sections){var x={grid:e.grid};2===e.panning&&(x.noxtlab=!0),e.show_x_axis||(x.noxtics=!0,x.noxtlab=!0,x.noxplab=!0),e.show_y_axis||(x.noytics=!0,x.noytlab=!0,x.noyplab=!0),!e.specs||e.show_readout||e.pan||(x.noyplab=!0,x.noxplab=!0),e.gridBackground&&(x.fillStyle=e.gridBackground),e.gridStyle&&(x.gridStyle=e.gridStyle),e.xmult&&(x.xmult=e.xmult),e.ymult&&(x.ymult=e.ymult),4===d&&(x.xtimecode=!0),4===f&&(x.ytimecode=!0),void 0!==e.xlabel&&(x.xlabel=e.xlabel),void 0!==e.ylabel&&(x.ylabel=e.ylabel),h.drawaxis(e,t,e.xdiv,e.ydiv,d,f,x)}var m=e.lbtn-2;e.show_readout?(e.no_legend_button||(e.legend?(e.legendBtnLocation={x:t.width-e.lbtn,y:2,width:m,height:m},h.shadowbox(t,t.width-e.lbtn,2,m,m,1,-2,"L")):(e.legendBtnLocation={x:t.width-e.lbtn,y:2,width:m,height:m},h.shadowbox(t,t.width-e.lbtn,2,m,m,1,2,"L"))),X(this)):e.legendBtnLocation=null}else e.grid&&e.sections>=0&&(x={grid:!0,noaxisbox:!0,noxtics:!0,noxtlab:!0,noxplab:!0,noytics:!0,noytlab:!0,noyplab:!0},h.drawaxis(e,t,e.xdiv,e.ydiv,d,f,x));!function(t){let e=t._Gx,i=t._Mx;for(var n=e.lyr,r=0;r<n.length;r++)D(t,n[r]);if(e.autol>1&&void 0!==e.panymin&&void 0!==e.panymax){var o=1/Math.max(e.autol,1);e.panymin=e.panymin*o+i.stk[0].ymin*(1-o),e.panymax=e.panymax*o+i.stk[0].ymax*(1-o),0!=(1&e.autoy)&&(i.stk[0].ymin=e.panymin),0!=(2&e.autoy)&&(i.stk[0].ymax=e.panymax)}}(this),function(t,e){var i=t._Mx,n=t._Gx;if(n.show_readout&&!n.hide_note){var r=n.note.length;h.text(i,i.width-n.lbtn-(r+1)*i.text_w,i.text_h,n.note)}W(t),n.legend&&function(t){var e,i,n,r,o=t._Mx,s=t._Gx,a=o.canvas.getContext("2d"),d=0,f=0,p=0,x=0,m=0;r=23*(e=o.text_w),s.lyr.length,o.text_h,i=o.r-r,n=o.t;var y=P(t),v=0,_=0;for(d=0;d<s.lyr.length;d++){var b=a.measureText(s.lyr[d].name).width;b>v&&(v=b)}for(v>98&&(_=v-98,y.width+=_,y.x-=_),a.strokeStyle=o.fg,a.fillStyle=o.bg,a.fillRect(y.x,y.y,y.width,y.height),a.strokeRect(y.x,y.y,y.width,y.height),d=0;d<s.lyr.length;d++)f=Math.floor(i+4*e),p=Math.floor(n+d*o.text_h+o.text_h),d===s.modlayer&&h.text(o,i+e-_,p+Math.floor(o.text_w/2),"**"),s.lyr[d].display&&(s.lyr[d]instanceof c?(m=s.lyr[d].color,s.lyr[d].line>0&&((x=l.sign(Math.min(e,Math.abs(s.lyr[d].thick)),s.lyr[d].thick))<0||x===h.L_dashed?h.draw_line(o,m,f-_,p-3,f+2*e-_,p-3,Math.abs(x),{mode:"dashed",on:4,off:4}):h.draw_line(o,m,f-_,p-3,f+2*e-_,p-3,Math.abs(x))),s.lyr[d].symbol>0&&(x=s.lyr[d].radius<0?-l.trunc(.6*e):Math.min(s.lyr[d].radius,l.trunc(.6*e)),h.draw_symbol(o,m,f+e-_,p-3,s.lyr[d].symbol,x))):s.lyr[d]instanceof u&&h.legend_colorbar(o,i+2*e-_,p-o.text_h/2,4*e,o.text_h/2)),f+=3*e,p+=.3*o.text_h,h.text(o,f-_,p,s.lyr[d].name)}(t)}(this),O(this),e.cross_xpos=void 0,e.cross_ypos=void 0,!t.warpbox&&this.mouseOnCanvas&&(U(this),e.y_cut_press_on||e.x_cut_press_on||1!==e.lyr.length||2!==e.lyr[0].hcb.class||B(this)),(e.always_show_marker||e.show_marker)&&j(this)}}};var w=["Ma","Ph","Re","Im","IR","Lo","L2"],M=["(absc)","(indx)","(1/ab)","(dydx)"];function k(){this.initialized=!1,this.xptr=void 0,this.yptr=void 0,this.retx=0,this.rety=0,this.xmrk=0,this.ymrk=0,this.aretx=0,this.arety=0,this.xstart=0,this.xdelta=0,this.panxmin=0,this.panxmax=0,this.panymin=0,this.panymax=0,this.xmin=0,this.xmax=0,this.xmult=void 0,this.ymin=0,this.ymax=0,this.ymult=void 0,this.zmin=void 0,this.zmax=void 0,this.zoff=0,this.dbmin=0,this.pxscl=0,this.pyscl=0,this.pmt=0,this.note="",this.format="",this.pl=0,this.pr=0,this.pt=0,this.pb=0,this.px1=0,this.px2=0,this.py1=0,this.py2=0,this.pyl=0,this.pthk=0,this.modlayer=0,this.modsource=0,this.modified=!1,this.modmode=0,this.xdiv=0,this.ydiv=0,this.all=!1,this.expand=!1,this.cross=!1,this.grid=!0,this.gridBackground=void 0,this.index=!1,this.pan=!0,this.specs=!0,this.legend=!0,this.xdata=!1,this.show_x_axis=!0,this.show_y_axis=!0,this.show_readout=!0,this.hide_note=!1,this.autohide_readout=!1,this.autohide_panbars=!1,this.panning=void 0,this.panmode=0,this.hold=!1,this.sections=0,this.iysec=0,this.nsec=0,this.isec=0,this.xlab=void 0,this.xlabel=void 0,this.ylab=void 0,this.ylabel=void 0,this.xcompression=0,this.default_rubberbox_action="zoom",this.default_rubberbox_mode="box",this.wheelscroll_mode_natural=!0,this.scroll_time_interval=10,this.repeatPanning=void 0,this.stillPanning=void 0,this.autol=-1,this.lineSmoothing=!1,this.rasterSmoothing=!1,this.wheelZoom=!1,this.wheelZoomPercent=.2,this.inContinuousZoom=!1,this.lyr=[],this.HCB=[],this.HCB_UUID={},this.plugins=[],this.plotData=document.createElement("canvas"),this.plotData.valid=!1,this.lg_colorbar=!1,this.cbb_top_x1=0,this.cbb_top_y1=0,this.cbb_bot_x1=0,this.cbb_bot_y1=0,this.cbb_width=0,this.cbb_height=0,this.p_cuts=!1,this.x_box_x=0,this.x_box_y=0,this.x_box_h=0,this.x_box_w=0,this.y_box_x=0,this.y_box_y=0,this.y_box_h=0,this.y_box_w=0,this.p_cuts_xpos=void 0,this.p_cuts_ypos=void 0,this.x_cut_data=[],this.y_cut_data=[],this.xcut=void 0,this.xcut_layer=void 0,this.x_cut_press_on=!1,this.xcut_now=!1,this.ycut=void 0,this.ycut_layer=void 0,this.y_cut_press_on=!1,this.ycut_now=!1,this.ylabel_stash=void 0,this.cut_stash=void 0,this.element1=void 0,this.element2=void 0,this.xyKeys="automatic",this.x_pop_now=!1,this.y_pop_now=!1,this.old_drawmode=void 0,this.old_autol=void 0,this.refresh_after_ctr=0}function S(t,e){var i=t._Gx,n=t._Mx;if(Array.isArray(e)){var r={name:"Custom",colors:e};"Custom"===l.Mc.colormap[l.Mc.colormap.length-1].name?l.Mc.colormap[l.Mc.colormap.length-1].colors=e:l.Mc.colormap.push(r),i.cmap=l.Mc.colormap.length-1}else if("string"==typeof e){i.cmap=-1;for(var o=0;o<l.Mc.colormap.length;o++)if(l.Mc.colormap[o].name===e){i.cmap=o;break}}else i.cmap=e;i.ncolors<0&&(i.ncolors=-1*i.ncolors,i.cmap=Math.max(1,i.cmap)),(i.cmap<0||i.cmap>l.Mc.colormap.length)&&(2===i.cmode?i.cmap=2:i.cmap=1),h.colormap(n,l.Mc.colormap[i.cmap].colors,i.ncolors)}function E(t){var e=t._Gx,i=t._Mx,n=e.aretx.toString();1===e.iabsc?h.message(i,"INDEX = "+n):2===e.iabsc?h.message(i,"1/X = "+n):h.message(i,"X = "+n)}function A(t){var e=t._Gx,i=t._Mx,n=e.arety.toString();2===e.iabsc?h.message(i,"1/Y = "+n):h.message(i,"Y = "+n)}function z(t){var e=t._Gx,i=t._Mx;h.removeEventListener(i,"mousedown",t.onmousedown,!1);for(var n={text:"Cntrls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===e.cntrls,handler:function(){t.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===e.cntrls,handler:function(){t.change_settings({xcnt:-1})}},{text:"Off",checked:0===e.cntrls,handler:function(){t.change_settings({xcnt:0})}},{text:"LM Click",checked:1===e.cntrls,handler:function(){t.change_settings({xcnt:1})}},{text:"Continuous",checked:2===e.cntrls,handler:function(){t.change_settings({xcnt:2})}}]}},r={text:"CX Mode...",menu:{title:"COMPLEX MODE",items:[{text:"Magnitude",checked:1===e.cmode,handler:function(){t.change_settings({cmode:1})}},{text:"Phase",checked:2===e.cmode,handler:function(){t.change_settings({cmode:2})}},{text:"Real",checked:3===e.cmode,handler:function(){t.change_settings({cmode:3})}},{text:"Imaginary",checked:4===e.cmode,handler:function(){t.change_settings({cmode:4})}},{text:"IR: Imag/Real",checked:5===e.cmode,handler:function(){t.change_settings({cmode:5})}},{text:"10*Log10",checked:6===e.cmode,handler:function(){t.change_settings({cmode:6})}},{text:"20*Log10",checked:7===e.cmode,handler:function(){t.change_settings({cmode:7})}}]}},o={text:"Scaling...",menu:{title:"SCALING",items:[{text:"Y Axis",style:"separator"},{text:"Parameters...",checked:0===e.autoy,handler:function(){e.autoy=0,Y(t,"Y Axis Min:",h.floatValidator,(function(e){parseFloat(e)!==i.stk[i.level].ymin?(""===e&&(e=0),tt(t,parseFloat(e),i.stk[i.level].ymax,"Y")):t.refresh()}),i.stk[i.level].ymin,void 0,void 0,(function(){Y(t,"Y Axis Max:",h.floatValidator,(function(e){parseFloat(e)!==i.stk[i.level].ymax?(""===e&&(e=0),tt(t,i.stk[i.level].ymin,parseFloat(e),"Y")):t.refresh()}),i.stk[i.level].ymax,void 0,void 0,void 0)}))}},{text:"Min Auto",checked:1===e.autoy,handler:function(){e.autoy=1}},{text:"Max Auto",checked:2===e.autoy,handler:function(){e.autoy=2}},{text:"Full Auto",checked:3===e.autoy,handler:function(){e.autoy=3}},{text:"X Axis",style:"separator"},{text:"Parameters...",checked:0===e.autox,handler:function(){e.autox=0,Y(t,"X Axis Min:",h.floatValidator,(function(e){parseFloat(e)!==i.stk[i.level].xmin?(""===e&&(e=0),tt(t,parseFloat(e),i.stk[i.level].xmax,"X")):t.refresh()}),i.stk[i.level].xmin,void 0,void 0,(function(){Y(t,"X Axis Max:",h.floatValidator,(function(e){parseFloat(e)!==i.stk[i.level].xmax?(""===e&&(e=0),tt(t,i.stk[i.level].xmin,parseFloat(e),"X")):t.refresh()}),i.stk[i.level].xmax,void 0,void 0,void 0)}))}},{text:"Min Auto",checked:1===e.autox,handler:function(){e.autox=1}},{text:"Max Auto",checked:2===e.autox,handler:function(){e.autox=2}},{text:"Full Auto",checked:3===e.autox,handler:function(){e.autox=3}},{text:"Z Axis",style:"separator"},{text:"Parameters...",checked:0===e.autoz,handler:function(){e.autoz=0,Y(t,"Z Axis Min:",h.floatValidator,(function(i){var n=parseFloat(i);n!==e.zmin&&(""===i&&(n=0),t.change_settings({zmin:n}))}),e.zmin,void 0,void 0,(function(){Y(t,"Z Axis Max:",h.floatValidator,(function(i){var n=parseFloat(i);n!==e.zmax&&(""===i&&(n=0),t.change_settings({zmax:n}))}),e.zmax,void 0,void 0,void 0)}))}},{text:"Min Auto",checked:1===e.autoz,handler:function(){t.change_settings({autoz:1})}},{text:"Max Auto",checked:2===e.autoz,handler:function(){t.change_settings({autoz:2})}},{text:"Full Auto",checked:3===e.autoz,handler:function(){t.change_settings({autoz:3})}}]}},s={text:"Grid",handler:function(){t.change_settings({grid:!e.grid})}},a={text:"Settings...",menu:{title:"SETTINGS",items:[{text:"ALL Mode",checked:e.all,style:"checkbox",handler:function(){t.change_settings({all:!e.all})}},{text:"Controls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===e.cntrls,handler:function(){t.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===e.cntrls,handler:function(){t.change_settings({xcnt:-1})}},{text:"Off",checked:0===e.cntrls,handler:function(){t.change_settings({xcnt:0})}},{text:"LM Click",checked:1===e.cntrls,handler:function(){t.change_settings({xcnt:1})}},{text:"Continuous",checked:2===e.cntrls,handler:function(){t.change_settings({xcnt:2})}}]}},{text:"Mouse...",menu:{title:"MOUSE OPTIONS",items:[{text:"LM Drag (Zoom)",checked:"zoom"===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action="zoom"}},{text:"LM Drag (Select)",checked:"select"===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action="select"}},{text:"LM Drag (Disabled)",checked:null===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action=null}},{text:"RM Drag (Zoom)",checked:"zoom"===e.default_rightclick_rubberbox_action,handler:function(){e.default_rightclick_rubberbox_action="zoom"}},{text:"RM Drag (Select)",checked:"select"===e.default_rightclick_rubberbox_action,handler:function(){e.default_rightclick_rubberbox_action="select"}},{text:"RM Drag (Disabled)",checked:null===e.default_rightclick_rubberbox_action,handler:function(){e.default_rightclick_rubberbox_action=null}},{text:"Mode...",menu:{title:"MOUSE Mode",items:[{text:"Box",checked:"box"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="box"}},{text:"Horizontal",checked:"horizontal"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="horizontal"}},{text:"Vertical",checked:"vertical"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="vertical"}}]}},{text:"CROSShairs...",menu:{title:"Crosshairs Mode",items:[{text:"Off",checked:!e.cross,handler:function(){e.cross=!1}},{text:"On",checked:!0===e.cross,handler:function(){e.cross=!0}},{text:"Horizontal",checked:"horizontal"===e.cross,handler:function(){e.cross="horizontal"}},{text:"Vertical",checked:"vertical"===e.cross,handler:function(){e.cross="vertical"}}]}},{text:"Mousewheel Natural Mode",checked:e.wheelscroll_mode_natural,style:"checkbox",handler:function(){t.change_settings({wheelscroll_mode_natural:!e.wheelscroll_mode_natural})}}]}},{text:"CROSShairs",checked:e.cross,style:"checkbox",handler:function(){t.change_settings({cross:!e.cross})}},{text:"GRID",checked:e.grid,style:"checkbox",handler:function(){t.change_settings({grid:!e.grid})}},{text:"INDEX Mode",checked:e.index,style:"checkbox",handler:function(){t.change_settings({index:!e.index})}},{text:"LEGEND",checked:e.legend,style:"checkbox",handler:function(){t.change_settings({legend:!e.legend})}},{text:"PAN Scrollbars",checked:e.pan,style:"checkbox",handler:function(){t.change_settings({pan:!e.pan})}},{text:"PHase UNITS...",menu:{title:"PHASE UNITS",items:[{text:"Radians",checked:23===e.plab,handler:function(){t.change_settings({phunits:"R"})}},{text:"Degrees",checked:24===e.plab,handler:function(){t.change_settings({phunits:"D"})}},{text:"Cycles",checked:25===e.plab,handler:function(){t.change_settings({phunits:"C"})}}]}},{text:"SPECS",checked:e.specs,style:"checkbox",handler:function(){t.change_settings({specs:!e.specs})}},{text:"P-Cuts",checked:e.p_cuts,style:"checkbox",handler:function(){t.change_settings({p_cuts:!e.p_cuts})}},{text:"Large Colorbar",checked:e.lg_colorbar,style:"checkbox",handler:function(){t.change_settings({lg_colorbar:!e.lg_colorbar})}},{text:"XDIVisions...",handler:function(){Y(t,"X Divisions:",(function(t){var e=h.intValidator(t),n=l.trunc(i.width/2);return e.valid&&t>n?{valid:!1,reason:"Exceeds maximum number of divisions ("+n+")."}:e}),(function(i){parseFloat(i)!==e.xdiv&&(""===i&&(i=1),e.xdiv=parseFloat(i)),t.refresh()}),e.xdiv,void 0,void 0,void 0)}},{text:"XLABel...",handler:function(){Y(t,"X Units:",(function(t){return console.log("The value is "+t),h.intValidator(t)}),(function(i){parseFloat(i)!==e.xlab&&(i<0&&(i=0),e.xlab=parseFloat(i)),t.refresh()}),e.xlab,void 0,void 0,void 0)}},{text:"YDIVisions...",handler:function(){Y(t,"Y Divisions:",(function(t){var e=h.intValidator(t),n=l.trunc(i.height/2);return e.valid&&t>n?{valid:!1,reason:"Exceeds maximum number of divisions ("+n+")."}:e}),(function(i){parseFloat(i)!==e.ydiv&&(""===i&&(i=1),e.ydiv=parseFloat(i)),t.refresh()}),e.ydiv,void 0,void 0,void 0)}},{text:"YINVersion",checked:4===i.origin,style:"checkbox",handler:function(){t.change_settings({yinv:4!==i.origin})}},{text:"YLABel...",handler:function(){Y(t,"Y Units:",(function(t){return h.intValidator(t)}),(function(i){parseFloat(i)!==e.ylab&&(i<0&&(i=0),e.ylab=parseFloat(i)),t.refresh()}),e.ylab,void 0,void 0,void 0)}},{text:"X-axis",checked:e.show_x_axis,style:"checkbox",handler:function(){t.change_settings({show_x_axis:!e.show_x_axis})}},{text:"Y-axis",checked:e.show_y_axis,style:"checkbox",handler:function(){t.change_settings({show_y_axis:!e.show_y_axis})}},{text:"Readout",checked:e.show_readout,style:"checkbox",handler:function(){t.change_settings({show_readout:!e.show_readout})}},{text:"Invert Colors",checked:i.xi,style:"checkbox",handler:function(){h.invertbgfg(i)}}]}},c={text:"Colormap...",menu:{title:"COLORMAP",items:[]}},u=function(e){t.change_settings({cmap:this.cmap})},d=0;d<l.Mc.colormap.length;d++){var f={text:l.Mc.colormap[d].name,cmap:d,checked:e.cmap===d,handler:u};c.menu.items.push(f)}var p=function(i){return{title:"TRACE OPTIONS",items:[{text:"Dashed...",handler:function(){var n=1;if(void 0!==i)n=Math.abs(t._Gx.lyr[i].thick);else{if(0===e.lyr.length)return;n=Math.abs(t._Gx.lyr[0].thick);for(var r=0;r<e.lyr.length;r++)if(n!==Math.abs(t._Gx.lyr[r].thick)){n=1;break}}Y(t,"Line thickness:",h.intValidator,(function(n){if(void 0!==i)t._Gx.lyr[i].line=3,t._Gx.lyr[i].thick=-1*n,t._Gx.lyr[i].symbol=0;else for(var r=0;r<e.lyr.length;r++)t._Gx.lyr[r].line=3,t._Gx.lyr[r].thick=-1*n,t._Gx.lyr[r].symbol=0}),n)}},{text:"Colors...",menu:{title:"COLORS",items:[{text:"Retain Current"},{text:"Red",checked:void 0!==i?"red"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="red";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="red"}},{text:"Pink",checked:void 0!==i?"pink"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="pink";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="pink"}},{text:"Hot Pink",checked:void 0!==i?"#ff009e"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="#ff009e";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="#ff009e"}},{text:"Orange",checked:void 0!==i?"orange"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="orange";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="orange"}},{text:"Yellow",checked:void 0!==i?"yellow"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="yellow";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="yellow"}},{text:"Lime Green",checked:void 0!==i?"#80f741"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="#80f741";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="#80f741"}},{text:"Green",checked:void 0!==i?"green"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="green";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="green"}},{text:"Blue",checked:void 0!==i?"blue"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="blue";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="blue"}},{text:"Purple",checked:void 0!==i?"purple"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="purple";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="purple"}},{text:"Custom Hexcode",handler:function(){Y(t,"Color code (requires #):",h.hexValidator,(function(n){if(void 0!==i)t._Gx.lyr[i].color=n;else for(;0<e.lyr.length;i++)t._Gx.lyr[0].color=n}),void 0,void 0,void 0,void 0)}}]}},{text:"Dots...",handler:function(){var n=3;if(void 0!==i)n=Math.abs(t._Gx.lyr[i].radius);else{if(0===e.lyr.length)return;var r;for(r=0;r<e.lyr.length;r++)if(n!==Math.abs(t._Gx.lyr[r].radius)){n=3;break}}Y(t,"Radius/Shape:",h.intValidator,(function(n){var r,o,s;if(n<0?(r=3,o=Math.abs(n)):n>0?(r=2,o=n):(r=1,o=0),void 0!==i)t._Gx.lyr[i].line=0,t._Gx.lyr[i].radius=o,t._Gx.lyr[i].symbol=r;else for(s=0;s<e.lyr.length;s++)t._Gx.lyr[s].line=0,t._Gx.lyr[s].radius=o,t._Gx.lyr[s].symbol=r}),n)}},{text:"Radius...",handler:function(){var n=3;if(void 0!==i)n=Math.abs(t._Gx.lyr[i].radius);else{if(0===e.lyr.length)return;for(var r=0;r<e.lyr.length;r++)if(n!==Math.abs(t._Gx.lyr[r].radius)){n=3;break}}Y(t,"Radius:",h.intValidator,(function(n){var r;if(r=n<0?Math.abs(n):n>0?n:0,void 0!==i)t._Gx.lyr[i].line=0,t._Gx.lyr[i].radius=r;else for(var o=0;o<e.lyr.length;o++)t._Gx.lyr[o].line=0,t._Gx.lyr[o].radius=r}),n)}},{text:"Solid...",handler:function(){var n=1;if(void 0!==i)n=Math.abs(t._Gx.lyr[i].thick);else{if(0===e.lyr.length)return;var r;for(n=Math.abs(t._Gx.lyr[0].thick),r=0;r<e.lyr.length;r++)if(n!==Math.abs(t._Gx.lyr[r].thick)){n=1;break}}Y(t,"Line thickness:",h.intValidator,(function(n){var r;if(void 0!==i)t._Gx.lyr[i].line=3,t._Gx.lyr[i].thick=n,t._Gx.lyr[i].symbol=0;else for(r=0;r<e.lyr.length;r++)t._Gx.lyr[r].line=3,t._Gx.lyr[r].thick=n,t._Gx.lyr[r].symbol=0}),n)}},{text:"Toggle",style:void 0!==i?"checkbox":void 0,checked:void 0!==i?t._Gx.lyr[i].display:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].display=!t._Gx.lyr[i].display;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].display=!t._Gx.lyr[n].display}},{text:"Symbols...",menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:void 0!==i?0===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=0,t._Gx.lyr[i].symbol=0;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=0,t._Gx.lyr[n].symbol=0}},{text:"Pixels",checked:void 0!==i?1===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=1,t._Gx.lyr[i].symbol=1;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=1,t._Gx.lyr[n].symbol=1}},{text:"Circles",checked:void 0!==i?2===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=2;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=2}},{text:"Squares",checked:void 0!==i?3===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=3;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=3}},{text:"Plusses",checked:void 0!==i?4===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=4;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=4}},{text:"X's",checked:void 0!==i?5===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=5;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=5}},{text:"Triangles",checked:void 0!==i?6===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=6,t._Gx.lyr[i].symbol=6;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=6,t._Gx.lyr[n].symbol=6}},{text:"Downward Triangles",checked:void 0!==i?7===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=6,t._Gx.lyr[i].symbol=7;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=6,t._Gx.lyr[n].symbol=7}}]}},{text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:void 0!==i?0===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=0;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].line=0}},{text:"Verticals",checked:void 0!==i?1===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=1;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].line=1}},{text:"Horizontals",checked:void 0!==i?2===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=2;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].line=2}},{text:"Connecting",checked:void 0!==i?3===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=3;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].line=3}}]}},{text:"Thickness...",handler:function(){var n=1;void 0!==i&&(n=t._Gx.lyr[i].thick),Y(t,"Thickness",h.intValidator,(function(n){if(""===n&&(n=1),n=Math.max(0,n),void 0!==i)t._Gx.lyr[i].thick=n;else for(var r=0;r<e.lyr.length;r++)t._Gx.lyr[r].thick=n}),n,void 0,void 0,void 0)}},{text:"Opacity...",handler:function(){var n=1;void 0!==i&&(n=t._Gx.lyr[i].opacity),Y(t,"Opacity:",h.floatValidator,(function(n){if(""===n&&(n=1),n=Math.max(0,n),n=Math.min(1,n),void 0!==i)t._Gx.lyr[i].opacity=n;else for(var r=0;r<e.lyr.length;r++)t._Gx.lyr[r].opacity=n}),n,void 0,void 0,void 0)}},{text:"XCompression...",menu:{title:"XCOMPRESSION",items:[{text:"Retain Current"},{text:"Smoothing",checked:void 0!==i?0===t._Gx.lyr[i].xcompression:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].change_settings({xcmp:0});else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[i].change_settings({xcmp:0})}},{text:"Average",checked:void 0!==i?1===t._Gx.lyr[i].xcompression:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].change_settings({xcmp:1});else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[i].change_settings({xcmp:1})}},{text:"Minimum",checked:void 0!==i?2===t._Gx.lyr[i].xcompression:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].change_settings({xcmp:2});else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[i].change_settings({xcmp:2})}},{text:"Maximum",checked:void 0!==i?3===t._Gx.lyr[i].xcompression:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].change_settings({xcmp:3});else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[i].change_settings({xcmp:3})}},{text:"First",checked:void 0!==i?4===t._Gx.lyr[i].xcompression:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].change_settings({xcmp:4});else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[i].change_settings({xcmp:4})}},{text:"Max (Abs)",checked:void 0!==i?5===t._Gx.lyr[i].xcompression:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].change_settings({xcmp:5});else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[i].change_settings({xcmp:5})}}]}}]}},x={title:"SIG-PLOT",finalize:function(){i.prompt||h.addEventListener(i,"mousedown",t.onmousedown,!1),t.refresh()},items:[{text:"Refresh"},n,r,o,{text:"View...",menu:{title:"VIEW",items:[{text:"Reset",handler:function(){t.unzoom()}},{text:"Y Axis",style:"separator"},{text:"Expand Range",handler:function(){Q(t,h.SB_EXPAND,"YPAN")}},{text:"Shrink Range",handler:function(){Q(t,h.SB_SHRINK,"YPAN")}},{text:"Expand Full",handler:function(){Q(t,h.SB_FULL,"YPAN")}},{text:"X Axis",style:"separator"},{text:"Expand Range",handler:function(){Q(t,h.SB_EXPAND,"XPAN")}},{text:"Shrink Range",handler:function(){Q(t,h.SB_SHRINK,"XPAN")}},{text:"Expand Full",handler:function(){Q(t,h.SB_FULL,"XPAN")}}]}},s,a,c,{text:"Traces...",menu:function(){var e=t._Gx,i={title:"TRACE",items:[]};i.items.push({text:"All",menu:p()});for(var n=0;n<e.lyr.length;n++)i.items.push({text:e.lyr[n].name,menu:p(n)});return i}},{text:"Files...",menu:{title:"FILES OPTIONS",items:[{text:"Deoverlay File...",menu:function(){var e=t._Gx,i={title:"DEOVERLAY",items:[]};i.items.push({text:"Deoverlay All",handler:function(){t.deoverlay()}});for(var n=0;n<e.lyr.length;n++){var r=function(e){return function(){t.deoverlay(e)}}(n);i.items.push({text:e.lyr[n].name,handler:r})}return i}}]}},{text:"Plugins...",menu:{title:"PLUGINS",items:function(){for(var t=[],i=0;i<e.plugins.length;i++){var n=e.plugins[i];n.impl.menu&&("function"==typeof n.impl.menu?t.push(n.impl.menu()):t.push(n.impl.menu))}return t}()}},{text:"Keypress Info",handler:function(){h.message(i,"Keypress Table:\n--------------\n?       - Main help box.\nA       - Toggle display x,y readouts:\n          (absc) -> (index) -> (1/absc) -> (time).\nB       - Toggle LM Drag Mode:\n          (box) -> (horizontal) -> (vertical).\nC       - Toggle controls.\nK       - Show Marker.\nL       - Toggle legend.\nM       - Pops up main menu\nR       - Toggle display specs (x/y readout)\nS       - Toggle display specs and axes.\nT       - Popup box with timecode value at mouse.\nX       - In 1D mode, popup box with X value at mouse.\n        - In 2D mode, toggle x-cut display.\nY       - In 1D mode, popup box with Y value at mouse.\n        - In 2D mode, toggle y-cut display.\nP       - In 2D mode, displays p-cuts along side and bottom.\nF       - Toggle fullscreen.\nCntrl+I - Invert colors.")}},{text:"Save as...",menu:{title:"SAVE AS",items:[{text:"PNG",handler:function(){var e=t._Mx.active_canvas.toDataURL("image/png"),i=document.createElement("a");i.href=e,i.download="SigPlot."+(new Date).getTime()+".png",i.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}},{text:"JPG",handler:function(){var e=t._Mx.active_canvas.toDataURL("image/jpg"),i=document.createElement("a");i.href=e,i.download="SigPlot."+(new Date).getTime()+".jpg",i.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}},{text:"SVG",handler:function(){var e=t._Mx.active_canvas.toDataURL("image/svg"),i=document.createElement("a");i.href=e,i.download="SigPlot."+(new Date).getTime()+".svg",i.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}]}},{text:"Exit",handler:function(){var t=document.createEvent("Event");t.initEvent("sigplotexit",!0,!0),h.dispatchEvent(i,t)}}]};h.menu(i,x)}function C(t,e){var i=t._Gx,n=t._Mx;h.removeEventListener(n,"mousedown",t.onmousedown,!1);var r={text:"Dashed...",handler:function(){var n=1;if(void 0!==e)n=Math.abs(t._Gx.lyr[e].thick);else{if(0===i.lyr.length)return;n=Math.abs(t._Gx.lyr[0].thick);for(var r=0;r<i.lyr.length;r++)if(n!==Math.abs(t._Gx.lyr[r].thick)){n=1;break}}Y(t,"Line thickness:",h.intValidator,(function(n){if(void 0!==e)t._Gx.lyr[e].line=3,t._Gx.lyr[e].thick=-1*n,t._Gx.lyr[e].symbol=0;else for(var r=0;r<i.lyr.length;r++)t._Gx.lyr[r].line=3,t._Gx.lyr[r].thick=-1*n,t._Gx.lyr[r].symbol=0}),n)}},o={text:"Colors...",menu:{title:"COLORS",items:[{text:"Retain Current"},{text:"Red",checked:void 0!==e?"red"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="red";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="red"}},{text:"Pink",checked:void 0!==e?"pink"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="pink";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="pink"}},{text:"Hot Pink",checked:void 0!==e?"#ff009e"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="#ff009e";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="#ff009e"}},{text:"Orange",checked:void 0!==e?"orange"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="orange";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="orange"}},{text:"Yellow",checked:void 0!==e?"yellow"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="yellow";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="yellow"}},{text:"Lime Green",checked:void 0!==e?"#80f741"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="#80f741";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="#80f741"}},{text:"Green",checked:void 0!==e?"green"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="green";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="green"}},{text:"Blue",checked:void 0!==e?"blue"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="blue";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="blue"}},{text:"Purple",checked:void 0!==e?"purple"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="purple";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="purple"}},{text:"Custom Hexcode",handler:function(){Y(t,"Color code (requires #):",h.hexValidator,(function(n){if(void 0!==e)t._Gx.lyr[e].color=n;else for(var r=0;r<i.lyr.length;r++)t._Gx.lyr[r].color=n}),void 0,void 0,void 0,void 0)}}]}},s={text:"Solid...",handler:function(){var n=1;if(void 0!==e)n=Math.abs(t._Gx.lyr[e].thick);else{if(0===i.lyr.length)return;var r;for(n=Math.abs(t._Gx.lyr[0].thick),r=0;r<i.lyr.length;r++)if(n!==Math.abs(t._Gx.lyr[r].thick)){n=1;break}}Y(t,"Line thickness:",h.intValidator,(function(n){var r;if(void 0!==e)t._Gx.lyr[e].line=3,t._Gx.lyr[e].thick=n,t._Gx.lyr[e].symbol=0;else for(r=0;r<i.lyr.length;r++)t._Gx.lyr[r].line=3,t._Gx.lyr[r].thick=n,t._Gx.lyr[r].symbol=0}),n)}},a={text:"Toggle",style:void 0!==e?"checkbox":void 0,checked:void 0!==e?t._Gx.lyr[e].display:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].display=!t._Gx.lyr[e].display;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].display=!t._Gx.lyr[n].display}},l={text:"Symbols...",menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:void 0!==e?0===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=0,t._Gx.lyr[e].symbol=0;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=0,t._Gx.lyr[n].symbol=0}},{text:"Pixels",checked:void 0!==e?1===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=1,t._Gx.lyr[e].symbol=1;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=1,t._Gx.lyr[n].symbol=1}},{text:"Circles",checked:void 0!==e?2===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=2;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=2}},{text:"Squares",checked:void 0!==e?3===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=3;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=3}},{text:"Plusses",checked:void 0!==e?4===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=4;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=4}},{text:"X's",checked:void 0!==e?5===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=5;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=5}},{text:"Triangles",checked:void 0!==e?6===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=6,t._Gx.lyr[e].symbol=6;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=6,t._Gx.lyr[n].symbol=6}},{text:"Downward Triangles",checked:void 0!==e?7===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=6,t._Gx.lyr[e].symbol=7;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=6,t._Gx.lyr[n].symbol=7}}]}},c={text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:void 0!==e?0===t._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].line=0;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].line=0}},{text:"Verticals",checked:void 0!==e?1===t._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].line=1;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].line=1}},{text:"Horizontals",checked:void 0!==e?2===t._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].line=2;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].line=2}},{text:"Connecting",checked:void 0!==e?3===t._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].line=3;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].line=3}}]}},u={text:"Thickness...",handler:function(){var n=1;void 0!==e&&(n=t._Gx.lyr[e].thick),Y(t,"Thickness",h.intValidator,(function(n){if(""===n&&(n=1),n=Math.max(0,n),void 0!==e)t._Gx.lyr[e].thick=n;else for(var r=0;r<i.lyr.length;r++)t._Gx.lyr[r].thick=n}),n,void 0,void 0,void 0)}},d={text:"Opacity...",handler:function(){var n=1;void 0!==e&&(n=t._Gx.lyr[e].opacity),Y(t,"Opacity:",h.floatValidator,(function(n){if(""===n&&(n=1),n=Math.max(0,n),n=Math.min(1,n),void 0!==e)t._Gx.lyr[e].opacity=n;else for(var r=0;r<i.lyr.length;r++)t._Gx.lyr[r].opacity=n}),n,void 0,void 0,void 0)}},f={title:i.lyr[e].name,finalize:function(){n.prompt||h.addEventListener(n,"mousedown",t.onmousedown,!1),t.refresh()},items:[r,o,s,a,l,c,u,d]};h.menu(n,f)}function L(t,e){return function(i,n,r,o,s,a,l){t._Gx;var c=t._Mx,u=Math.min(n,o),d=Math.min(r,s),f=Math.abs(o-n),p=Math.abs(s-r),x=!1;if(i.which===e&&(x="horizontal"===l?f>2:("vertical"===l||f>2)&&p>2),x){if(void 0===a||"zoom"===a)t.pixel_zoom(n,r,o,s),t.refresh();else if("select"===a){var m=document.createEvent("Event");m.initEvent("mtag",!0,!0),m.originalEvent=i;var y=K(t,u,d),v=K(t,u+f,d+p);if(m.x=y.x,m.y=y.y,m.xpos=u,m.ypos=d,m.w=Math.abs(v.x-y.x),m.h=Math.abs(v.y-y.y),m.wpxl=f,m.hpxl=p,m.shift=i.shiftKey,h.dispatchEvent(c,m)){var _=document.createEvent("Event");_.initEvent("mclick",!0,!0),_.originalEvent=i,_.xpos=m.xpos,_.ypos=m.ypos,_.x=m.x,_.y=m.y,_.which=i.which}}}else t.mouseup(i)}}function T(t,e){var i=t._Gx,n=t._Mx,r=t.get_hcb_by_lyrn(0);e?(r?(i.xstart=r.xstart,i.xdelta=r.xdelta):(i.xstart=0,i.xdelta=1),n.origin=1,1&i.autoz&&(i.zmin=void 0),2&i.autoz&&(i.zmax=void 0)):(i.xstart=0,i.xdelta=1,i.autol=-1,n.origin=1,1&i.autoz&&(i.zmin=void 0),2&i.autoz&&(i.zmax=void 0))}function O(t){for(var e,i=t._Gx,n=t._Mx.canvas.getContext("2d"),r=0;r<i.plugins.length;)i.plugins[r].impl.refresh&&((e=i.plugins[r].canvas).width!==t._Mx.canvas.width&&(e.width=t._Mx.canvas.width),e.height!==t._Mx.canvas.height&&(e.height=t._Mx.canvas.height),0!==e.height&&0!==e.width&&(e.width!==t._Mx.canvas.width&&(e.width=t._Mx.canvas.width),e.height!==t._Mx.canvas.height&&(e.height=t._Mx.canvas.height),e.getContext("2d").clearRect(0,0,e.width,e.height),i.plugins[r].impl.refresh(e),n.drawImage(e,0,0))),r+=1}function P(t){var e=t._Mx,i=t._Gx,n=23*e.text_w,r=(i.lyr.length+1)*e.text_h;return{x:e.r-n+2,y:e.t+2,width:n-5,height:r-5}}function G(t){var i=t._Gx;if(!i.note){var n=t.get_hcb_by_lyrn(0);if(0===e.size(i.HCB_UUID))i.note="";else if(n&&void 0===n.plotnote){for(var r=[],o=0;o<i.HCB.length;o++){var s=t.get_hcb_by_lyrn(o);s.file_name&&r.push(s.file_name)}i.note=r.join("|").toUpperCase()}}}function R(t){var e=t._Mx,i=t._Gx;if(void 0!==i.zmin&&void 0!==i.zmax&&void 0!==i.x_cut_data){var n=e.r-e.l;i.x_box_x=Math.floor(e.l-2)+.5,i.x_box_y=Math.floor(e.b+25)+.5,i.x_box_w=Math.floor(n+4),i.x_box_h=Math.floor(5*e.text_h+20),h.draw_box(e,e.fg,i.x_box_x,i.x_box_y,i.x_box_w,i.x_box_h,1,e.bg);var r=e.active_canvas.getContext("2d");r.beginPath(),r.lineWidth=1,r.strokeStyle=e.fg;for(var o=null,s=null,a=0;a<t._Gx.x_cut_data.length;a++){var l=t._Gx.x_cut_data[a];l=Math.min(Math.max(l,i.zmin),i.zmax);var c=t._Gx.x_box_h/(i.zmax-i.zmin),u=Math.round((l-i.zmin)*c),d=t._Gx.x_box_w/t._Gx.x_cut_data.length,f=Math.round(a*d),p=t._Gx.x_box_x+f,x=t._Gx.x_box_y+t._Gx.x_box_h-u;0===a?r.moveTo(p,x):p===o&&x===s||(r.lineTo(p,x),o=p,s=x)}r.stroke()}}function I(t){var e=t._Mx,i=t._Gx;if(void 0!==i.zmin&&void 0!==i.zmax&&void 0!==i.y_cut_data){var n=e.b-e.t;i.y_box_x=Math.floor(e.r+25)+.5,i.y_box_y=Math.floor(e.t-2)+.5,i.y_box_w=Math.floor(5*e.text_w+20),i.y_box_h=Math.floor(n+2),i.lg_colorbar&&(i.y_box_x+=100),h.draw_box(e,e.fg,i.y_box_x,i.y_box_y,i.y_box_w,i.y_box_h,1,e.bg);var r=e.active_canvas.getContext("2d");r.beginPath(),r.lineWidth=1,r.strokeStyle=e.fg;for(var o=null,s=null,a=0;a<t._Gx.y_cut_data.length;a++){var l=t._Gx.y_cut_data[a];l=Math.min(Math.max(l,i.zmin),i.zmax);var c=t._Gx.y_box_w/(i.zmax-i.zmin),u=Math.round((l-i.zmin)*c),d=t._Gx.y_box_h/t._Gx.y_cut_data.length,f=Math.round(a*d),p=t._Gx.y_box_x+u,x=t._Gx.y_box_y+f;0===a?r.moveTo(p,x):p===o&&x===s||(r.lineTo(p,x),o=p,s=x)}r.stroke()}}function D(t,e){var i=t._Mx,n=t._Gx;if(!e.display||0!==n.hold)return;let r=e.draw();r&&0!==n.autol&&q(t,r);var o=document.createEvent("Event");o.initEvent("lyrdraw",!0,!0),o.index=e.index,o.name=e.name,o.layer=e,h.dispatchEvent(i,o)}function N(t,i){var n=t._Gx,r=t._Mx,o=document.createEvent("Event");if(o.initEvent("lyrdel",!0,!0),o.index=i,o.name=n.lyr[i].name,o.layer=n.lyr[i],h.dispatchEvent(r,o)){if(n.lyr[i].ybufn=0,n.lyr[i].ybuf=null,i<n.lyr.length-1){n.lyr[i];for(var s=i;s<n.lyr.length-1;s++)n.lyr[s]=n.lyr[s+1]}n.lyr.length-=1,e.size(n.HCB_UUID)>0&&(n.panxmin=1,n.panxmax=-1,n.panymin=1,n.panymax=-1)}}function B(t){var e=t._Gx,i=t._Mx;2===e.lyr[0].hcb.class&&(i.b,i.t,i.r,i.l,e.lyr[0].yframe,e.lyr[0].xframe,e.p_cuts&&(i.xpos>=i.l&&i.xpos<=i.r&&e.p_cuts_xpos!==i.xpos&&e.lyr[0].yCutData&&(e.y_cut_data=e.lyr[0].yCutData(K(t,i.xpos,0).x,!0),I(t),e.lyr[0].hcb.pipe||(e.p_cuts_xpos=i.xpos)),i.ypos>=i.t&&i.ypos<=i.b&&e.p_cuts_ypos!==i.ypos&&e.lyr[0].xCutData&&(e.x_cut_data=e.lyr[0].xCutData(K(t,0,i.ypos).y,!0),R(t),e.lyr[0].hcb.pipe||(e.p_cuts_ypos=i.ypos))))}function U(t){var e=t._Gx,i=t._Mx;e.cross&&("vertical"!==e.cross&&!0!==e.cross||i.xpos>=i.l&&i.xpos<=i.r&&e.cross_xpos!==i.xpos&&(void 0!==e.cross_xpos&&h.rubberline(i,e.cross_xpos,i.t,e.cross_xpos,i.b),h.rubberline(i,i.xpos,i.t,i.xpos,i.b),e.cross_xpos=i.xpos),"horizontal"!==e.cross&&!0!==e.cross||i.ypos>=i.t&&i.ypos<=i.b&&e.cross_ypos!==i.ypos&&(void 0!==e.cross_ypos&&h.rubberline(i,i.l,e.cross_ypos,i.r,e.cross_ypos),h.rubberline(i,i.l,i.ypos,i.r,i.ypos),e.cross_ypos=i.ypos))}function j(t){var e=t._Gx,i=t._Mx;if(null!==e.xmrk&&null!==e.ymrk){var n=h.real_to_pixel(i,e.xmrk,e.ymrk);if(e.lyr.length>0&&1===e.lyr[0].hcb.class){if(n.clipped)return}else if(e.lyr.length>0&&2===e.lyr[0].hcb.class&&(n.clipped_x||!n.clipped_y))return;var r=i.active_canvas.getContext("2d");r.beginPath(),r.strokeStyle=i.xwfg,r.fillStyle=i.xwfg,r.arc(n.x,n.y,2,0,360),r.stroke(),r.textBaseline="alphabetic",r.textAlign="left",r.fillStyle=i.fg,r.font=i.font.font;var o="x:"+h.format_g(e.xmrk,6,3,!0);r.fillText(o,n.x+5,n.y-5),o="y:"+h.format_g(e.ymrk,6,3,!0),r.fillText(o,n.x+5,n.y-5+i.text_h)}}function H(t,i){var n=t._Mx,r=t._Gx;r.xdata=!1;for(var o=0;o<r.lyr.length;o++)r.lyr[o].xdata=5===i,r.lyr[o].xdata&&(r.xdata=!0);if(i!==r.cmode)if(5===i&&r.index)l.log.error("Imag/Real mode not permitted in INDEX mode");else if(r.lyr.length<=0)r.cmode=i,X(t);else if(i>0){var s=r.cmode;r.cmode=i;var a=r.autox,h=r.autoy;if(r.autox=3,r.autoy=3,5===i||5===s)r.panxmin=1,r.panxmax=-1,r.panymin=1,r.panymax=-1,n.level=0,i===r.basemode?(n.stk[0].xmin=r.xmin,n.stk[0].xmax=r.xmax,n.stk[0].ymin=r.ymin,n.stk[0].ymax=r.ymax):5===i||5===r.basemode?V(t):(n.stk[0].xmin=r.xmin,n.stk[0].xmax=r.xmax,V(t,0,r.xmin,r.xmax));else for(0===e.size(r.HCB_UUID)&&i===r.basemode?(r.panymin=1,r.panymax=-1,n.stk[0].ymin=r.ymin,n.stk[0].ymax=r.ymax):V(t,0,n.stk[n.level].xmin,n.stk[n.level].xmax),o=1;o<=n.level;o++)n.stk[o].ymin=n.stk[0].ymin,n.stk[o].ymax=n.stk[0].ymax;r.autox=a,r.autoy=h,t.refresh()}}function W(t){var e,i=t._Mx,n=t._Gx;if(n.pan&&!i.widget){e=i.level;var r={ps:i.stk[e].ymin,pe:i.stk[e].ymax},o=r.ps!==n.panymin||r.pe!==n.panymax;if(o=o&&i.level>0,!n.autohide_panbars||o&&t.mouseOnCanvas||n.panning?(h.scrollbar(i,0,n.pyl,n.pyl+n.pthk,i.t,i.b,r,n.panymin,n.panymax,void 0,i.scrollbar_y),i.stk[e].ymin=r.ps,i.stk[e].ymax=r.pe):((s=i.canvas.getContext("2d")).fillStyle=i.bg,s.fillRect(n.pyl,i.t,n.pyl+n.pthk,i.b-i.t)),n.pl<i.width){var s,a=(r={ps:i.stk[e].xmin,pe:i.stk[e].xmax}).ps!==n.panxmin||r.pe!==n.panxmax;a=a&&(!n.all||i.level>0),!n.autohide_panbars||a&&t.mouseOnCanvas||n.panning?(h.scrollbar(i,0,n.pl,n.pr,n.pt,n.pt+n.pthk,r,n.panxmin,n.panxmax,void 0,i.scrollbar_x),i.stk[e].xmin=r.ps,i.stk[e].xmax=r.pe):((s=i.canvas.getContext("2d")).fillStyle=i.bg,s.fillRect(n.pl,n.pt-1,n.pr-n.pl,n.pthk+4))}}}function F(t,e,i,n){var r,o,s,a,l,c,u,d,f=t._Mx,p=t._Gx,x=new h.SCROLLBAR,m=new h.SCROLLBAR,y=!1;if(r=f.level,p.panmode>0?(x.flag=11,m.flag=11):(x.flag=-12,m.flag=-12),0===i&&(x.action=0,m.action=0),"Y"===e.substring(0,1)){if(l=f.stk[r].ymin,u=(c=f.stk[r].ymax)-l,"YPAN"===e){d=f.scrollbar_y;var v={ps:l,pe:c};h.scrollbar(f,m,p.pyl,p.pyl+p.pthk,f.t,f.b,v,p.panymin,p.panymax,n,d),l=v.ps,c=v.pe,0!==m.action&&h.scroll(f,m,h.XW_UPDATE,void 0,d)}else"YCENTER"===e&&(c=(l-=u*(f.ypos-(f.t+f.b)/2)/(f.b-f.t))+u);l===f.stk[r].ymin&&c===f.stk[r].ymax||(f.stk[r].ymin=l,f.stk[r].ymax=c,p.cmode===p.basemode&&1===f.level&&(p.ymin=Math.min(p.ymin,l),p.ymax=Math.max(p.ymax,c)),t.inPan=!0,(_=document.createEvent("Event")).initEvent("ypan",!0,!0),_.level=f.level,_.xmin=f.stk[f.level].xmin,_.ymin=f.stk[f.level].ymin,_.xmax=f.stk[f.level].xmax,_.ymax=f.stk[f.level].ymax,h.dispatchEvent(f,_),t.inPan=!1,t.refresh(),y=!0)}else{var _;o=f.stk[r].xmin,a=(s=f.stk[r].xmax)-o,"XPAN"===e?(d=f.scrollbar_x,v={ps:o,pe:s},h.scrollbar(f,x,p.pl,p.pr,p.pt,p.pt+p.pthk,v,p.panxmin,p.panxmax,n,d),o=v.ps,s=v.pe,0!==x.action&&h.scroll(f,x,h.XW_UPDATE,void 0,d)):"XCENTER"===e&&(o+=a*(f.xpos-(f.l+f.r)/2)/(f.r-f.l))!==f.stk[r].xmin&&(s=o+a),f.stk[r].xmin===o&&f.stk[r].xmax===s||(f.stk[r].xmin=o,f.stk[r].xmax=s,p.xdata||1!==f.level||(p.xmin=f.stk[1].xmin,p.xmax=f.stk[1].xmax),t.inPan=!0,(_=document.createEvent("Event")).initEvent("xpan",!0,!0),_.level=f.level,_.xmin=f.stk[f.level].xmin,_.ymin=f.stk[f.level].ymin,_.xmax=f.stk[f.level].xmax,_.ymax=f.stk[f.level].ymax,h.dispatchEvent(f,_),t.inPan=!1,t.refresh(),y=!0)}return y}function Y(t,e,i,n,r,o,s,a){var l=t._Mx;if(l.prompt)throw"Prompt already exists! Can only have one prompt at a time!";h.disableListeners(l),t.disable_listeners();try{h.prompt(l,e,i,function(t,e){return function(i){e(i),h.enableListeners(l),t.enable_listeners(),t.refresh(),void 0!==a&&a()}}(t,n),(function(){t.refresh()}),r,o,s,5e3)}catch(t){console.log("ERROR: Failed to set up prompt due to: "+t)}}function X(t){var e=t._Mx,i=t._Gx,n=e.canvas.getContext("2d");if(0!==i.sections||(i.isec=0),e.warpbox){var r=K(t,e.warpbox.xo,e.warpbox.yo),o=K(t,e.warpbox.xl,e.warpbox.yl);i.aretx=r.x,i.arety=r.y,i.dretx=o.x-r.x,i.drety=o.y-r.y}else i.aretx=i.retx,i.arety=i.rety,i.dretx=i.retx-i.xmrk,i.drety=i.rety-i.ymrk;if(5===i.cmode&&1===i.iabsc&&(i.iabsc=2),1===i.iabsc?(i.aretx=Math.round((i.aretx-i.xstart)/i.xdelta),i.index||(i.aretx+=1),i.dretx=Math.round(i.dretx/i.xdelta)):2===i.iabsc&&(0!==i.aretx&&(i.aretx=1/i.aretx),0!==i.arety&&(i.arety=1/i.arety),0!==i.dretx&&(i.dretx=1/i.dretx),0!==i.drety&&(i.drety=1/i.drety)),i.show_readout&&!e.widget){n.fillStyle=e.bg;var s=Math.floor(e.height-2.5*e.text_h);n.fillRect(e.text_w,s-1,49*e.text_w,s+1.5*e.text_h),s=Math.floor(e.height-.5*e.text_h);var a=Math.max(i.pr+e.text_w,e.width-2*e.text_w);if(n.fillStyle=e.bg,n.fillRect(a,s-e.text_h,e.text_w,e.text_h),!i.autohide_readout||t.mouseOnCanvas||i.panning){var c,d,f,p;0===i.iabsc&&4===i.ylab?(d=(l.sec2tspec(i.arety)+"                ").substring(0,16),p=(l.sec2tspec(i.drety,"delta")+"                ").substring(0,16)):(d=h.format_g(i.arety,16,9,!0),p=h.format_g(i.drety,16,9)),0===i.iabsc&&4===i.xlab?(c=(l.sec2tspec(i.aretx)+"                ").substring(0,16),f=(l.sec2tspec(i.dretx,"delta")+"                ").substring(0,16)):(c=h.format_g(i.aretx,16,9,!0),f=h.format_g(i.dretx,16,9));var x="y: "+d+" dy: "+p+" L="+e.level+" "+w[i.cmode-1],m="x: "+c+" dx: "+f+" "+M[i.iabsc];if(3===i.iabsc&&(x=0===i.dretx?x.substr(0,20)+"sl: Inf             "+x.substr(40,x.length):x.substr(0,20)+"sl: "+h.format_g(i.drety/i.dretx,16,9)+x.substr(40,x.length)),s=Math.floor(e.height-1.5*e.text_h),h.text(e,e.text_w,s,x),s=Math.floor(e.height-.5*e.text_h),h.text(e,e.text_w,s,m),h.LEGACY_RENDER&&a<e.width&&(i.cntrls>0?h.text(e,a,s,"C"):h.text(e,a,s," ")),i.lyr.some((function(t){return t instanceof u}))){var y=0,v=0,_=0,b=0;if(i.lg_colorbar){var g=e.b-e.t;y=e.r+35,v=e.t+1/8*g,_=5*e.text_w,b=3/4*g,(n=e.active_canvas.getContext("2d")).strokeStyle="rgba(124, 123, 121, 0.8)",n.fillStyle=" rgba(124, 123, 121, 0.8)";var k=b,S=_-2,E=S/2,A=y+(_-S)/2,z=v-10;n.beginPath(),n.moveTo(A,z),n.lineTo(A+S,z),n.lineTo(A+.5*S,z-E),n.lineTo(A,z),n.stroke(),n.fill();var C=z+k+20;n.beginPath(),n.moveTo(A,C),n.lineTo(A+S,C),n.lineTo(A+.5*S,C+E),n.lineTo(A,C),n.stroke(),n.fill(),i.cbb_top_x1=A,i.cbb_top_y1=z,i.cbb_bot_x1=A,i.cbb_bot_y1=C,i.cbb_width=S,i.cbb_height=E}else y=49*e.text_w-3,v=e.height-2.5*e.text_h,_=e.text_w,b=2*e.text_h;h.colorbar(e,y,v,_,b)}i.p_cuts&&1===i.lyr.length&&2===i.lyr[0].hcb.class&&(I(t),R(t))}}}function V(t,e,i,n,r,o){const s=t._Mx,a=t._Gx;a.panxmin=void 0,a.panxmax=void 0,a.panymin=void 0,a.panymax=void 0;let h=i,c=n;const u=void 0===h,d=void 0===c;if(0===a.lyr.length)a.panxmin=-1,a.panxmax=1,a.panymin=-1,a.panymax=1;else{void 0===r&&(a.xlab=a.lyr[0].xlab),void 0===o&&(a.ylab=a.lyr[0].ylab);for(var f=0;f<a.lyr.length;f++)!1!==a.lyr[f].display&&(h=u?a.lyr[f].xmin:i,c=d?a.lyr[f].xmax:n,a.xlab!==a.lyr[f].xlab&&(a.xlab=0),a.ylab!==a.lyr[f].ylab&&(a.ylab=0),q(t,a.lyr[f].get_pan_bounds()))}var p=a.panxmax-a.panxmin;if(p<0&&(a.panxmax=a.panxmin,a.panxmin=a.panxmax+p,p=-p),p<=1e-20&&(a.panxmin=a.panxmin-1,a.panxmax=a.panxmax+1),p=a.panxmax-a.panxmin,a.panxmin-=l.pad(p,a.panxpad),a.panxmax+=l.pad(p,a.panxpad),0!=(1&a.autox)&&u&&(s.stk[0].xmin=a.panxmin),0!=(2&a.autox)&&d&&(s.stk[0].xmax=a.panxmax,!a.all&&!a.xdata))for(f=0;f<a.lyr.length;f++)if(!1!==a.lyr[f].display){c=Math.min(a.lyr[f].xmax,s.stk[0].xmax);var x=Math.abs((c-a.lyr[f].xmin)/a.lyr[f].xdelta)-a.bufmax+1;x>0&&(s.stk[0].xmax=c-x*Math.abs(a.lyr[f].xdelta))}if(0!=(1&a.autoy)){s.stk[0].ymin=a.panymin;for(var m=0;m<s.stk.length;m++)void 0===s.stk[m].ymin&&(s.stk[m].ymin=a.panymin)}if(0!=(2&a.autoy)){s.stk[0].ymax=a.panymax;for(var y=0;y<s.stk.length;y++)void 0===s.stk[y].ymax&&(s.stk[y].ymax=a.panymax)}if(void 0!==a.panymin&&void 0!==a.panymax){var v=a.panymax-a.panymin;a.panymin-=l.pad(v,a.panypad),a.panymax+=l.pad(v,a.panypad)}}function q(t,{xmin:e,xmax:i,ymin:n,ymax:r}){var o=t._Gx;t._Mx,void 0!==e&&(void 0===o.panxmin?o.panxmin=e:o.panxmin=Math.min(o.panxmin,e)),void 0!==i&&(void 0===o.panxmax?o.panxmax=i:o.panxmax=Math.max(o.panxmax,i)),void 0!==n&&(void 0===o.panymin?o.panymin=n:o.panymin=Math.min(o.panymin,n)),void 0!==r&&(void 0===o.panymax?o.panymax=r:o.panymax=Math.max(o.panymax,r))}function K(t,e,i){var n=t._Gx,r=t._Mx,o=h.pixel_to_real(r,e,i);return n.index&&(o.x=o.x*n.xdelta),o}function $(t,e,i,n,r,o,s,a){var l=[s-i,a-n],h=[r-i,o-n],c=[t-i,e-n],u=l[0]*l[0]+l[1]*l[1],d=l[0]*h[0]+l[1]*h[1],f=l[0]*c[0]+l[1]*c[1],p=h[0]*h[0]+h[1]*h[1],x=h[0]*c[0]+h[1]*c[1],m=1/(u*p-d*d),y=(p*f-d*x)*m,v=(u*x-d*f)*m;return y>=0&&v>=0&&y+v<1}function J(t,e){var i=!1,n=t._Gx,r=t._Mx,o=0,s=0;if(void 0===e){if(o=r.xpos,s=r.ypos,!t.mouseOnCanvas)return!1}else o=e.x,s=e.y;var a=" ";if(!n.pan)return!1;var h=o>r.r,c=s<=n.pt+n.pthk+2,u=s>n.pt-2,d=s>=r.t&&s<=r.b,f=o>=n.pl&&o<=n.pr,p=n.show_readout||"bottom"===n.x_scrollbar_location;return h&&d?(a="YPAN",n.lg_colorbar&&2===n.lyr[0].hcb.class?i=!!(o>r.r+100):(r.xpos=n.pyl+l.trunc(n.pthk/2),i=!0)):(p&&f&&u||!p&&f&&c)&&(a="XPAN",r.ypos=n.pt+l.trunc(n.pthk/2),i=!0),{inPanRegion:i,command:a}}function Z(t,e){var i,n,r;1&e.origin?(r=t.x-e.x,2&e.origin&&(r=e.w-r)):(r=t.y-e.y,e.origin<=2&&(r=e.h-r));var o=h.scroll_real2pix(e);return i=o.s1,n=o.sw,r>=i&&r<=i+n}function Q(t,e,i){var n,r=t._Mx;"XPAN"===i?n=r.scrollbar_x:"YPAN"===i&&(n=r.scrollbar_y),n.action=e,n.step=.1*n.srange,n.page=9*n.step,n.scale=2,h.scroll(r,n,h.XW_COMMAND,void 0,n),tt(t,n.smin,n.smin+n.srange,i.slice(0,1)),t.inPan=!0;var o=document.createEvent("Event");"XPAN"===i?o.initEvent("xpan",!0,!0):"YPAN"===i&&o.initEvent("ypan",!0,!0),o.level=r.level,o.xmin=r.stk[r.level].xmin,o.ymin=r.stk[r.level].ymin,o.xmax=r.stk[r.level].xmax,o.ymax=r.stk[r.level].ymax,h.dispatchEvent(r,o),t.inPan=!1}function tt(t,e,i,n){var r=t._Mx,o=t._Gx,s=r.level;if("X"===n){var a=e,l=i;r.stk[s].xmin===a&&r.stk[s].xmax===l||(r.stk[s].xmin=a,r.stk[s].xmax=l,o.xdata||1!==r.level||(o.xmin=r.stk[1].xmin,o.xmax=r.stk[1].xmax),t.refresh())}else if("Y"===n){var h=e,c=i;h===r.stk[s].ymin&&c===r.stk[s].ymax||(r.stk[s].ymin=h,r.stk[s].ymax=c,o.cmode===o.basemode&&1===r.level&&(o.ymin=Math.min(o.ymin,h),o.ymax=Math.max(o.ymax,c)),t.refresh())}}_.Plot=g,_.plugins={AccordionPlugin:p,AnnotationPlugin:x,BoxesPlugin:m,PlaybackControlsPlugin:y,SliderPlugin:v},t.exports=_}()},function(t,e,i){"use strict";i.r(e),i.d(e,"SigPlot",(function(){return c})),i.d(e,"ArrayLayer",(function(){return p})),i.d(e,"PipeLayer",(function(){return x})),i.d(e,"HrefLayer",(function(){return v})),i.d(e,"BlueLayer",(function(){return _})),i.d(e,"WebsocketLayer",(function(){return w})),i.d(e,"Layer",(function(){return f})),i.d(e,"Plugin",(function(){return S}));var n=i(2),r=i.n(n),o=i(1),s=i.n(o),a=i(6);function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class h extends n.Component{constructor(t){super(t),this.state={}}getChildContext(){return{plot:this.plot}}componentDidMount(){const{options:t}=this.props;this.plot=new a.Plot(this.element,t),this.setState({plot:this.plot})}UNSAFE_componentWillReceiveProps(t){const{height:e,width:i,options:n}=this.props,{height:r,width:o,options:s}=t;r===e&&o===i||this.plot.checkresize(),s!==n&&this.plot.change_settings(s)}render(){const{height:t,width:e,display:i,styles:n,children:o}=this.props,{plot:s}=this,a=s?r.a.Children.map(o,t=>t?r.a.cloneElement(t,{plot:s}):null):null;return r.a.createElement("div",{style:{height:t,width:e,display:i,...n},ref:t=>this.element=t},a)}}l(h,"propTypes",{children:s.a.node,height:s.a.number,width:s.a.number,display:s.a.string,styles:s.a.object,options:s.a.object}),l(h,"childContextTypes",{plot:s.a.instanceOf(a.Plot)}),l(h,"defaultProps",{height:300,width:300,display:"inline-block",options:{all:!0,expand:!0,autol:100,autohide_panbars:!0}});var c=h;function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class d extends n.Component{componentWillUnmount(){this.plot.remove_layer(this.layer)}get plot(){const{plot:t}=this.context;return t}render(){return!1}}u(d,"propTypes",{data:s.a.arrayOf(s.a.number),options:s.a.object,layerOptions:s.a.object}),u(d,"contextTypes",{plot:s.a.instanceOf(a.Plot)});var f=d,p=class extends f{componentDidMount(){const{data:t,options:e,layerOptions:i}=this.props;this.layer=this.plot.overlay_array(t,e,i)}UNSAFE_componentWillReceiveProps(t){const{data:e,options:i,layerOptions:n}=this.props,{data:r,options:o,layerOptions:s}=t;return r!==e?this.plot.reload(this.layer,r,o):o!==i?this.plot.headermod(this.layer,o):s!==n&&this.plot.get_layer(this.layer).change_settings(s),!1}},x=class extends f{componentDidMount(){const{options:t,data:e,layerOptions:i}=this.props;this.layer=this.plot.overlay_pipe(t,i),void 0!==e&&e.length>0&&this.plot.push(this.layer,e)}UNSAFE_componentWillReceiveProps(t){const{data:e,options:i,layerOptions:n}=this.props,{data:r,options:o,layerOptions:s}=t;return r&&r!==e?this.plot.push(this.layer,r,o):o!==i?this.plot.headermod(this.layer,o):s!==n&&this.plot.get_layer(this.layer).change_settings(s),!1}};function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class y extends f{componentDidMount(){const{href:t,onload:e,options:i}=this.props;this.layer=this.plot.overlay_href(t,e,i)}UNSAFE_componentWillReceiveProps(t){const{href:e,options:i}=this.props,{href:n,onload:r,options:o}=t;return n!==e?(this.plot.deoverlay(this.layer),this.layer=this.plot.overlay_href(n,r,o)):void 0!==this.layer&&o!==i&&this.plot.get_layer(this.layer).change_settings(o),!1}}m(y,"propTypes",{href:s.a.string,onload:s.a.func,options:s.a.object}),m(y,"defaultProps",{href:"",onload:null});var v=y,_=class extends f{componentDidMount(){const{data:t,layerOptions:e}=this.props;this.layer=this.plot.overlay_bluefile(t,e)}UNSAFE_componentWillReceiveProps(t){const{data:e,options:i,layerOptions:n}=this.props,{data:r,options:o,layerOptions:s}=t;return r!==e?this.plot.reload(this.layer,r,o):o!==i?this.plot.headermod(this.layer,o):s!==n&&this.plot.get_layer(this.layer).change_settings(s),!1}};function b(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class g extends f{componentDidMount(){const{wsurl:t,overrides:e,options:i}=this.props;this.layer=this.plot.overlay_websocket(t,e,i)}UNSAFE_componentWillReceiveProps(t){const{wsurl:e,options:i}=this.props,{wsurl:n,overrides:r,options:o}=t;return n!==e?(this.plot.deoverlay(this.layer),this.layer=this.plot.overlay_websocket(n,r,o)):void 0!==this.layer&&o!==i&&this.plot.get_layer(this.layer).change_settings(o),!1}}b(g,"propTypes",{wsurl:s.a.string,overrides:s.a.object,options:s.a.object}),b(g,"defaultProps",{wsurl:""});var w=g;function M(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class k extends n.Component{componentWillUnmount(){this.plot.remove_plugin(this.plugin)}get plot(){const{plot:t}=this.context;return t}render(){return!1}}M(k,"propTypes",{pluginOptions:s.a.object}),M(k,"contextTypes",{plot:s.a.instanceOf(a.Plot)});var S=k},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){window,t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t){t.exports=JSON.parse('{"a":"0.1.9"}')},function(t,e,i){t.exports=i(2)},function(t,e,i){"use strict";i.r(e),i.d(e,"bluefile",(function(){return n})),i.d(e,"matfile",(function(){return r})),i.d(e,"version",(function(){return O.a}));var n={};i.r(n),i.d(n,"BlueHeader",(function(){return g})),i.d(n,"BlueFileReader",(function(){return w}));var r={};i.r(r),i.d(r,"MatHeader",(function(){return L})),i.d(r,"MatFileReader",(function(){return T}));var o=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e instanceof ArrayBuffer||"number"!=typeof e?(this.buffer=e,this.u8=new Uint8Array(e)):(this.buffer=new ArrayBuffer(e/8),this.u8=new Uint8Array(this.buffer)),new Proxy(this,{get:function(t,e){return t[e]?t[e]:t.getBit(e)},set:function(t,e,i){var n=parseInt(e);return!isNaN(n)&&(t.setBit(e,i),!0)}})}var e;return(e=[{key:"set",value:function(t){this.setArray(t)}},{key:"getBit",value:function(t){return this.u8[t>>3]>>7-(7&t)&1}},{key:"setBit",value:function(t,e){var i=7&t;e?this.u8[t>>3]|=128>>i:this.u8[t>>3]&=~(128>>i)}},{key:"setArray",value:function(t){for(var e=t.length,i=0;i<e;i++)this.setBit(i,t[i])}},{key:"subarray",value:function(t,e){var i=[];t=(t=t||0)<0?0:t,e=(e=e||this.length)>this.length?this.length:e;for(var n=t;n<e;n++)i.push(this.getBit(n));return i}},{key:"length",get:function(){return 8*this.u8.byteLength}}])&&function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}();function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function l(){var t=new ArrayBuffer(4),e=new Uint32Array(t),i=new Uint8Array(t);if(e[0]=3735928559,239===i[0])return"LE";if(222===i[0])return"BE";throw new Error("unknown endianness")}function h(t,e,i){var n=Math.pow(2,53),r=s(i?[4,0]:[0,4],2),o=r[0],a=r[1],l=t.getInt32(e+o,i),h=t.getInt32(e+a,i)+u(32)*l;return h>=n?(console.warn("Int is bigger than JS can represent."),1/0):h}function c(t,e){var i=new Uint8Array(t);return void 0===c._applySupportsTypedArray&&(c._applySupportsTypedArray=void 0!==e?e:function(){try{var t=new Uint8Array(new ArrayBuffer(4));if(t[0]=66,t[1]=76,t[2]=85,t[3]=69,"BLUE"!==String.fromCharCode.apply(null,t))return!1}catch(t){return!1}return!0}()),c._applySupportsTypedArray?String.fromCharCode.apply(null,i):i.reduce((function(t,e){return t+String.fromCharCode(e)}),"")}function u(t){return t>=0&&t<31?1<<t:u[t]||(u[t]=Math.pow(2,t))}function d(t){var e=document.createElement("a");return e.href=t,{source:t,protocol:e.protocol.replace(":",""),host:e.hostname,port:e.port,query:e.search,params:function(){for(var t={},i=e.search.replace(/^\?/,"").split("&"),n=i.length,r=0;r<n;r++)if(i[r]){var o=i[r].split("=");t[o[0]]=o[1]}return t}(),file:(e.pathname.match(/\/([^/?#]+)$/i)||[null,""])[1],hash:e.hash.replace("#",""),path:e.pathname.replace(/^([^/])/,"/$1"),relative:(e.href.match(/tps?:\/\/[^/]+(.+)/)||[null,""])[1],segments:e.pathname.replace(/^\//,"").split("/")}}var f=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.header_class=e,this.options=i}var e;return(e=[{key:"_read",value:function(t,e,i){var n=this,r=new FileReader,o=void 0===t.webkitSlice?"slice":"webkitSlice",s=i?t[o](0,512):t;r.onloadend=function(t){return function(i){if(i.target.error)e(null);else{var o=r.result,s=new n.header_class(o,n.options);s.file=t,s.file_name=t.name,e(s)}}}(t),r.readAsArrayBuffer(s)}},{key:"readheader",value:function(t,e){this._read(t,e,!0)}},{key:"read",value:function(t,e){this._read(t,e,!1)}},{key:"read_http",value:function(t,e){var i=this,n=new XMLHttpRequest;return n.open("GET",t,!0),n.responseType="arraybuffer",n.overrideMimeType("text/plain; charset=x-user-defined"),n.onload=function(r){if(4!==n.readyState||200!==n.status&&0!==n.status)e(null);else{var o=null;if(n.response){o=n.response;var s=new i.header_class(o,i.options),a=d(t);s.file_name=a.file,e(s)}else n.responseText&&function(t,e,i){i=i||1024;var n=0,r=new ArrayBuffer(t.length),o=new Uint8Array(r);setTimeout((function s(){for(var a=n+i;n<a;n++)o[n]=255&t.charCodeAt(n);n>=t.length?e(r):setTimeout(s,0)}),0)}(n.responseText,(function(n){var r=new i.header_class(n,i.options),o=d(t);r.file_name=o.file,e(r)}))}},n.onerror=function(t){e(null)},n.send(null),n}}])&&function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}();function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var g=function(){function t(e,i){if(_(this,t),void 0===i&&(i={}),this.options=Object.assign({ext_header_type:"dict"},i),this.buf=e,null!=this.buf){this.setHeader();var n=this.data_start,r=this.data_start+this.data_size;this.setData(this.buf,n,r,this.littleEndianData)}}var e;return(e=[{key:"setHeader",value:function(){var t=new DataView(this.buf);this.version=c(this.buf.slice(0,4)),this.headrep=c(this.buf.slice(4,8)),this.datarep=c(this.buf.slice(8,12));var e="EEEI"===this.headrep;this.littleEndianData="EEEI"===this.datarep,this.ext_start=t.getInt32(24,e),this.ext_size=t.getInt32(28,e),this.type=t.getUint32(48,e),this.class=this.type/1e3,this.format=c(this.buf.slice(52,54)),this.timecode=t.getFloat64(56,e),1===this.class?(this.xstart=t.getFloat64(256,e),this.xdelta=t.getFloat64(264,e),this.xunits=t.getInt32(272,e),this.yunits=t.getInt32(296,e),this.subsize=1):2===this.class&&(this.xstart=t.getFloat64(256,e),this.xdelta=t.getFloat64(264,e),this.xunits=t.getInt32(272,e),this.subsize=t.getInt32(276,e),this.ystart=t.getFloat64(280,e),this.ydelta=t.getFloat64(288,e),this.yunits=t.getInt32(296,e)),this.data_start=t.getFloat64(32,e),this.data_size=t.getFloat64(40,e),this.ext_size&&(this.ext_header=this.unpack_keywords(this.buf,this.ext_size,512*this.ext_start,e))}},{key:"setData",value:function(e,i,n,r){void 0===r&&(r="LE"===t.ARRAY_BUFFER_ENDIANNESS),this.spa=t._SPA[this.format[0]],this.bps=t._BPS[this.format[1]],this.bpa=this.spa*this.bps,1===this.class?this.ape=1:2===this.class&&(this.ape=this.subsize),this.bpe=this.ape*this.bpa;var o="LE"===t.ARRAY_BUFFER_ENDIANNESS,s="BE"===t.ARRAY_BUFFER_ENDIANNESS;if(o&&!r||s&&this.littleEndianData)throw"Not supported ".concat(t.ARRAY_BUFFER_ENDIANNESS," ").concat(r);if(e){if(i&&n){var a=(n-i)/this.bps;this.dview=this.createArray(e,i,a)}else this.dview=this.createArray(e);this.size=this.dview.length/(this.spa*this.ape)}else this.dview=this.createArray(null,null,this.size)}},{key:"unpack_keywords",value:function(e,i,n,r){var o,s,a,l,h,u,d,f,p,x=[],m={},y={},_=0;e=e.slice(n,e.byteLength);var b=new DataView(e);for(e=c(e);_<i;){if(p=_+8,o=b.getUint32(_,r),s=b.getInt16(_+4,r),a=b.getInt8(_+6),l=e.slice(_+7,_+8),f=p+(d=o-s),h=e.slice(f,f+a),"A"===l)u=e.slice(p,p+d);else{if(!t._XM_TO_DATAVIEW[l])throw"Unsupported keyword format ".concat(l," for tag ").concat(h);var g=t._XM_TO_DATAVIEW[l];u="string"==typeof g?b[g](p,r):g(b,p,r)}void 0===m[h]?m[h]=1:(m[h]++,h=""+h+m[h]),y[h]=u,x.push({tag:h,value:u}),_+=o}var w=["dict","json",{},"XMTable","JSON","DICT"],M=this.options.ext_header_type;if("object"===v(M)&&null!==M&&0===Object.keys(M).length&&M.constructor===Object)return y;for(var k in w)if(w[k]===M)return y;return x}},{key:"createArray",value:function(e,i,n){var r,o=t._XM_TO_TYPEDARRAY[this.format[1]];if(void 0===o)throw"unknown format ".concat(this.format[1]);if(void 0===i&&(i=0),void 0===n&&(n=e.length||e.byteLength/t._BPS[this.format[1]]),e)if(Array.isArray(e)&&Array.isArray(e[0]))r=new o(e=[].concat.apply([],e),i,n=e.length*e[0].length);else if(Array.isArray(e)&&ArrayBuffer.isView(e[0])){r=new o(n=e.length*e[0].length);for(var s=0;s<e.length;++s)r.set(e[s],s*e[0].length)}else r=new o(e,i,n);else r=new o(n);return r}}])&&function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}();b(g,"ARRAY_BUFFER_ENDIANNESS",l()),b(g,"_SPA",{S:1,C:2,V:3,Q:4,M:9,X:10,T:16,U:1,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9}),b(g,"_BPS",{P:.125,A:1,O:1,B:1,I:2,L:4,X:8,F:4,D:8}),b(g,"_XM_TO_TYPEDARRAY",{P:o,A:null,O:Uint8Array,B:Int8Array,I:Int16Array,L:Int32Array,X:null,F:Float32Array,D:Float64Array}),b(g,"_XM_TO_DATAVIEW",{P:null,A:null,O:"getUint8",B:"getInt8",I:"getInt16",L:"getInt32",X:h,F:"getFloat32",D:"getFloat64"});var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(n,t);var e,i=(e=n,function(){var t,i=y(e);if(m()){var n=y(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return x(this,t)});function n(t){return _(this,n),i.call(this,g,t)}return n}(f);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t,e){return!e||"object"!==M(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var L=function(){function t(e){if(z(this,t),this.file=null,this.file_name=null,this.buf=e,null!=this.buf){var i=new DataView(this.buf);this.headerStr=c(this.buf.slice(t.headerTextBegin-1,t.headerTextEnd)),this.datarep=c(this.buf.slice(t.endianCharsBegin-1,t.endianCharsEnd));var n="IM"===this.datarep,r="IM"===this.datarep;this.headerList=this.headerStr.split(",").map((function(t){return t.trim()})),this.matfile=this.headerList[0],this.platform=this.headerList[1],this.createdOn=this.headerList[2],this.subsystemOffset=c(this.buf.slice(t.subsysOffsetBegin-1,t.subsysOffsetEnd)),this.version=i.getUint16(t.versionOffsetBegin-1,n),this.versionName=t.versionNames[this.version],this.dataType=i.getUint32(t.firstDataTypeOffsetBegin-1,n),this.dataTypeName=t.dataTypeNames[this.dataType].name,this.arraySize=i.getUint32(t.numBytesOffsetBegin-1,n),t.numBytesOffsetEnd;var o=t.numBytesOffsetEnd+1,s=i.getUint32(o-1,n),a=t.dataTypeNames[s].name,l=t.dataTypeNames[s].size;o+=4,this.getDataWithType(i,a,o-1,r),o+=l;var h=this.getDataWithType(i,a,o-1,r);o+=l;var u=15&h;t.arrayClassNames[u],o+=l;var d=i.getUint32(o-1,r);o+=4;var f=t.dataTypeNames[d].name,p=t.dataTypeNames[d].size;i.getUint32(o-1,r),o+=4;var x=this.getDataWithType(i,f,o-1,r);o+=p,x>1&&console.warn("Only 1D arrays are currently supported."),this.getDataWithType(i,f,o-1,r),o+=l;var m=i.getUint32(o-1,r);o+=4;var y=0,v=!1;m>15&&(m&=255,v=!0,y=i.getUint16(o-5,r));var _=t.dataTypeNames[m].name;t.dataTypeNames[m].size,v||(y=this.getDataWithType(i,_,o-1,r),o+=4),o+=y+(v?(4-y%4)%4:(8-y%8)%8),this.setData(this.buf,i,o,r)}}var e;return(e=[{key:"createArray",value:function(e,i,n,r){var o=t._MAT_TO_TYPEDARRAY[r];if(void 0===o)throw"unknown type ".concat(r);return void 0===i&&(i=0),void 0===n&&(n=e.length),new o(e,i,n)}},{key:"getDataWithType",value:function(e,i,n,r){var o=t._MAT_TO_DATAVIEW[i];if(void 0===o)throw"Type name ".concat(i," is not supported");return e[o](n,r)}},{key:"setData",value:function(e,i,n,r){var o,s=i.getUint32(n-1,r),a=!1;s>15?(s&=255,a=!0,o=i.getUint16(n+1,2,r)):n+=4;var l=t.dataTypeNames[s].name,h=t.dataTypeNames[s].size;a||(o=i.getUint32(n-1,r),a=!1),n+=4,this.dview=this.createArray(e,n-1,o/h,l)}}])&&function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}();C(L,"ARRAY_BUFFER_ENDIANNESS",l()),C(L,"versionNames",{256:"MAT-file"}),C(L,"_MAT_TO_TYPEDARRAY",{miINT8:Int8Array,miUINT8:Uint8Array,miInt16:Int16Array,miUINT16:Uint16Array,miINT32:Int32Array,miUINT32:Uint32Array,miDOUBLE:Float64Array}),C(L,"_MAT_TO_DATAVIEW",{miINT8:"getInt8",miUINT8:"getUint8",miINT16:"getInt16",miUINT16:"getUint16",miINT32:"getInt32",miUINT32:"getUint32",miSINGLE:"getFloat32",miDOUBLE:"getFloat64",miINT64:h}),C(L,"dataTypeNames",{1:{name:"miINT8",size:1},2:{name:"miUINT8",size:1},3:{name:"miINT16",size:2},4:{name:"miUINT16",size:2},5:{name:"miINT32",size:4},6:{name:"miUINT32",size:4},7:{name:"miSINGLE",size:4},9:{name:"miDOUBLE",size:8},12:{name:"miINT64",size:8},13:{name:"miUINT64",size:8},14:{name:"miMATRIX",size:null},15:{name:"miCOMPRESSED",size:null},16:{name:"miUTF8",size:null},17:{name:"miUTF16",size:null},18:{name:"miUTF32",size:null}}),C(L,"arrayClassNames",{1:"mxCELL_CLASS",2:"mxSTRUCT_CLASS",3:"mxOBJECT_CLASS",4:"mxCHAR_CLASS",5:"mxSPARSE_CLASS",6:"mxDOUBLE_CLASS",7:"mxSINGLE_CLASS",8:"mxINT8_CLASS",9:"mxUINT8_CLASS",10:"mxINT16_CLASS",11:"mxUINT16_CLASS",12:"mxINT32_CLASS",13:"mxUINT32_CLASS",14:"mxINT64_CLASS",15:"mxUINT64_CLASS"}),C(L,"headerTextBegin",1),C(L,"headerTextEnd",116),C(L,"subsysOffsetBegin",117),C(L,"subsysOffsetEnd",124),C(L,"versionOffsetBegin",125),C(L,"versionOffsetEnd",126),C(L,"endianCharsBegin",127),C(L,"endianCharsEnd",128),C(L,"firstDataTypeOffsetBegin",129),C(L,"firstDataTypeOffsetEnd",132),C(L,"numBytesOffsetBegin",133),C(L,"numBytesOffsetEnd",136);var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(n,t);var e,i=(e=n,function(){var t,i=A(e);if(E()){var n=A(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return S(this,t)});function n(t){return z(this,n),i.call(this,t,L)}return n}(f),O=i(0)}])},function(t,e,i){var n;!function(r){var o=/^\s+/,s=/\s+$/,a=0,l=r.round,h=r.min,c=r.max,u=r.random;function d(t,e){if(e=e||{},(t=t||"")instanceof d)return t;if(!(this instanceof d))return new d(t,e);var i=function(t){var e,i,n,a={r:0,g:0,b:0},l=1,u=null,d=null,f=null,p=!1,x=!1;return"string"==typeof t&&(t=function(t){t=t.replace(o,"").replace(s,"").toLowerCase();var e,i=!1;if(L[t])t=L[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=W.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=W.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=W.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=W.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=W.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=W.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=W.hex8.exec(t))?{r:R(e[1]),g:R(e[2]),b:R(e[3]),a:B(e[4]),format:i?"name":"hex8"}:(e=W.hex6.exec(t))?{r:R(e[1]),g:R(e[2]),b:R(e[3]),format:i?"name":"hex"}:(e=W.hex4.exec(t))?{r:R(e[1]+""+e[1]),g:R(e[2]+""+e[2]),b:R(e[3]+""+e[3]),a:B(e[4]+""+e[4]),format:i?"name":"hex8"}:!!(e=W.hex3.exec(t))&&{r:R(e[1]+""+e[1]),g:R(e[2]+""+e[2]),b:R(e[3]+""+e[3]),format:i?"name":"hex"}}(t)),"object"==typeof t&&(F(t.r)&&F(t.g)&&F(t.b)?(e=t.r,i=t.g,n=t.b,a={r:255*P(e,255),g:255*P(i,255),b:255*P(n,255)},p=!0,x="%"===String(t.r).substr(-1)?"prgb":"rgb"):F(t.h)&&F(t.s)&&F(t.v)?(u=D(t.s),d=D(t.v),a=function(t,e,i){t=6*P(t,360),e=P(e,100),i=P(i,100);var n=r.floor(t),o=t-n,s=i*(1-e),a=i*(1-o*e),l=i*(1-(1-o)*e),h=n%6;return{r:255*[i,a,s,s,l,i][h],g:255*[l,i,i,a,s,s][h],b:255*[s,s,l,i,i,a][h]}}(t.h,u,d),p=!0,x="hsv"):F(t.h)&&F(t.s)&&F(t.l)&&(u=D(t.s),f=D(t.l),a=function(t,e,i){var n,r,o;function s(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(t=P(t,360),e=P(e,100),i=P(i,100),0===e)n=r=o=i;else{var a=i<.5?i*(1+e):i+e-i*e,l=2*i-a;n=s(l,a,t+1/3),r=s(l,a,t),o=s(l,a,t-1/3)}return{r:255*n,g:255*r,b:255*o}}(t.h,u,f),p=!0,x="hsl"),t.hasOwnProperty("a")&&(l=t.a)),l=O(l),{ok:p,format:t.format||x,r:h(255,c(a.r,0)),g:h(255,c(a.g,0)),b:h(255,c(a.b,0)),a:l}}(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=l(100*this._a)/100,this._format=e.format||i.format,this._gradientType=e.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=i.ok,this._tc_id=a++}function f(t,e,i){t=P(t,255),e=P(e,255),i=P(i,255);var n,r,o=c(t,e,i),s=h(t,e,i),a=(o+s)/2;if(o==s)n=r=0;else{var l=o-s;switch(r=a>.5?l/(2-o-s):l/(o+s),o){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:r,l:a}}function p(t,e,i){t=P(t,255),e=P(e,255),i=P(i,255);var n,r,o=c(t,e,i),s=h(t,e,i),a=o,l=o-s;if(r=0===o?0:l/o,o==s)n=0;else{switch(o){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:r,v:a}}function x(t,e,i,n){var r=[I(l(t).toString(16)),I(l(e).toString(16)),I(l(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function m(t,e,i,n){return[I(N(n)),I(l(t).toString(16)),I(l(e).toString(16)),I(l(i).toString(16))].join("")}function y(t,e){e=0===e?0:e||10;var i=d(t).toHsl();return i.s-=e/100,i.s=G(i.s),d(i)}function v(t,e){e=0===e?0:e||10;var i=d(t).toHsl();return i.s+=e/100,i.s=G(i.s),d(i)}function _(t){return d(t).desaturate(100)}function b(t,e){e=0===e?0:e||10;var i=d(t).toHsl();return i.l+=e/100,i.l=G(i.l),d(i)}function g(t,e){e=0===e?0:e||10;var i=d(t).toRgb();return i.r=c(0,h(255,i.r-l(-e/100*255))),i.g=c(0,h(255,i.g-l(-e/100*255))),i.b=c(0,h(255,i.b-l(-e/100*255))),d(i)}function w(t,e){e=0===e?0:e||10;var i=d(t).toHsl();return i.l-=e/100,i.l=G(i.l),d(i)}function M(t,e){var i=d(t).toHsl(),n=(i.h+e)%360;return i.h=n<0?360+n:n,d(i)}function k(t){var e=d(t).toHsl();return e.h=(e.h+180)%360,d(e)}function S(t){var e=d(t).toHsl(),i=e.h;return[d(t),d({h:(i+120)%360,s:e.s,l:e.l}),d({h:(i+240)%360,s:e.s,l:e.l})]}function E(t){var e=d(t).toHsl(),i=e.h;return[d(t),d({h:(i+90)%360,s:e.s,l:e.l}),d({h:(i+180)%360,s:e.s,l:e.l}),d({h:(i+270)%360,s:e.s,l:e.l})]}function A(t){var e=d(t).toHsl(),i=e.h;return[d(t),d({h:(i+72)%360,s:e.s,l:e.l}),d({h:(i+216)%360,s:e.s,l:e.l})]}function z(t,e,i){e=e||6,i=i||30;var n=d(t).toHsl(),r=360/i,o=[d(t)];for(n.h=(n.h-(r*e>>1)+720)%360;--e;)n.h=(n.h+r)%360,o.push(d(n));return o}function C(t,e){e=e||6;for(var i=d(t).toHsv(),n=i.h,r=i.s,o=i.v,s=[],a=1/e;e--;)s.push(d({h:n,s:r,v:o})),o=(o+a)%1;return s}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,i,n=this.toRgb();return t=n.r/255,e=n.g/255,i=n.b/255,.2126*(t<=.03928?t/12.92:r.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:r.pow((e+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:r.pow((i+.055)/1.055,2.4))},setAlpha:function(t){return this._a=O(t),this._roundA=l(100*this._a)/100,this},toHsv:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=p(this._r,this._g,this._b),e=l(360*t.h),i=l(100*t.s),n=l(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=f(this._r,this._g,this._b),e=l(360*t.h),i=l(100*t.s),n=l(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return x(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,i,n,r){var o=[I(l(t).toString(16)),I(l(e).toString(16)),I(l(i).toString(16)),I(N(n))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*P(this._r,255))+"%",g:l(100*P(this._g,255))+"%",b:l(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*P(this._r,255))+"%, "+l(100*P(this._g,255))+"%, "+l(100*P(this._b,255))+"%)":"rgba("+l(100*P(this._r,255))+"%, "+l(100*P(this._g,255))+"%, "+l(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(T[x(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+m(this._r,this._g,this._b,this._a),i=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var r=d(t);i="#"+m(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex4"===t&&(i=this.toHex8String(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(M,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},d.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]="a"===n?t[n]:D(t[n]));t=i}return d(t,e)},d.equals=function(t,e){return!(!t||!e)&&d(t).toRgbString()==d(e).toRgbString()},d.random=function(){return d.fromRatio({r:u(),g:u(),b:u()})},d.mix=function(t,e,i){i=0===i?0:i||50;var n=d(t).toRgb(),r=d(e).toRgb(),o=i/100;return d({r:(r.r-n.r)*o+n.r,g:(r.g-n.g)*o+n.g,b:(r.b-n.b)*o+n.b,a:(r.a-n.a)*o+n.a})},d.readability=function(t,e){var i=d(t),n=d(e);return(r.max(i.getLuminance(),n.getLuminance())+.05)/(r.min(i.getLuminance(),n.getLuminance())+.05)},d.isReadable=function(t,e,i){var n,r,o=d.readability(t,e);switch(r=!1,(n=function(t){var e,i;return"AA"!==(e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==e&&(e="AA"),"small"!==(i=(t.size||"small").toLowerCase())&&"large"!==i&&(i="small"),{level:e,size:i}}(i)).level+n.size){case"AAsmall":case"AAAlarge":r=o>=4.5;break;case"AAlarge":r=o>=3;break;case"AAAsmall":r=o>=7}return r},d.mostReadable=function(t,e,i){var n,r,o,s,a=null,l=0;r=(i=i||{}).includeFallbackColors,o=i.level,s=i.size;for(var h=0;h<e.length;h++)(n=d.readability(t,e[h]))>l&&(l=n,a=d(e[h]));return d.isReadable(t,a,{level:o,size:s})||!r?a:(i.includeFallbackColors=!1,d.mostReadable(t,["#fff","#000"],i))};var L=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=d.hexNames=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}(L);function O(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function P(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var i=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=h(e,c(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),r.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function G(t){return h(1,c(0,t))}function R(t){return parseInt(t,16)}function I(t){return 1==t.length?"0"+t:""+t}function D(t){return t<=1&&(t=100*t+"%"),t}function N(t){return r.round(255*parseFloat(t)).toString(16)}function B(t){return R(t)/255}var U,j,H,W=(j="[\\s|\\(]+("+(U="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",H="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",{CSS_UNIT:new RegExp(U),rgb:new RegExp("rgb"+j),rgba:new RegExp("rgba"+H),hsl:new RegExp("hsl"+j),hsla:new RegExp("hsla"+H),hsv:new RegExp("hsv"+j),hsva:new RegExp("hsva"+H),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function F(t){return!!W.CSS_UNIT.exec(t)}t.exports?t.exports=d:void 0===(n=function(){return d}.call(e,i,e,t))||(t.exports=n)}(Math)},function(t,e,i){var n=i(27),r=i(28);function o(t){if(!(this instanceof o))return new o(t);"number"==typeof t&&(t={max:t}),t||(t={}),n.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=t.max||1e3,this.maxAge=t.maxAge||0}t.exports=o,r(o,n.EventEmitter),Object.defineProperty(o.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),o.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},o.prototype.remove=function(t){if("string"!=typeof t&&(t=""+t),this.cache.hasOwnProperty(t)){var e=this.cache[t];return delete this.cache[t],this._unlink(t,e.prev,e.next),e.value}},o.prototype._unlink=function(t,e,i){this.length--,0===this.length?this.head=this.tail=null:this.head===t?(this.head=e,this.cache[this.head].next=null):this.tail===t?(this.tail=i,this.cache[this.tail].prev=null):(this.cache[e].next=i,this.cache[i].prev=e)},o.prototype.peek=function(t){if(this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return e.value}},o.prototype.set=function(t,e){var i;if("string"!=typeof t&&(t=""+t),this.cache.hasOwnProperty(t)){if((i=this.cache[t]).value=e,this.maxAge&&(i.modified=Date.now()),t===this.head)return e;this._unlink(t,i.prev,i.next)}else i={value:e,modified:0,next:null,prev:null},this.maxAge&&(i.modified=Date.now()),this.cache[t]=i,this.length===this.max&&this.evict();return this.length++,i.next=null,i.prev=this.head,this.head&&(this.cache[this.head].next=t),this.head=t,this.tail||(this.tail=t),e},o.prototype._checkAge=function(t,e){return!(this.maxAge&&Date.now()-e.modified>this.maxAge&&(this.remove(t),this.emit("evict",{key:t,value:e.value}),1))},o.prototype.get=function(t){if("string"!=typeof t&&(t=""+t),this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return this.head!==t&&(t===this.tail?(this.tail=e.next,this.cache[this.tail].prev=null):this.cache[e.prev].next=e.next,this.cache[e.next].prev=e.prev,this.cache[this.head].next=t,e.prev=this.head,e.next=null,this.head=t),e.value}},o.prototype.evict=function(){if(this.tail){var t=this.tail,e=this.remove(this.tail);this.emit("evict",{key:t,value:e})}}},function(t,e,i){!function(){var e=i(4);i(5),t.exports={Plugin:class{pluginConstructor(){}pluginInit(){}pluginDispose(){}pluginRefresh(){}pluginGetMenu(){}constructor(t){return this.initial_properties=t,this.properties={},this._plot=void 0,this._canvas=void 0,this.defineProperty("display",{defaultValue:!0,refreshOnChange:!0,help:"changes if the plugin is rendered on the plot or not"}),this.pluginSetup(),this}init(t,e){if(this._plot)throw"Plugins can only be added to one plot at a time";this._plot=t,this._canvas=e,this.properties={},this.resetProperties(this.initial_properties),this.pluginInit()}get plot(){return this._plot}get Mx(){return this._plot?this._plot._Mx:null}get Gx(){return this._plot?this._plot._Gx:null}get canvas(){return this._canvas}get Context(){return this._canvas?this._canvas.getContext("2d"):null}dispose(){this.pluginDispose(),this._plot=void 0,this._canvas=void 0,this.properties={}}refresh(){this._plot&&this._canvas&&this.properties.display&&this.pluginRefresh(this.canvas)}menu(){return this.pluginGetMenu()}defineProperty(t,e){void 0===this.definedproperties&&(this.definedproperties={}),e=e||{},this.definedproperties[t]=e,this[t]=function(){if(!arguments.length)return this.properties[t];if(e.readonly)throw"property "+t+" is readonly";return this.properties[t]!==arguments[0]?(this.properties[t]=arguments[0],e.callback&&e.callback(arguments[0]),e.refreshOnChange&&this.refresh(),this):void 0}}resetProperties(t){for(let t in this.definedproperties)this.properties[t]=this.definedproperties[t].defaultValue;this.assignProperties(t)}assignProperties(t){let e=!1;for(let i in t)if(this.definedproperties.hasOwnProperty(i)&&this.properties[i]!==t[i]){if(this.definedproperties[i].readonly)throw"property "+i+" is readonly";this.properties[i]=t[i],this.definedproperties[i].callback&&this.definedproperties[i].callback(t[i]),!0===this.definedproperties[i].refreshOnChange&&(e=!0)}e&&this.refresh()}on(t,e,i){this._events||(this._events={}),this._events[t]||(this._events[t]=[]),i===this&&(i=void 0),this._events[t].push({cb:e,ctx:i})}emit(t,e){var i=Object.assign({},e,{type:t,target:this});if(this._events){var n=this._events[t];if(n)for(var r=0,o=n.length;r<o;r++){var s=n[r];s.cb.call(s.ctx||this,i)}}return this}off(t,e,i){var n,r,o;if(t||delete this._events,this._events&&(n=this._events[t])){if(i===this&&(i=void 0),n)for(r=0,o=n.length;r<o;r++){var s=n[r];if(s.ctx===i&&s.fn===e)return void n.splice(r,1)}return this}}addListener(t,i){if(!this.Mx)throw"listeners cannot be added until pluginInit is called";e.addEventListener(this.Mx,t,i,!1)}removeListener(t,i){if(!this.Mx)throw"listeners cannot be removed until pluginInit is called";e.removeEventListener(this.Mx,t,i,!1)}}}}()},function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return _i})),i.d(e,"VERSION",(function(){return r.e})),i.d(e,"restArguments",(function(){return o})),i.d(e,"isObject",(function(){return s})),i.d(e,"isNull",(function(){return a})),i.d(e,"isUndefined",(function(){return l})),i.d(e,"isBoolean",(function(){return h})),i.d(e,"isElement",(function(){return c})),i.d(e,"isString",(function(){return d})),i.d(e,"isNumber",(function(){return f})),i.d(e,"isDate",(function(){return p})),i.d(e,"isRegExp",(function(){return x})),i.d(e,"isError",(function(){return m})),i.d(e,"isSymbol",(function(){return y})),i.d(e,"isArrayBuffer",(function(){return v})),i.d(e,"isDataView",(function(){return E})),i.d(e,"isArray",(function(){return A})),i.d(e,"isFunction",(function(){return g})),i.d(e,"isArguments",(function(){return L})),i.d(e,"isFinite",(function(){return T})),i.d(e,"isNaN",(function(){return O})),i.d(e,"isTypedArray",(function(){return B})),i.d(e,"isEmpty",(function(){return W})),i.d(e,"isMatch",(function(){return F})),i.d(e,"isEqual",(function(){return V})),i.d(e,"isMap",(function(){return it})),i.d(e,"isWeakMap",(function(){return nt})),i.d(e,"isSet",(function(){return rt})),i.d(e,"isWeakSet",(function(){return ot})),i.d(e,"keys",(function(){return H})),i.d(e,"allKeys",(function(){return q})),i.d(e,"values",(function(){return st})),i.d(e,"pairs",(function(){return at})),i.d(e,"invert",(function(){return lt})),i.d(e,"functions",(function(){return ht})),i.d(e,"methods",(function(){return ht})),i.d(e,"extend",(function(){return ut})),i.d(e,"extendOwn",(function(){return dt})),i.d(e,"assign",(function(){return dt})),i.d(e,"defaults",(function(){return ft})),i.d(e,"create",(function(){return xt})),i.d(e,"clone",(function(){return mt})),i.d(e,"tap",(function(){return yt})),i.d(e,"get",(function(){return gt})),i.d(e,"has",(function(){return wt})),i.d(e,"mapObject",(function(){return Lt})),i.d(e,"identity",(function(){return Mt})),i.d(e,"constant",(function(){return P})),i.d(e,"noop",(function(){return Tt})),i.d(e,"toPath",(function(){return vt})),i.d(e,"property",(function(){return St})),i.d(e,"propertyOf",(function(){return Ot})),i.d(e,"matcher",(function(){return kt})),i.d(e,"matches",(function(){return kt})),i.d(e,"times",(function(){return Pt})),i.d(e,"random",(function(){return Gt})),i.d(e,"now",(function(){return Rt})),i.d(e,"escape",(function(){return Nt})),i.d(e,"unescape",(function(){return Bt})),i.d(e,"templateSettings",(function(){return Ut})),i.d(e,"template",(function(){return Yt})),i.d(e,"result",(function(){return Xt})),i.d(e,"uniqueId",(function(){return qt})),i.d(e,"chain",(function(){return Kt})),i.d(e,"iteratee",(function(){return zt})),i.d(e,"partial",(function(){return Zt})),i.d(e,"bind",(function(){return Qt})),i.d(e,"bindAll",(function(){return ie})),i.d(e,"memoize",(function(){return ne})),i.d(e,"delay",(function(){return re})),i.d(e,"defer",(function(){return oe})),i.d(e,"throttle",(function(){return se})),i.d(e,"debounce",(function(){return ae})),i.d(e,"wrap",(function(){return le})),i.d(e,"negate",(function(){return he})),i.d(e,"compose",(function(){return ce})),i.d(e,"after",(function(){return ue})),i.d(e,"before",(function(){return de})),i.d(e,"once",(function(){return fe})),i.d(e,"findKey",(function(){return pe})),i.d(e,"findIndex",(function(){return me})),i.d(e,"findLastIndex",(function(){return ye})),i.d(e,"sortedIndex",(function(){return ve})),i.d(e,"indexOf",(function(){return be})),i.d(e,"lastIndexOf",(function(){return ge})),i.d(e,"find",(function(){return we})),i.d(e,"detect",(function(){return we})),i.d(e,"findWhere",(function(){return Me})),i.d(e,"each",(function(){return ke})),i.d(e,"forEach",(function(){return ke})),i.d(e,"map",(function(){return Se})),i.d(e,"collect",(function(){return Se})),i.d(e,"reduce",(function(){return Ae})),i.d(e,"foldl",(function(){return Ae})),i.d(e,"inject",(function(){return Ae})),i.d(e,"reduceRight",(function(){return ze})),i.d(e,"foldr",(function(){return ze})),i.d(e,"filter",(function(){return Ce})),i.d(e,"select",(function(){return Ce})),i.d(e,"reject",(function(){return Le})),i.d(e,"every",(function(){return Te})),i.d(e,"all",(function(){return Te})),i.d(e,"some",(function(){return Oe})),i.d(e,"any",(function(){return Oe})),i.d(e,"contains",(function(){return Pe})),i.d(e,"includes",(function(){return Pe})),i.d(e,"include",(function(){return Pe})),i.d(e,"invoke",(function(){return Ge})),i.d(e,"pluck",(function(){return Re})),i.d(e,"where",(function(){return Ie})),i.d(e,"max",(function(){return De})),i.d(e,"min",(function(){return Ne})),i.d(e,"shuffle",(function(){return Ue})),i.d(e,"sample",(function(){return Be})),i.d(e,"sortBy",(function(){return je})),i.d(e,"groupBy",(function(){return We})),i.d(e,"indexBy",(function(){return Fe})),i.d(e,"countBy",(function(){return Ye})),i.d(e,"partition",(function(){return Xe})),i.d(e,"toArray",(function(){return qe})),i.d(e,"size",(function(){return Ke})),i.d(e,"pick",(function(){return Je})),i.d(e,"omit",(function(){return Ze})),i.d(e,"first",(function(){return ti})),i.d(e,"head",(function(){return ti})),i.d(e,"take",(function(){return ti})),i.d(e,"initial",(function(){return Qe})),i.d(e,"last",(function(){return ii})),i.d(e,"rest",(function(){return ei})),i.d(e,"tail",(function(){return ei})),i.d(e,"drop",(function(){return ei})),i.d(e,"compact",(function(){return ni})),i.d(e,"flatten",(function(){return ri})),i.d(e,"without",(function(){return si})),i.d(e,"uniq",(function(){return ai})),i.d(e,"unique",(function(){return ai})),i.d(e,"union",(function(){return li})),i.d(e,"intersection",(function(){return hi})),i.d(e,"difference",(function(){return oi})),i.d(e,"unzip",(function(){return ci})),i.d(e,"transpose",(function(){return ci})),i.d(e,"zip",(function(){return ui})),i.d(e,"object",(function(){return di})),i.d(e,"range",(function(){return fi})),i.d(e,"chunk",(function(){return pi})),i.d(e,"mixin",(function(){return mi}));var n={};i.r(n),i.d(n,"VERSION",(function(){return r.e})),i.d(n,"restArguments",(function(){return o})),i.d(n,"isObject",(function(){return s})),i.d(n,"isNull",(function(){return a})),i.d(n,"isUndefined",(function(){return l})),i.d(n,"isBoolean",(function(){return h})),i.d(n,"isElement",(function(){return c})),i.d(n,"isString",(function(){return d})),i.d(n,"isNumber",(function(){return f})),i.d(n,"isDate",(function(){return p})),i.d(n,"isRegExp",(function(){return x})),i.d(n,"isError",(function(){return m})),i.d(n,"isSymbol",(function(){return y})),i.d(n,"isArrayBuffer",(function(){return v})),i.d(n,"isDataView",(function(){return E})),i.d(n,"isArray",(function(){return A})),i.d(n,"isFunction",(function(){return g})),i.d(n,"isArguments",(function(){return L})),i.d(n,"isFinite",(function(){return T})),i.d(n,"isNaN",(function(){return O})),i.d(n,"isTypedArray",(function(){return B})),i.d(n,"isEmpty",(function(){return W})),i.d(n,"isMatch",(function(){return F})),i.d(n,"isEqual",(function(){return V})),i.d(n,"isMap",(function(){return it})),i.d(n,"isWeakMap",(function(){return nt})),i.d(n,"isSet",(function(){return rt})),i.d(n,"isWeakSet",(function(){return ot})),i.d(n,"keys",(function(){return H})),i.d(n,"allKeys",(function(){return q})),i.d(n,"values",(function(){return st})),i.d(n,"pairs",(function(){return at})),i.d(n,"invert",(function(){return lt})),i.d(n,"functions",(function(){return ht})),i.d(n,"methods",(function(){return ht})),i.d(n,"extend",(function(){return ut})),i.d(n,"extendOwn",(function(){return dt})),i.d(n,"assign",(function(){return dt})),i.d(n,"defaults",(function(){return ft})),i.d(n,"create",(function(){return xt})),i.d(n,"clone",(function(){return mt})),i.d(n,"tap",(function(){return yt})),i.d(n,"get",(function(){return gt})),i.d(n,"has",(function(){return wt})),i.d(n,"mapObject",(function(){return Lt})),i.d(n,"identity",(function(){return Mt})),i.d(n,"constant",(function(){return P})),i.d(n,"noop",(function(){return Tt})),i.d(n,"toPath",(function(){return vt})),i.d(n,"property",(function(){return St})),i.d(n,"propertyOf",(function(){return Ot})),i.d(n,"matcher",(function(){return kt})),i.d(n,"matches",(function(){return kt})),i.d(n,"times",(function(){return Pt})),i.d(n,"random",(function(){return Gt})),i.d(n,"now",(function(){return Rt})),i.d(n,"escape",(function(){return Nt})),i.d(n,"unescape",(function(){return Bt})),i.d(n,"templateSettings",(function(){return Ut})),i.d(n,"template",(function(){return Yt})),i.d(n,"result",(function(){return Xt})),i.d(n,"uniqueId",(function(){return qt})),i.d(n,"chain",(function(){return Kt})),i.d(n,"iteratee",(function(){return zt})),i.d(n,"partial",(function(){return Zt})),i.d(n,"bind",(function(){return Qt})),i.d(n,"bindAll",(function(){return ie})),i.d(n,"memoize",(function(){return ne})),i.d(n,"delay",(function(){return re})),i.d(n,"defer",(function(){return oe})),i.d(n,"throttle",(function(){return se})),i.d(n,"debounce",(function(){return ae})),i.d(n,"wrap",(function(){return le})),i.d(n,"negate",(function(){return he})),i.d(n,"compose",(function(){return ce})),i.d(n,"after",(function(){return ue})),i.d(n,"before",(function(){return de})),i.d(n,"once",(function(){return fe})),i.d(n,"findKey",(function(){return pe})),i.d(n,"findIndex",(function(){return me})),i.d(n,"findLastIndex",(function(){return ye})),i.d(n,"sortedIndex",(function(){return ve})),i.d(n,"indexOf",(function(){return be})),i.d(n,"lastIndexOf",(function(){return ge})),i.d(n,"find",(function(){return we})),i.d(n,"detect",(function(){return we})),i.d(n,"findWhere",(function(){return Me})),i.d(n,"each",(function(){return ke})),i.d(n,"forEach",(function(){return ke})),i.d(n,"map",(function(){return Se})),i.d(n,"collect",(function(){return Se})),i.d(n,"reduce",(function(){return Ae})),i.d(n,"foldl",(function(){return Ae})),i.d(n,"inject",(function(){return Ae})),i.d(n,"reduceRight",(function(){return ze})),i.d(n,"foldr",(function(){return ze})),i.d(n,"filter",(function(){return Ce})),i.d(n,"select",(function(){return Ce})),i.d(n,"reject",(function(){return Le})),i.d(n,"every",(function(){return Te})),i.d(n,"all",(function(){return Te})),i.d(n,"some",(function(){return Oe})),i.d(n,"any",(function(){return Oe})),i.d(n,"contains",(function(){return Pe})),i.d(n,"includes",(function(){return Pe})),i.d(n,"include",(function(){return Pe})),i.d(n,"invoke",(function(){return Ge})),i.d(n,"pluck",(function(){return Re})),i.d(n,"where",(function(){return Ie})),i.d(n,"max",(function(){return De})),i.d(n,"min",(function(){return Ne})),i.d(n,"shuffle",(function(){return Ue})),i.d(n,"sample",(function(){return Be})),i.d(n,"sortBy",(function(){return je})),i.d(n,"groupBy",(function(){return We})),i.d(n,"indexBy",(function(){return Fe})),i.d(n,"countBy",(function(){return Ye})),i.d(n,"partition",(function(){return Xe})),i.d(n,"toArray",(function(){return qe})),i.d(n,"size",(function(){return Ke})),i.d(n,"pick",(function(){return Je})),i.d(n,"omit",(function(){return Ze})),i.d(n,"first",(function(){return ti})),i.d(n,"head",(function(){return ti})),i.d(n,"take",(function(){return ti})),i.d(n,"initial",(function(){return Qe})),i.d(n,"last",(function(){return ii})),i.d(n,"rest",(function(){return ei})),i.d(n,"tail",(function(){return ei})),i.d(n,"drop",(function(){return ei})),i.d(n,"compact",(function(){return ni})),i.d(n,"flatten",(function(){return ri})),i.d(n,"without",(function(){return si})),i.d(n,"uniq",(function(){return ai})),i.d(n,"unique",(function(){return ai})),i.d(n,"union",(function(){return li})),i.d(n,"intersection",(function(){return hi})),i.d(n,"difference",(function(){return oi})),i.d(n,"unzip",(function(){return ci})),i.d(n,"transpose",(function(){return ci})),i.d(n,"zip",(function(){return ui})),i.d(n,"object",(function(){return di})),i.d(n,"range",(function(){return fi})),i.d(n,"chunk",(function(){return pi})),i.d(n,"mixin",(function(){return mi})),i.d(n,"default",(function(){return yi}));var r=i(0);function o(t,e){return e=null==e?t.length-1:+e,function(){for(var i=Math.max(arguments.length-e,0),n=Array(i),r=0;r<i;r++)n[r]=arguments[r+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var o=Array(e+1);for(r=0;r<e;r++)o[r]=arguments[r];return o[e]=n,t.apply(this,o)}}function s(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function a(t){return null===t}function l(t){return void 0===t}function h(t){return!0===t||!1===t||"[object Boolean]"===r.t.call(t)}function c(t){return!(!t||1!==t.nodeType)}function u(t){var e="[object "+t+"]";return function(t){return r.t.call(t)===e}}var d=u("String"),f=u("Number"),p=u("Date"),x=u("RegExp"),m=u("Error"),y=u("Symbol"),v=u("ArrayBuffer"),_=u("Function"),b=r.p.document&&r.p.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof b&&(_=function(t){return"function"==typeof t||!1});var g=_,w=u("Object"),M=r.s&&w(new DataView(new ArrayBuffer(8))),k="undefined"!=typeof Map&&w(new Map),S=u("DataView"),E=M?function(t){return null!=t&&g(t.getInt8)&&v(t.buffer)}:S,A=r.k||u("Array");function z(t,e){return null!=t&&r.i.call(t,e)}var C=u("Arguments");!function(){C(arguments)||(C=function(t){return z(t,"callee")})}();var L=C;function T(t){return!y(t)&&Object(r.f)(t)&&!isNaN(parseFloat(t))}function O(t){return f(t)&&Object(r.g)(t)}function P(t){return function(){return t}}function G(t){return function(e){var i=t(e);return"number"==typeof i&&i>=0&&i<=r.b}}function R(t){return function(e){return null==e?void 0:e[t]}}var I=R("byteLength"),D=G(I),N=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,B=r.r?function(t){return r.l?Object(r.l)(t)&&!E(t):D(t)&&N.test(r.t.call(t))}:P(!1),U=R("length");function j(t,e){e=function(t){for(var e={},i=t.length,n=0;n<i;++n)e[t[n]]=!0;return{contains:function(t){return e[t]},push:function(i){return e[i]=!0,t.push(i)}}}(e);var i=r.n.length,n=t.constructor,o=g(n)&&n.prototype||r.c,s="constructor";for(z(t,s)&&!e.contains(s)&&e.push(s);i--;)(s=r.n[i])in t&&t[s]!==o[s]&&!e.contains(s)&&e.push(s)}function H(t){if(!s(t))return[];if(r.m)return Object(r.m)(t);var e=[];for(var i in t)z(t,i)&&e.push(i);return r.h&&j(t,e),e}function W(t){if(null==t)return!0;var e=U(t);return"number"==typeof e&&(A(t)||d(t)||L(t))?0===e:0===U(H(t))}function F(t,e){var i=H(e),n=i.length;if(null==t)return!n;for(var r=Object(t),o=0;o<n;o++){var s=i[o];if(e[s]!==r[s]||!(s in r))return!1}return!0}function Y(t){return t instanceof Y?t:this instanceof Y?void(this._wrapped=t):new Y(t)}function X(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,I(t))}function V(t,e){return function t(e,i,n,o){if(e===i)return 0!==e||1/e==1/i;if(null==e||null==i)return!1;if(e!=e)return i!=i;var s=typeof e;return("function"===s||"object"===s||"object"==typeof i)&&function e(i,n,o,s){i instanceof Y&&(i=i._wrapped),n instanceof Y&&(n=n._wrapped);var a=r.t.call(i);if(a!==r.t.call(n))return!1;if(M&&"[object Object]"==a&&E(i)){if(!E(n))return!1;a="[object DataView]"}switch(a){case"[object RegExp]":case"[object String]":return""+i==""+n;case"[object Number]":return+i!=+i?+n!=+n:0==+i?1/+i==1/n:+i==+n;case"[object Date]":case"[object Boolean]":return+i==+n;case"[object Symbol]":return r.d.valueOf.call(i)===r.d.valueOf.call(n);case"[object ArrayBuffer]":case"[object DataView]":return e(X(i),X(n),o,s)}var l="[object Array]"===a;if(!l&&B(i)){if(I(i)!==I(n))return!1;if(i.buffer===n.buffer&&i.byteOffset===n.byteOffset)return!0;l=!0}if(!l){if("object"!=typeof i||"object"!=typeof n)return!1;var h=i.constructor,c=n.constructor;if(h!==c&&!(g(h)&&h instanceof h&&g(c)&&c instanceof c)&&"constructor"in i&&"constructor"in n)return!1}s=s||[];for(var u=(o=o||[]).length;u--;)if(o[u]===i)return s[u]===n;if(o.push(i),s.push(n),l){if((u=i.length)!==n.length)return!1;for(;u--;)if(!t(i[u],n[u],o,s))return!1}else{var d,f=H(i);if(u=f.length,H(n).length!==u)return!1;for(;u--;)if(!z(n,d=f[u])||!t(i[d],n[d],o,s))return!1}return o.pop(),s.pop(),!0}(e,i,n,o)}(t,e)}function q(t){if(!s(t))return[];var e=[];for(var i in t)e.push(i);return r.h&&j(t,e),e}function K(t){var e=U(t);return function(i){if(null==i)return!1;var n=q(i);if(U(n))return!1;for(var r=0;r<e;r++)if(!g(i[t[r]]))return!1;return t!==tt||!g(i[$])}}Y.VERSION=r.e,Y.prototype.value=function(){return this._wrapped},Y.prototype.valueOf=Y.prototype.toJSON=Y.prototype.value,Y.prototype.toString=function(){return String(this._wrapped)};var $="forEach",J=["clear","delete"],Z=["get","has","set"],Q=J.concat($,Z),tt=J.concat(Z),et=["add"].concat(J,$,"has"),it=k?K(Q):u("Map"),nt=k?K(tt):u("WeakMap"),rt=k?K(et):u("Set"),ot=u("WeakSet");function st(t){for(var e=H(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=t[e[r]];return n}function at(t){for(var e=H(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=[e[r],t[e[r]]];return n}function lt(t){for(var e={},i=H(t),n=0,r=i.length;n<r;n++)e[t[i[n]]]=i[n];return e}function ht(t){var e=[];for(var i in t)g(t[i])&&e.push(i);return e.sort()}function ct(t,e){return function(i){var n=arguments.length;if(e&&(i=Object(i)),n<2||null==i)return i;for(var r=1;r<n;r++)for(var o=arguments[r],s=t(o),a=s.length,l=0;l<a;l++){var h=s[l];e&&void 0!==i[h]||(i[h]=o[h])}return i}}var ut=ct(q),dt=ct(H),ft=ct(q,!0);function pt(t){if(!s(t))return{};if(r.j)return Object(r.j)(t);var e=function(){};e.prototype=t;var i=new e;return e.prototype=null,i}function xt(t,e){var i=pt(t);return e&&dt(i,e),i}function mt(t){return s(t)?A(t)?t.slice():ut({},t):t}function yt(t,e){return e(t),t}function vt(t){return A(t)?t:[t]}function _t(t){return Y.toPath(t)}function bt(t,e){for(var i=e.length,n=0;n<i;n++){if(null==t)return;t=t[e[n]]}return i?t:void 0}function gt(t,e,i){var n=bt(t,_t(e));return l(n)?i:n}function wt(t,e){for(var i=(e=_t(e)).length,n=0;n<i;n++){var r=e[n];if(!z(t,r))return!1;t=t[r]}return!!i}function Mt(t){return t}function kt(t){return t=dt({},t),function(e){return F(e,t)}}function St(t){return t=_t(t),function(e){return bt(e,t)}}function Et(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)}}return function(){return t.apply(e,arguments)}}function At(t,e,i){return null==t?Mt:g(t)?Et(t,e,i):s(t)&&!A(t)?kt(t):St(t)}function zt(t,e){return At(t,e,1/0)}function Ct(t,e,i){return Y.iteratee!==zt?Y.iteratee(t,e):At(t,e,i)}function Lt(t,e,i){e=Ct(e,i);for(var n=H(t),r=n.length,o={},s=0;s<r;s++){var a=n[s];o[a]=e(t[a],a,t)}return o}function Tt(){}function Ot(t){return null==t?Tt:function(e){return gt(t,e)}}function Pt(t,e,i){var n=Array(Math.max(0,t));e=Et(e,i,1);for(var r=0;r<t;r++)n[r]=e(r);return n}function Gt(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}Y.toPath=vt,Y.iteratee=zt;var Rt=Date.now||function(){return(new Date).getTime()};function It(t){var e=function(e){return t[e]},i="(?:"+H(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}}var Dt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Nt=It(Dt),Bt=It(lt(Dt)),Ut=Y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},jt=/(.)^/,Ht={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Wt=/\\|'|\r|\n|\u2028|\u2029/g;function Ft(t){return"\\"+Ht[t]}function Yt(t,e,i){!e&&i&&(e=i),e=ft({},e,Y.templateSettings);var n,r=RegExp([(e.escape||jt).source,(e.interpolate||jt).source,(e.evaluate||jt).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(r,(function(e,i,n,r,a){return s+=t.slice(o,a).replace(Wt,Ft),o=a+e.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),e})),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var a=function(t){return n.call(this,t,Y)},l=e.variable||"obj";return a.source="function("+l+"){\n"+s+"}",a}function Xt(t,e,i){var n=(e=_t(e)).length;if(!n)return g(i)?i.call(t):i;for(var r=0;r<n;r++){var o=null==t?void 0:t[e[r]];void 0===o&&(o=i,r=n),t=g(o)?o.call(t):o}return t}var Vt=0;function qt(t){var e=++Vt+"";return t?t+e:e}function Kt(t){var e=Y(t);return e._chain=!0,e}function $t(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var o=pt(t.prototype),a=t.apply(o,r);return s(a)?a:o}var Jt=o((function(t,e){var i=Jt.placeholder,n=function(){for(var r=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===i?arguments[r++]:e[a];for(;r<arguments.length;)s.push(arguments[r++]);return $t(t,n,this,this,s)};return n}));Jt.placeholder=Y;var Zt=Jt,Qt=o((function(t,e,i){if(!g(t))throw new TypeError("Bind must be called on a function");var n=o((function(r){return $t(t,n,e,this,i.concat(r))}));return n})),te=G(U);function ee(t,e,i,n){if(n=n||[],e||0===e){if(e<=0)return n.concat(t)}else e=1/0;for(var r=n.length,o=0,s=U(t);o<s;o++){var a=t[o];if(te(a)&&(A(a)||L(a)))if(e>1)ee(a,e-1,i,n),r=n.length;else for(var l=0,h=a.length;l<h;)n[r++]=a[l++];else i||(n[r++]=a)}return n}var ie=o((function(t,e){var i=(e=ee(e,!1,!1)).length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var n=e[i];t[n]=Qt(t[n],t)}return t}));function ne(t,e){var i=function(n){var r=i.cache,o=""+(e?e.apply(this,arguments):n);return z(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return i.cache={},i}var re=o((function(t,e,i){return setTimeout((function(){return t.apply(null,i)}),e)})),oe=Zt(re,Y,1);function se(t,e,i){var n,r,o,s,a=0;i||(i={});var l=function(){a=!1===i.leading?0:Rt(),n=null,s=t.apply(r,o),n||(r=o=null)},h=function(){var h=Rt();a||!1!==i.leading||(a=h);var c=e-(h-a);return r=this,o=arguments,c<=0||c>e?(n&&(clearTimeout(n),n=null),a=h,s=t.apply(r,o),n||(r=o=null)):n||!1===i.trailing||(n=setTimeout(l,c)),s};return h.cancel=function(){clearTimeout(n),a=0,n=r=o=null},h}function ae(t,e,i){var n,r,s=function(e,i){n=null,i&&(r=t.apply(e,i))},a=o((function(o){if(n&&clearTimeout(n),i){var a=!n;n=setTimeout(s,e),a&&(r=t.apply(this,o))}else n=re(s,e,this,o);return r}));return a.cancel=function(){clearTimeout(n),n=null},a}function le(t,e){return Zt(e,t)}function he(t){return function(){return!t.apply(this,arguments)}}function ce(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}}function ue(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function de(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}}var fe=Zt(de,2);function pe(t,e,i){e=Ct(e,i);for(var n,r=H(t),o=0,s=r.length;o<s;o++)if(e(t[n=r[o]],n,t))return n}function xe(t){return function(e,i,n){i=Ct(i,n);for(var r=U(e),o=t>0?0:r-1;o>=0&&o<r;o+=t)if(i(e[o],o,e))return o;return-1}}var me=xe(1),ye=xe(-1);function ve(t,e,i,n){for(var r=(i=Ct(i,n,1))(e),o=0,s=U(t);o<s;){var a=Math.floor((o+s)/2);i(t[a])<r?o=a+1:s=a}return o}function _e(t,e,i){return function(n,o,s){var a=0,l=U(n);if("number"==typeof s)t>0?a=s>=0?s:Math.max(s+l,a):l=s>=0?Math.min(s+1,l):s+l+1;else if(i&&s&&l)return n[s=i(n,o)]===o?s:-1;if(o!=o)return(s=e(r.q.call(n,a,l),O))>=0?s+a:-1;for(s=t>0?a:l-1;s>=0&&s<l;s+=t)if(n[s]===o)return s;return-1}}var be=_e(1,me,ve),ge=_e(-1,ye);function we(t,e,i){var n=(te(t)?me:pe)(t,e,i);if(void 0!==n&&-1!==n)return t[n]}function Me(t,e){return we(t,kt(e))}function ke(t,e,i){var n,r;if(e=Et(e,i),te(t))for(n=0,r=t.length;n<r;n++)e(t[n],n,t);else{var o=H(t);for(n=0,r=o.length;n<r;n++)e(t[o[n]],o[n],t)}return t}function Se(t,e,i){e=Ct(e,i);for(var n=!te(t)&&H(t),r=(n||t).length,o=Array(r),s=0;s<r;s++){var a=n?n[s]:s;o[s]=e(t[a],a,t)}return o}function Ee(t){var e=function(e,i,n,r){var o=!te(e)&&H(e),s=(o||e).length,a=t>0?0:s-1;for(r||(n=e[o?o[a]:a],a+=t);a>=0&&a<s;a+=t){var l=o?o[a]:a;n=i(n,e[l],l,e)}return n};return function(t,i,n,r){var o=arguments.length>=3;return e(t,Et(i,r,4),n,o)}}var Ae=Ee(1),ze=Ee(-1);function Ce(t,e,i){var n=[];return e=Ct(e,i),ke(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function Le(t,e,i){return Ce(t,he(Ct(e)),i)}function Te(t,e,i){e=Ct(e,i);for(var n=!te(t)&&H(t),r=(n||t).length,o=0;o<r;o++){var s=n?n[o]:o;if(!e(t[s],s,t))return!1}return!0}function Oe(t,e,i){e=Ct(e,i);for(var n=!te(t)&&H(t),r=(n||t).length,o=0;o<r;o++){var s=n?n[o]:o;if(e(t[s],s,t))return!0}return!1}function Pe(t,e,i,n){return te(t)||(t=st(t)),("number"!=typeof i||n)&&(i=0),be(t,e,i)>=0}var Ge=o((function(t,e,i){var n,r;return g(e)?r=e:(e=_t(e),n=e.slice(0,-1),e=e[e.length-1]),Se(t,(function(t){var o=r;if(!o){if(n&&n.length&&(t=bt(t,n)),null==t)return;o=t[e]}return null==o?o:o.apply(t,i)}))}));function Re(t,e){return Se(t,St(e))}function Ie(t,e){return Ce(t,kt(e))}function De(t,e,i){var n,r,o=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,l=(t=te(t)?t:st(t)).length;a<l;a++)null!=(n=t[a])&&n>o&&(o=n);else e=Ct(e,i),ke(t,(function(t,i,n){((r=e(t,i,n))>s||r===-1/0&&o===-1/0)&&(o=t,s=r)}));return o}function Ne(t,e,i){var n,r,o=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,l=(t=te(t)?t:st(t)).length;a<l;a++)null!=(n=t[a])&&n<o&&(o=n);else e=Ct(e,i),ke(t,(function(t,i,n){((r=e(t,i,n))<s||r===1/0&&o===1/0)&&(o=t,s=r)}));return o}function Be(t,e,i){if(null==e||i)return te(t)||(t=st(t)),t[Gt(t.length-1)];var n=te(t)?mt(t):st(t),r=U(n);e=Math.max(Math.min(e,r),0);for(var o=r-1,s=0;s<e;s++){var a=Gt(s,o),l=n[s];n[s]=n[a],n[a]=l}return n.slice(0,e)}function Ue(t){return Be(t,1/0)}function je(t,e,i){var n=0;return e=Ct(e,i),Re(Se(t,(function(t,i,r){return{value:t,index:n++,criteria:e(t,i,r)}})).sort((function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index})),"value")}function He(t,e){return function(i,n,r){var o=e?[[],[]]:{};return n=Ct(n,r),ke(i,(function(e,r){var s=n(e,r,i);t(o,e,s)})),o}}var We=He((function(t,e,i){z(t,i)?t[i].push(e):t[i]=[e]})),Fe=He((function(t,e,i){t[i]=e})),Ye=He((function(t,e,i){z(t,i)?t[i]++:t[i]=1})),Xe=He((function(t,e,i){t[i?0:1].push(e)}),!0),Ve=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function qe(t){return t?A(t)?r.q.call(t):d(t)?t.match(Ve):te(t)?Se(t,Mt):st(t):[]}function Ke(t){return null==t?0:te(t)?t.length:H(t).length}function $e(t,e,i){return e in i}var Je=o((function(t,e){var i={},n=e[0];if(null==t)return i;g(n)?(e.length>1&&(n=Et(n,e[1])),e=q(t)):(n=$e,e=ee(e,!1,!1),t=Object(t));for(var r=0,o=e.length;r<o;r++){var s=e[r],a=t[s];n(a,s,t)&&(i[s]=a)}return i})),Ze=o((function(t,e){var i,n=e[0];return g(n)?(n=he(n),e.length>1&&(i=e[1])):(e=Se(ee(e,!1,!1),String),n=function(t,i){return!Pe(e,i)}),Je(t,n,i)}));function Qe(t,e,i){return r.q.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))}function ti(t,e,i){return null==t||t.length<1?null==e||i?void 0:[]:null==e||i?t[0]:Qe(t,t.length-e)}function ei(t,e,i){return r.q.call(t,null==e||i?1:e)}function ii(t,e,i){return null==t||t.length<1?null==e||i?void 0:[]:null==e||i?t[t.length-1]:ei(t,Math.max(0,t.length-e))}function ni(t){return Ce(t,Boolean)}function ri(t,e){return ee(t,e,!1)}var oi=o((function(t,e){return e=ee(e,!0,!0),Ce(t,(function(t){return!Pe(e,t)}))})),si=o((function(t,e){return oi(t,e)}));function ai(t,e,i,n){h(e)||(n=i,i=e,e=!1),null!=i&&(i=Ct(i,n));for(var r=[],o=[],s=0,a=U(t);s<a;s++){var l=t[s],c=i?i(l,s,t):l;e&&!i?(s&&o===c||r.push(l),o=c):i?Pe(o,c)||(o.push(c),r.push(l)):Pe(r,l)||r.push(l)}return r}var li=o((function(t){return ai(ee(t,!0,!0))}));function hi(t){for(var e=[],i=arguments.length,n=0,r=U(t);n<r;n++){var o=t[n];if(!Pe(e,o)){var s;for(s=1;s<i&&Pe(arguments[s],o);s++);s===i&&e.push(o)}}return e}function ci(t){for(var e=t&&De(t,U).length||0,i=Array(e),n=0;n<e;n++)i[n]=Re(t,n);return i}var ui=o(ci);function di(t,e){for(var i={},n=0,r=U(t);n<r;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i}function fi(t,e,i){null==e&&(e=t||0,t=0),i||(i=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),o=0;o<n;o++,t+=i)r[o]=t;return r}function pi(t,e){if(null==e||e<1)return[];for(var i=[],n=0,o=t.length;n<o;)i.push(r.q.call(t,n,n+=e));return i}function xi(t,e){return t._chain?Y(e).chain():e}function mi(t){return ke(ht(t),(function(e){var i=Y[e]=t[e];Y.prototype[e]=function(){var t=[this._wrapped];return r.o.apply(t,arguments),xi(this,i.apply(Y,t))}})),Y}ke(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=r.a[t];Y.prototype[t]=function(){var i=this._wrapped;return null!=i&&(e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0]),xi(this,i)}})),ke(["concat","join","slice"],(function(t){var e=r.a[t];Y.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),xi(this,t)}}));var yi=Y,vi=mi(n);vi._=vi;var _i=vi},function(t,e,i){"use strict";var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,l=s(t),h=1;h<arguments.length;h++){for(var c in i=Object(arguments[h]))r.call(i,c)&&(l[c]=i[c]);if(n){a=n(i);for(var u=0;u<a.length;u++)o.call(i,a[u])&&(l[a[u]]=i[a[u]])}}return l}},function(t,e,i){"use strict";var n=i(14),r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,s=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,h=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.memo"):60115,x=r?Symbol.for("react.lazy"):60116,m="function"==typeof Symbol&&Symbol.iterator;function y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function b(t,e,i){this.props=t,this.context=e,this.refs=_,this.updater=i||v}function g(){}function w(t,e,i){this.props=t,this.context=e,this.refs=_,this.updater=i||v}b.prototype.isReactComponent={},b.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(y(85));this.updater.enqueueSetState(this,t,e,"setState")},b.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},g.prototype=b.prototype;var M=w.prototype=new g;M.constructor=w,n(M,b.prototype),M.isPureReactComponent=!0;var k={current:null},S=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,i){var n,r={},s=null,a=null;if(null!=e)for(n in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)S.call(e,n)&&!E.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var h=Array(l),c=0;c<l;c++)h[c]=arguments[c+2];r.children=h}if(t&&t.defaultProps)for(n in l=t.defaultProps)void 0===r[n]&&(r[n]=l[n]);return{$$typeof:o,type:t,key:s,ref:a,props:r,_owner:k.current}}function z(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var C=/\/+/g,L=[];function T(t,e,i,n){if(L.length){var r=L.pop();return r.result=t,r.keyPrefix=e,r.func=i,r.context=n,r.count=0,r}return{result:t,keyPrefix:e,func:i,context:n,count:0}}function O(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>L.length&&L.push(t)}function P(t,e,i){return null==t?0:function t(e,i,n,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case o:case s:l=!0}}if(l)return n(r,e,""===i?"."+G(e,0):i),1;if(l=0,i=""===i?".":i+":",Array.isArray(e))for(var h=0;h<e.length;h++){var c=i+G(a=e[h],h);l+=t(a,c,n,r)}else if("function"==typeof(c=null===e||"object"!=typeof e?null:"function"==typeof(c=m&&e[m]||e["@@iterator"])?c:null))for(e=c.call(e),h=0;!(a=e.next()).done;)l+=t(a=a.value,c=i+G(a,h++),n,r);else if("object"===a)throw n=""+e,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return l}(t,"",e,i)}function G(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function R(t,e){t.func.call(t.context,e,t.count++)}function I(t,e,i){var n=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?D(t,n,i,(function(t){return t})):null!=t&&(z(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,r+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(C,"$&/")+"/")+i)),n.push(t))}function D(t,e,i,n,r){var o="";null!=i&&(o=(""+i).replace(C,"$&/")+"/"),P(t,I,e=T(e,o,n,r)),O(e)}var N={current:null};function B(){var t=N.current;if(null===t)throw Error(y(321));return t}var U={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:n};e.Children={map:function(t,e,i){if(null==t)return t;var n=[];return D(t,n,null,e,i),n},forEach:function(t,e,i){if(null==t)return t;P(t,R,e=T(null,null,e,i)),O(e)},count:function(t){return P(t,(function(){return null}),null)},toArray:function(t){var e=[];return D(t,e,null,(function(t){return t})),e},only:function(t){if(!z(t))throw Error(y(143));return t}},e.Component=b,e.Fragment=a,e.Profiler=h,e.PureComponent=w,e.StrictMode=l,e.Suspense=f,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,e.cloneElement=function(t,e,i){if(null==t)throw Error(y(267,t));var r=n({},t.props),s=t.key,a=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,l=k.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(c in e)S.call(e,c)&&!E.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==h?h[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){h=Array(c);for(var u=0;u<c;u++)h[u]=arguments[u+2];r.children=h}return{$$typeof:o,type:t.type,key:s,ref:a,props:r,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:u,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},e.createElement=A,e.createFactory=function(t){var e=A.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:d,render:t}},e.isValidElement=z,e.lazy=function(t){return{$$typeof:x,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:p,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return B().useCallback(t,e)},e.useContext=function(t,e){return B().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return B().useEffect(t,e)},e.useImperativeHandle=function(t,e,i){return B().useImperativeHandle(t,e,i)},e.useLayoutEffect=function(t,e){return B().useLayoutEffect(t,e)},e.useMemo=function(t,e){return B().useMemo(t,e)},e.useReducer=function(t,e,i){return B().useReducer(t,e,i)},e.useRef=function(t){return B().useRef(t)},e.useState=function(t){return B().useState(t)},e.version="16.14.0"},function(t,e,i){"use strict";var n=i(17);function r(){}function o(){}o.resetWarningCache=r,t.exports=function(){function t(t,e,i,r,o,s){if(s!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var i={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:r};return i.PropTypes=i,i}},function(t,e,i){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){var i,n=["webkit","Moz","ms","O"],r={};function o(t,e){var i,n=document.createElement(t||"div");for(i in e)n[i]=e[i];return n}function s(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}var a,l=(a=o("style"),s(document.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet);function h(t,e,n,o){var s=["opacity",e,~~(100*t),n,o].join("-"),a=.01+n/o*100,h=Math.max(1-(1-t)/e*(100-a),t),c=i.substring(0,i.indexOf("Animation")).toLowerCase(),u=c&&"-"+c+"-"||"";return r[s]||(l.insertRule("@"+u+"keyframes "+s+"{0%{opacity:"+h+"}"+a+"%{opacity:"+t+"}"+(a+.01)+"%{opacity:1}"+(a+e)%100+"%{opacity:"+t+"}100%{opacity:"+h+"}}",0),r[s]=1),s}function c(t,e){var i,r,o=t.style;if(void 0!==o[e])return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<n.length;r++)if(void 0!==o[i=n[r]+e])return i}function u(t,e){for(var i in e)t.style[c(t,i)||i]=e[i];return t}function d(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)void 0===t[n]&&(t[n]=i[n])}return t}function f(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}var p={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},x=function t(e){if(!this.spin)return new t(e);this.opts=d(e||{},t.defaults,p)};x.defaults={},d(x.prototype,{spin:function(t){this.stop();var e,n,r=this,s=r.opts,a=r.el=u(o(0,{className:s.className}),{position:"relative",zIndex:s.zIndex}),l=s.radius+s.length+s.width;if(t&&(t.insertBefore(a,t.firstChild||null),n=f(t),e=f(a),u(a,{left:("auto"==s.left?n.x-e.x+(t.offsetWidth>>1):s.left+l)+"px",top:("auto"==s.top?n.y-e.y+(t.offsetHeight>>1):s.top+l)+"px"})),a.setAttribute("aria-role","progressbar"),r.lines(a,r.opts),!i){var h=0,c=s.fps,d=c/s.speed,p=(1-s.opacity)/(d*s.trail/100),x=d/s.lines;!function t(){h++;for(var e=s.lines;e;e--){var i=Math.max(1-(h+e*x)%d*p,s.opacity);r.opacity(a,s.lines-e,i,s)}r.timeout=r.el&&setTimeout(t,~~(1e3/c))}()}return r},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(t,e){var n,r=0;function a(t,i){return u(o(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*r+e.rotate)+"deg) translate("+e.radius+"px,0)",borderRadius:(e.width>>1)+"px"})}for(;r<e.lines;r++)n=u(o(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:i&&h(e.opacity,e.trail,r,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&s(n,u(a("#000","0 0 4px #000"),{top:"2px"})),s(t,s(n,a(e.color,"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}}),function(){function t(t,e){return o("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}var e=u(o("group"),{behavior:"url(#default#VML)"});!c(e,"transform")&&e.adj?(l.addRule(".spin-vml","behavior:url(#default#VML)"),x.prototype.lines=function(e,i){var n=i.length+i.width,r=2*n;function o(){return u(t("group",{coordsize:r+" "+r,coordorigin:-n+" "+-n}),{width:r,height:r})}var a,l=2*-(i.width+i.length)+"px",h=u(o(),{position:"absolute",top:l,left:l});function c(e,r,a){s(h,s(u(o(),{rotation:360/i.lines*e+"deg",left:~~r}),s(u(t("roundrect",{arcsize:1}),{width:n,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),t("fill",{color:i.color,opacity:i.opacity}),t("stroke",{opacity:0}))))}if(i.shadow)for(a=1;a<=i.lines;a++)c(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;a<=i.lines;a++)c(a);return s(e,h)},x.prototype.opacity=function(t,e,i,n){var r=t.firstChild;n=n.shadow&&n.lines||0,r&&e+n<r.childNodes.length&&(r=(r=(r=r.childNodes[e+n])&&r.firstChild)&&r.firstChild)&&(r.opacity=i)}):i=c(e,"animation")}(),t.exports=x},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,h=[],c=!1,u=-1;function d(){c&&l&&(c=!1,l.length?h=l.concat(h):u=-1,h.length&&f())}function f(){if(!c){var t=a(d);c=!0;for(var e=h.length;e;){for(l=h,h=[];++u<e;)l&&l[u].run();u=-1,e=h.length}l=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function x(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new p(t,e)),1!==h.length||c||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){var n,r;!function(o,s){"use strict";void 0===(r="function"==typeof(n=function(){var t=function(){},e="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function n(t,e){var i=t[e];if("function"==typeof i.bind)return i.bind(t);try{return Function.prototype.bind.call(i,t)}catch(e){return function(){return Function.prototype.apply.apply(i,[t,arguments])}}}function r(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(i){return"debug"===i&&(i="log"),"undefined"!=typeof console&&("trace"===i&&e?r:void 0!==console[i]?n(console,i):void 0!==console.log?n(console,"log"):t)}function s(e,n){for(var r=0;r<i.length;r++){var o=i[r];this[o]=r<e?t:this.methodFactory(o,e,n)}this.log=this.debug}function a(t,e,i){return function(){"undefined"!=typeof console&&(s.call(this,e,i),this[t].apply(this,arguments))}}function l(t,e,i){return o(t)||a.apply(this,arguments)}function h(t,e,n){var r,o=this,a="loglevel";function h(){var t;if("undefined"!=typeof window&&a){try{t=window.localStorage[a]}catch(t){}if(void 0===t)try{var e=window.document.cookie,i=e.indexOf(encodeURIComponent(a)+"=");-1!==i&&(t=/^([^;]+)/.exec(e.slice(i))[1])}catch(t){}return void 0===o.levels[t]&&(t=void 0),t}}"string"==typeof t?a+=":"+t:"symbol"==typeof t&&(a=void 0),o.name=t,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=n||l,o.getLevel=function(){return r},o.setLevel=function(e,n){if("string"==typeof e&&void 0!==o.levels[e.toUpperCase()]&&(e=o.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(r=e,!1!==n&&function(t){var e=(i[t]||"silent").toUpperCase();if("undefined"!=typeof window&&a){try{return void(window.localStorage[a]=e)}catch(t){}try{window.document.cookie=encodeURIComponent(a)+"="+e+";"}catch(t){}}}(e),s.call(o,e,t),"undefined"==typeof console&&e<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(t){h()||o.setLevel(t,!1)},o.enableAll=function(t){o.setLevel(o.levels.TRACE,t)},o.disableAll=function(t){o.setLevel(o.levels.SILENT,t)};var c=h();null==c&&(c=null==e?"WARN":e),o.setLevel(c,!1)}var c=new h,u={};c.getLogger=function(t){if("symbol"!=typeof t&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=u[t];return e||(e=u[t]=new h(t,c.getLevel(),c.methodFactory)),e};var d="undefined"!=typeof window?window.log:void 0;return c.noConflict=function(){return"undefined"!=typeof window&&window.log===c&&(window.log=d),c},c.getLoggers=function(){return u},c.default=c,c})?n.call(e,i,e,t):n)||(t.exports=r)}()},function(t,e,i){!function(){var e=i(10);"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},writable:!0,configurable:!0});var n=window.ColorMap=function(t,e){this.options={ncolors:500,alpha:255},this.options=Object.assign(this.options,e),this.map=[],this._low=0,this._high=1;var i=this.options.ncolors;this._fscale=i/(this._high-this._low);var n=1,r=1;t=JSON.parse(JSON.stringify(t)),t=this._parseColors(t),this.colors=t;for(var o=t[0],s=t[1],a=1/(h=i*((t[1].pos-t[0].pos)/100)),l=0;l<i-2;l++){if(r>h){if(o=t[n],void 0===(s=t[n+1]))break;if(o.pos>=100&&s.pos>=100)break;var h;a=1/(h=i*((s.pos-o.pos)/100)),r=1,n+=1}this._addColor(this.interpolate(o,s,a*r)),r+=1}this._addColor(t[n]),this._addColor(t[0],!0)};n.prototype={_addColor:function(t,e){t.hex=this._rgbToHex(t.red,t.green,t.blue),t.color=t.alpha<<24|t.blue<<16|t.green<<8|t.red,e?this.map.unshift(t):this.map.push(t)},_parseColors:function(t){for(var i=0,n=t.length;i<n;i++){var r=t[i];if("string"==typeof r)t[i]=this._hexToRgb(r),r=(r=e(r)).toRgb(),t[i]={red:r.r,green:r.g,blue:r.b,alpha:this.options.alpha};else if(r.hasOwnProperty("color")){var o=e(r.color);o={red:(o=o.toRgb()).r,green:o.g,blue:o.b,alpha:this.options.alpha},r.hasOwnProperty("pos")&&(o.pos=r.pos),t[i]=o}else void 0===r.red&&void 0===r.green&&void 0===r.blue?(t[i].red=Math.floor(Math.round(255*r[0])),t[i].green=Math.floor(Math.round(255*r[1])),t[i].blue=Math.floor(Math.round(255*r[2]))):(t[i].red=Math.floor(Math.round(r.red/100*255)),t[i].green=Math.floor(Math.round(r.green/100*255)),t[i].blue=Math.floor(Math.round(r.blue/100*255)));t[i].hasOwnProperty("alpha")||(t[i].alpha=this.options.alpha)}return this._checkColorStops(t)},_checkColorStops:function(t){for(var e=0,i=0,n=t.length;i<n;i++){var r=t[i];if(r.hasOwnProperty("pos")){if(e)for(var o=(r.pos-0)/e,s=r.pos,a=1;a<=e;a++)t[i-a].pos=s-o,s-=o;e=0}else e+=1}if(e)for(s=100,t[t.length-1].pos=s,t[0].pos=0,o=(s-0)/(e-=1),i=t.length-1,a=1;a<e;a++)t[i-a].pos=s-o,s-=o;return t},_componentToHex:function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},_rgbToHex:function(t,e,i){return"#"+this._componentToHex(t)+this._componentToHex(e)+this._componentToHex(i)},_hexToRgb:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{red:parseInt(e[1],16),green:parseInt(e[2],16),blue:parseInt(e[3],16)}:null},getColor:function(t){var e=this.getColorIndex(t);return this.map[e]},getColorByIndex:function(t){return this.map[t]},getColorIndex:function(t){var e=~~((t-this._low)*this._fscale);return e>this.map.length-1?e=this.map.length-1:e<0&&(e=0),e},getNColors:function(){return this.map.length},setRange:function(t,e){this._low===t&&this._high===e||(this._low=t,this._high=e,this._fscale=this.map.length/Math.abs(this._high-this._low))},interpolate:function(t,e,i){return{red:t.red+i*(e.red-t.red),green:t.green+i*(e.green-t.green),blue:t.blue+i*(e.blue-t.blue),alpha:t.alpha+i*(e.alpha-t.alpha)}}},t.exports=n}()},function(t,e){var i,n;i=[],(n=window.CanvasInput=function(t){var e=this;t=t||{},e._canvas=t.canvas||null,e._ctx=e._canvas?e._canvas.getContext("2d"):null,e._x=t.x||0,e._y=t.y||0,e._extraX=t.extraX||0,e._extraY=t.extraY||0,e._fontSize=t.fontSize||14,e._fontFamily=t.fontFamily||"Arial",e._fontColor=t.fontColor||"#000",e._placeHolderColor=t.placeHolderColor||"#bfbebd",e._fontWeight=t.fontWeight||"normal",e._fontStyle=t.fontStyle||"normal",e._readonly=t.readonly||!1,e._maxlength=t.maxlength||null,e._width=t.width||150,e._height=t.height||e._fontSize,e._padding=t.padding>=0?t.padding:5,e._borderWidth=t.borderWidth>=0?t.borderWidth:1,e._borderColor=t.borderColor||"#959595",e._borderRadius=t.borderRadius>=0?t.borderRadius:3,e._backgroundImage=t.backgroundImage||"",e._boxShadow=t.boxShadow||"1px 1px 0px rgba(255, 255, 255, 1)",e._innerShadow=t.innerShadow||"0px 0px 4px rgba(0, 0, 0, 0.4)",e._selectionColor=t.selectionColor||"rgba(179, 212, 253, 0.8)",e._placeHolder=t.placeHolder||"",e._value=t.value||e._placeHolder,e._onsubmit=t.onsubmit||function(){},e._onkeydown=t.onkeydown||function(){},e._onkeyup=t.onkeyup||function(){},e._onfocus=t.onfocus||function(){},e._onblur=t.onblur||function(){},e._cursor=!1,e._cursorPos=0,e._hasFocus=!1,e._selection=[0,0],e._wasOver=!1,e._renderOnReturn=void 0===t.renderOnReturn||t.renderOnReturn,e._disableBlur=t.disableBlur||!1,e._tabToClear=t.tabToClear||!1,e.boxShadow(e._boxShadow,!0),e._calcWH(),e._renderCanvas=document.createElement("canvas"),e._renderCanvas.setAttribute("width",e.outerW),e._renderCanvas.setAttribute("height",e.outerH),e._renderCtx=e._renderCanvas.getContext("2d"),e._shadowCanvas=document.createElement("canvas"),e._shadowCanvas.setAttribute("width",e._width+2*e._padding),e._shadowCanvas.setAttribute("height",e._height+2*e._padding),e._shadowCtx=e._shadowCanvas.getContext("2d"),void 0!==t.backgroundGradient?(e._backgroundColor=e._renderCtx.createLinearGradient(0,0,0,e.outerH),e._backgroundColor.addColorStop(0,t.backgroundGradient[0]),e._backgroundColor.addColorStop(1,t.backgroundGradient[1])):e._backgroundColor=t.backgroundColor||"#fff",e._canvas&&(e.mousemoveCanvasListener=function(t){t=t||window.event,e.mousemove(t,e)},e._canvas.addEventListener("mousemove",e.mousemoveCanvasListener,!1),e.mousedownCanvasListener=function(t){t=t||window.event,e.mousedown(t,e)},e._canvas.addEventListener("mousedown",e.mousedownCanvasListener,!1),e.mouseupCanvasListener=function(t){t=t||window.event,e.mouseup(t,e)},e._canvas.addEventListener("mouseup",e.mouseupCanvasListener,!1)),e.mouseupWindowListener=function(t){t=t||window.event,e._hasFocus&&!e._mouseDown&&e.blur()},window.addEventListener("mouseup",e.mouseupWindowListener,!0),e.keydownWindowListener=function(t){t=t||window.event,e._hasFocus&&e.keydown(t,e)},window.addEventListener("keydown",e.keydownWindowListener,!1),e.keyupWindowListener=function(t){t=t||window.event,e._hasFocus&&e._onkeyup(t,e)},window.addEventListener("keyup",e.keyupWindowListener,!1),e.pasteWindowListener=function(t){if(t=t||window.event,e._hasFocus){var i=t.clipboardData.getData("text/plain"),n=e._value.substr(0,e._cursorPos),r=e._value.substr(e._cursorPos);e._value=n+i+r,e._cursorPos+=i.length,e.render()}},window.addEventListener("paste",e.pasteWindowListener,!1),i.push(e),e._inputsIndex=i.length-1,e.render()}).prototype={canvas:function(t){return void 0!==t?(this._canvas=t,this._ctx=this._canvas.getContext("2d"),this.render()):this._canvas},x:function(t){return void 0!==t?(this._x=t,this.render()):this._x},y:function(t){return void 0!==t?(this._y=t,this.render()):this._y},extraX:function(t){return void 0!==t?(this._extraX=t,this.render()):this._extraX},extraY:function(t){return void 0!==t?(this._extraY=t,this.render()):this._extraY},fontSize:function(t){return void 0!==t?(this._fontSize=t,this.render()):this._fontSize},fontFamily:function(t){return void 0!==t?(this._fontFamily=t,this.render()):this._fontFamily},fontColor:function(t){return void 0!==t?(this._fontColor=t,this.render()):this._fontColor},placeHolderColor:function(t){return void 0!==t?(this._placeHolderColor=t,this.render()):this._placeHolderColor},fontWeight:function(t){return void 0!==t?(this._fontWeight=t,this.render()):this._fontWeight},fontStyle:function(t){return void 0!==t?(this._fontStyle=t,this.render()):this._fontStyle},width:function(t){return void 0!==t?(this._width=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._width},height:function(t){return void 0!==t?(this._height=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._height},padding:function(t){return void 0!==t?(this._padding=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._padding},borderWidth:function(t){return void 0!==t?(this._borderWidth=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._borderWidth},borderColor:function(t){return void 0!==t?(this._borderColor=t,this.render()):this._borderColor},borderRadius:function(t){return void 0!==t?(this._borderRadius=t,this.render()):this._borderRadius},backgroundColor:function(t){return void 0!==t?(this._backgroundColor=t,this.render()):this._backgroundColor},backgroundGradient:function(t){return void 0!==t?(this._backgroundColor=this._renderCtx.createLinearGradient(0,0,0,this.outerH),this._backgroundColor.addColorStop(0,t[0]),this._backgroundColor.addColorStop(1,t[1]),this.render()):this._backgroundColor},boxShadow:function(t,e){if(void 0===t)return this._boxShadow;var i=t.split("px ");return this._boxShadow={x:"none"===this._boxShadow?0:parseInt(i[0],10),y:"none"===this._boxShadow?0:parseInt(i[1],10),blur:"none"===this._boxShadow?0:parseInt(i[2],10),color:"none"===this._boxShadow?"":i[3]},this._boxShadow.x<0?(this.shadowL=Math.abs(this._boxShadow.x)+this._boxShadow.blur,this.shadowR=this._boxShadow.blur+this._boxShadow.x):(this.shadowL=Math.abs(this._boxShadow.blur-this._boxShadow.x),this.shadowR=this._boxShadow.blur+this._boxShadow.x),this._boxShadow.y<0?(this.shadowT=Math.abs(this._boxShadow.y)+this._boxShadow.blur,this.shadowB=this._boxShadow.blur+this._boxShadow.y):(this.shadowT=Math.abs(this._boxShadow.blur-this._boxShadow.y),this.shadowB=this._boxShadow.blur+this._boxShadow.y),this.shadowW=this.shadowL+this.shadowR,this.shadowH=this.shadowT+this.shadowB,this._calcWH(),e?void 0:(this._updateCanvasWH(),this.render())},innerShadow:function(t){return void 0!==t?(this._innerShadow=t,this.render()):this._innerShadow},selectionColor:function(t){return void 0!==t?(this._selectionColor=t,this.render()):this._selectionColor},placeHolder:function(t){return void 0!==t?(this._placeHolder=t,this.render()):this._placeHolder},value:function(t){return void 0!==t?(this._value=t,this.focus()):this._value},onsubmit:function(t){if(void 0!==t)return this._onsubmit=t,this;this._onsubmit()},onkeydown:function(t){if(void 0!==t)return this._onkeydown=t,this;this._onkeydown()},onkeyup:function(t){if(void 0!==t)return this._onkeyup=t,this;this._onkeyup()},focus:function(t){var e,i=this;if(!i._readonly){i._hasFocus||i._onfocus(i),i._selectionUpdated?delete i._selectionUpdated:i._selection=[0,0],i._cursorPos="number"==typeof t?t:i._clipText().length,i._placeHolder===i._value&&(i._value=""),i._hasFocus=!0,i._cursor=!0,i._cursorInterval&&clearInterval(i._cursorInterval),i._cursorInterval=setInterval((function(){i._cursor=!i._cursor,i.render()}),500);var n=navigator.userAgent.toLowerCase(),r=n.indexOf("chrome")>=0&&n.indexOf("mobile")>=0&&n.indexOf("android")>=0,o=void 0!==window.orientation;return o&&!r&&document&&document.createElement&&(e=document.createElement("input"))?(e.type="text",e.style.opacity=0,e.style.position="absolute",e.style.left=i._x+i._extraX+(i._canvas?i._canvas.offsetLeft:0)+"px",e.style.top=i._y+i._extraY+(i._canvas?i._canvas.offsetTop:0)+"px",e.style.width=i._width,e.style.height=0,document.body.appendChild(e),e.focus(),e.addEventListener("blur",(function(){i.blur(i)}),!1)):o&&i.value(prompt(i._placeHolder)||""),i.render()}},blur:function(t){var e=t||this;return e._disableBlur||(e._onblur(e),e._cursorInterval&&clearInterval(e._cursorInterval),e._hasFocus=!1,e._cursor=!1,e._selection=[0,0],""===e._value&&(e._value=e._placeHolder)),e.render()},disableBlur:function(t){(t||this)._disableBlur=!0},enableBlur:function(t){(t||this)._disableBlur=!1},keydown:function(t,e){var n,r,o=t.which,s=t.shiftKey,a=null;if(e._hasFocus){if(e._onkeydown(t,e),65===o&&(t.ctrlKey||t.metaKey))return e._selection=[0,e._value.length],t.preventDefault(),e.render();if(17===o||t.metaKey||t.ctrlKey)return e;if(t.preventDefault(),8===o)e._clearSelection()||e._cursorPos>0&&(n=e._value.substr(0,e._cursorPos-1),r=e._value.substr(e._cursorPos,e._value.length),e._value=n+r,e._cursorPos--);else if(37===o)e._cursorPos>0&&(e._cursorPos--,e._cursor=!0,e._selection=[0,0]);else if(39===o)e._cursorPos<e._value.length&&(e._cursorPos++,e._cursor=!0,e._selection=[0,0]);else if(13===o)e._onsubmit(t,e);else if(9===o)if(e._tabToClear)e._value="",e._cursorPos=0;else{var l=i[e._inputsIndex+1]?e._inputsIndex+1:0;l!==e._inputsIndex&&(e.blur(),setTimeout((function(){i[l].focus()}),10))}else if(a=e._mapCodeToKey(s,o)){if(e._clearSelection(),e._maxlength&&e._maxlength<=e._value.length)return;n=e._value?e._value.substr(0,e._cursorPos):"",r=e._value?e._value.substr(e._cursorPos):"",e._value=n+a+r,e._cursorPos++}return 13==o&&e._renderOnReturn||13!==o?e.render():function(){}}},click:function(t,e){var i=e._mousePos(t),n=i.x,r=i.y;return e._endSelection?(delete e._endSelection,void delete e._selectionUpdated):e._canvas&&e._overInput(n,r)||!e._canvas?e._mouseDown?(e._mouseDown=!1,e.click(t,e),e.focus(e._clickPos(n,r))):void 0:e.blur()},mousemove:function(t,e){var i=e._mousePos(t),n=i.x,r=i.y,o=e._overInput(n,r);if(o&&e._canvas?(e._canvas.style.cursor="text",e._wasOver=!0):e._wasOver&&e._canvas&&(e._canvas.style.cursor="default",e._wasOver=!1),e._hasFocus&&e._selectionStart>=0){var s=e._clickPos(n,r),a=Math.min(e._selectionStart,s),l=Math.max(e._selectionStart,s);if(!o)return e._selectionUpdated=!0,e._endSelection=!0,delete e._selectionStart,void e.render();e._selection[0]===a&&e._selection[1]===l||(e._selection=[a,l],e.render())}},mousedown:function(t,e){var i=e._mousePos(t),n=i.x,r=i.y,o=e._overInput(n,r);e._mouseDown=o,e._hasFocus&&o&&(e._selectionStart=e._clickPos(n,r))},mouseup:function(t,e){var i=e._mousePos(t),n=i.x,r=i.y,o=e._clickPos(n,r)!==e._selectionStart;e._hasFocus&&e._selectionStart>=0&&e._overInput(n,r)&&o?(e._selectionUpdated=!0,delete e._selectionStart,e.render()):delete e._selectionStart,e.click(t,e)},renderCanvas:function(){return this._renderCanvas},cleanup:function(){this._canvas.removeEventListener("mouseup",this.mouseupCanvasListener,!1),this._canvas.removeEventListener("mousedown",this.mousedownCanvasListener,!1),this._canvas.removeEventListener("mousemove",this.mousemoveCanvasListener,!1),window.removeEventListener("keydown",this.keydownWindowListener,!1),window.removeEventListener("keyup",this.keyupWindowListener,!1),window.removeEventListener("mouseup",this.mouseupWindowListener,!0),window.removeEventListener("paste",this.pasteWindowListener,!1),clearInterval(this._cursorInterval),this._canvas.style.cursor="default";for(var t=i.length-1;t>=0;t--)i[t]===this&&i.splice(t,1)},render:function(){var t=this,e=t._renderCtx,i=t.outerW,n=t.outerH,r=t._borderRadius,o=t._borderWidth,s=t.shadowW,a=t.shadowH;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.shadowOffsetX=t._boxShadow.x,e.shadowOffsetY=t._boxShadow.y,e.shadowBlur=t._boxShadow.blur,e.shadowColor=t._boxShadow.color,t._borderWidth>0&&(e.fillStyle=t._borderColor,t._roundedRect(e,t.shadowL,t.shadowT,i-s,n-a,r),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0),t._drawTextBox((function(){e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0;var l=t._clipText(),h=t._padding+t._borderWidth+t.shadowT;if(t._selection[1]>0){var c=t._textWidth(l.substring(0,t._selection[0])),u=t._textWidth(l.substring(t._selection[0],t._selection[1]));e.fillStyle=t._selectionColor,e.fillRect(h+c,h,u,t._height)}if(e.fillStyle=t._placeHolder===t._value&&""!==t._value?t._placeHolderColor:t._fontColor,t._cursor){var d=t._textWidth(l.substring(0,t._cursorPos));e.fillRect(h+d,h,1,t._height)}var f=t._padding+t._borderWidth+t.shadowL,p=Math.round(h+t._height/2);e.font=t._fontStyle+" "+t._fontWeight+" "+t._fontSize+"px "+t._fontFamily,e.textAlign="left",e.textBaseline="middle",e.fillText(l,f,p);var x=t._innerShadow.split("px "),m="none"===t._innerShadow?0:parseInt(x[0],10),y="none"===t._innerShadow?0:parseInt(x[1],10),v="none"===t._innerShadow?0:parseInt(x[2],10),_="none"===t._innerShadow?"":x[3];if(v>0){var b=t._shadowCtx,g=b.canvas.width,w=b.canvas.height;b.clearRect(0,0,g,w),b.shadowBlur=v,b.shadowColor=_,b.shadowOffsetX=0,b.shadowOffsetY=y,b.fillRect(-1*i,-100,3*i,100),b.shadowOffsetX=m,b.shadowOffsetY=0,b.fillRect(g,-1*n,100,3*n),b.shadowOffsetX=0,b.shadowOffsetY=y,b.fillRect(-1*i,w,3*i,100),b.shadowOffsetX=m,b.shadowOffsetY=0,b.fillRect(-100,-1*n,100,3*n),t._roundedRect(e,o+t.shadowL,o+t.shadowT,i-2*o-s,n-2*o-a,r),e.clip(),e.drawImage(t._shadowCanvas,0,0,g,w,o+t.shadowL,o+t.shadowT,g,w)}return t._ctx&&(t._ctx.clearRect(t._x,t._y,e.canvas.width,e.canvas.height),t._ctx.drawImage(t._renderCanvas,t._x,t._y)),t}))},_drawTextBox:function(t){var e=this,i=e._renderCtx,n=e.outerW,r=e.outerH,o=e._borderRadius,s=e._borderWidth,a=e.shadowW,l=e.shadowH;if(""===e._backgroundImage)i.fillStyle=e._backgroundColor,e._roundedRect(i,s+e.shadowL,s+e.shadowT,n-2*s-a,r-2*s-l,o),i.fill(),t();else{var h=new Image;h.src=e._backgroundImage,h.onload=function(){i.drawImage(h,0,0,h.width,h.height,s+e.shadowL,s+e.shadowT,n,r),t()}}},_clearSelection:function(){if(this._selection[1]>0){var t=this._selection[0],e=this._selection[1];return this._value=this._value.substr(0,t)+this._value.substr(e),this._cursorPos=t,this._cursorPos=this._cursorPos<0?0:this._cursorPos,this._selection=[0,0],!0}return!1},_clipText:function(t){t=void 0===t?this._value:t;var e=this._textWidth(t)/(this._width-this._padding);return(e>1?t.substr(-1*Math.floor(t.length/e)):t)+""},_textWidth:function(t){var e=this._renderCtx;return e.font=this._fontStyle+" "+this._fontWeight+" "+this._fontSize+"px "+this._fontFamily,e.textAlign="left",e.measureText(t).width},_calcWH:function(){this.outerW=this._width+2*this._padding+2*this._borderWidth+this.shadowW,this.outerH=this._height+2*this._padding+2*this._borderWidth+this.shadowH},_updateCanvasWH:function(){var t=this._renderCanvas.width,e=this._renderCanvas.height;this._renderCanvas.setAttribute("width",this.outerW),this._renderCanvas.setAttribute("height",this.outerH),this._shadowCanvas.setAttribute("width",this._width+2*this._padding),this._shadowCanvas.setAttribute("height",this._height+2*this._padding),this._ctx&&this._ctx.clearRect(this._x,this._y,t,e)},_roundedRect:function(t,e,i,n,r,o){n<2*o&&(o=n/2),r<2*o&&(o=r/2),t.beginPath(),t.moveTo(e+o,i),t.lineTo(e+n-o,i),t.quadraticCurveTo(e+n,i,e+n,i+o),t.lineTo(e+n,i+r-o),t.quadraticCurveTo(e+n,i+r,e+n-o,i+r),t.lineTo(e+o,i+r),t.quadraticCurveTo(e,i+r,e,i+r-o),t.lineTo(e,i+o),t.quadraticCurveTo(e,i,e+o,i),t.closePath()},_overInput:function(t,e){var i=t>=this._x+this._extraX,n=t<=this._x+this._extraX+this._width+2*this._padding,r=e>=this._y+this._extraY,o=e<=this._y+this._extraY+this._height+2*this._padding;return i&&n&&r&&o},_clickPos:function(t,e){var i=this._value;this._value===this._placeHolder&&(i="");var n=this._clipText(i),r=0,o=n.length;if(t-(this._x+this._extraX)<this._textWidth(n))for(var s=0;s<n.length;s++)if((r+=this._textWidth(n[s]))>=t-(this._x+this._extraX)){o=s;break}return o},_mousePos:function(t){var e=t.target,i=document.defaultView.getComputedStyle(e,void 0),n=parseInt(i.paddingLeft,10)||0,r=parseInt(i.paddingLeft,10)||0,o=parseInt(i.borderLeftWidth,10)||0,s=parseInt(i.borderLeftWidth,10)||0,a=document.body.parentNode.offsetTop||0,l=document.body.parentNode.offsetLeft||0,h=0,c=0;if(void 0!==e.offsetParent)do{h+=e.offsetLeft,c+=e.offsetTop}while(e=e.offsetParent);return h+=n+o+l,c+=r+s+a,{x:t.pageX-h,y:t.pageY-c}},_mapCodeToKey:function(t,e){for(var i=[8,9,13,16,17,18,20,27,91,92],n=0;n<i.length;n++)if(e===i[n])return;if("boolean"==typeof t&&"number"==typeof e)return t?e>=65&&e<=90?String.fromCharCode(e):{32:" ",48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",107:"+",173:"_",189:"_",186:":",187:"+",188:"<",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'}[e]:e>=65&&e<=90?String.fromCharCode(e).toLowerCase():96===e?"0":97===e?"1":98===e?"2":99===e?"3":100===e?"4":101===e?"5":102===e?"6":103===e?"7":104===e?"8":105===e?"9":188===e?",":190===e?".":191===e?"/":192===e?"`":220===e?"\\":187===e?"=":189===e||173===e?"-":222===e?"'":186===e?";":219===e?"[":221===e?"]":String.fromCharCode(e)}},t.exports=n},function(t,e,i){var n,r;n=i(5),(r=function(t,e,i){this.options={itemClass:"sigplot-menu-item"},n.update(this.options,i),this._Mx=t,this._container=t.root,this._menu=document.createElement("div");var r="z-index:2;float:left;position:relative;left:"+t.xpos+"px;top:"+t.ypos+"px;";this._menu.classList.add("sigplot-menu");var o=new Date;this._menuId="menu-"+o.getSeconds()+o.getMilliseconds(),this._menu.classList.add(this._menuId),this._menu.style=r,this._items=[],this.setCSS(),this.createMenu(e)}).prototype={createMenu:function(t){var e=this,i=this._Mx,n=t.finalize;t.finalize=function(){e.remove(),n()},this.finalize=t.finalize;var r=document.createElement("div");r.addEventListener("mousedown",(function(t){t.preventDefault(),e._movingOffsetX=t.offsetX,e._movingOffsetY=t.offsetY,e._moving=!0})),r.addEventListener("mouseup",(function(t){t.preventDefault(),e._moving=!1})),e._moveMenu=function(t){e._moving&&(e._menu.style.position="fixed",e._menu.style.top=t.clientY-e._movingOffsetY+"px",e._menu.style.left=t.clientX-e._movingOffsetX+"px")},document.body.addEventListener("mousemove",e._moveMenu),r.classList.add("sigplot-menu-title"),r.innerText=t.title,this._menu.append(r);var o=document.createElement("ul");o.classList.add("sigplot-menu-list"),t.items.forEach((function(i){var n=e._createMenuItem(i,t);o.append(n)})),this._menu.append(o),this._container.append(this._menu),this._menu.addEventListener("contextmenu",(function(t){t.preventDefault(),e.finalize()})),i.menu=this,i.widget={type:"MENU",callback:function(t){"mousedown"===t.type&&(1!==t.which&&2!==t.which&&3!==t.which||(e._Mx.menu!==e||t.target.classList.contains(e.options.itemClass)||e.finalize(),e._Mx.menu||e.finalize())),"mouseup"===t.type&&(e._moving=!1),"keydown"===t.type&&e._handleKeyEvents(t)}}},_handleKeyEvents:function(t){if("ArrowDown"===t.key)if(t.preventDefault(),this._active){if((e=this._items.indexOf(this._active)+1)>this._items.length-1)return;this._setActive(this._items[e])}else this._setActive(this._items[0]);if("ArrowUp"===t.key)if(t.preventDefault(),this._active){var e;if((e=this._items.indexOf(this._active)-1)<0)return;this._setActive(this._items[e])}else this._setActive(this._items[0]);if("Enter"===t.key){t.preventDefault(),this._active||this._setActive(this._items[0]);var i=this._active;i.onclick?i.onclick():i.click&&i.click()}},_setActive:function(t){this._active&&this._clearActive(),this._active=t,t.classList.add("active")},_clearActive:function(){this._active.classList.remove("active"),this._active=null},_createMenuItem:function(t,e){var i=this,n=this._Mx,o=document.createElement("li");return o.className+=" "+i.options.itemClass,o.innerText=t.text,t.style&&(o.className+=" "+t.style),t.hasOwnProperty("checked")&&(o.className+=" sigplot-menu-checkbox",t.checked&&(o.className+=" checked")),o.addEventListener("click",(function(){if(i.remove(),n.menu=void 0,n.widget=null,t.handler)t.handler();else if(t.menu){var o=t.menu;"function"==typeof t.menu&&(o=t.menu()),o.finalize=e.finalize,new r(n,o)}!n.menu&&e.finalize&&e.finalize()})),o.addEventListener("mouseenter",(function(t){i._setActive(t.target)})),o.addEventListener("mouseleave",(function(t){i._clearActive()})),i._items.push(o),o},remove:function(){var t=this._Mx;t.menu=void 0,t.widget=null,this._menu.remove(),document.body.removeEventListener("mousemove",this._moveMenu)},setCSS:function(){var t,e,i=this._Mx;(e=document.createElement("style")).id="mx-menu-css",t="."+this._menuId+"{\nbackground-color: "+i.xwbg+";\nfont: "+i.font.font+";\ncolor:"+i.xwfg+"\n}   \n.sigplot-menu-list {\n    margin: 0px;\n    list-style: none;\n    padding: 0px;\n}\n."+this._menuId+">div {\n    cursor: move;\n    text-align: center;\n    border-bottom: 2px solid "+i.xwts+";\n}\n."+this._menuId+">ul>li{\n    border-top: 2px solid "+i.bg+";\n    background-color: "+i.xwlo+";\n    padding: 1px;\n    padding-right: 5px;\n    padding-left: 5px;\n    cursor:default;\n}\n."+this._menuId+">ul>li.active{\n    background-color: "+i.hi+";\n}\n."+this._menuId+" {\n    position: relative;\n    color: white;\n    float: left;\n    border-radius: 5px;\n    padding: 3px;\n    font: "+i.font.font+";\n    color:"+i.xwfg+"\n}\n."+this._menuId+">ul>li.separator {\n    background-color: "+i.xwbs+";\n}\n.sigplot-menu-checkbox:before{\n    margin-right: 3px; \n}\n.sigplot-menu-checkbox.checked:before {\n    content: '\\25b8';\n    width: 2px;\n    height: 3px;\n}\n.sigplot-menu-checkbox.checkbox:before {\n    content: '\\25A1';\n    width: 2px;\n    height: 3px;\n}\n.sigplot-menu-checkbox.checkbox.checked:before {\n    content: '\\25A3';\n    width: 2px;\n    height: 3px;\n}\n",this._container.getElementsByTagName("style").length?(e=this._container.getElementsByTagName("style")[0]).textContent=t:((e=document.createElement("style")).textContent=t,this._container.appendChild(e))}},t.exports=r},function(t,e,i){!function(){var e=i(3),n=i(4),r=function(t){this.plot=t,this.xbuf=void 0,this.ybuf=void 0,this.offset=0,this.xstart=0,this.xdelta=0,this.imin=0,this.xmin=0,this.xmax=0,this.name="",this.cx=!1,this.hcb=void 0,this.size=0,this.display=!0,this.color=0,this.line=3,this.thick=1,this.symbol=0,this.radius=3,this.skip=0,this.xsub=0,this.ysub=0,this.xdata=!1,this.modified=!1,this.opacity=1,this.fillStyle=null,this.preferred_origin=1,this.pointbufsize=0,this.xptr=null,this.yptr=null,this.xpoint=null,this.ypoint=null,this.options={}};r.prototype={init:function(t,i){if(this.plot._Gx,this.hcb=t,this.hcb.buf_type="D",this.offset=0,this.size=0,this.xbufn=0,this.ybufn=0,this.hcb.pipe?2===t.class&&(e.force1000(t),this.size=t.subsize):2===t.class?(e.force1000(t),this.size=t.subsize):this.size=t.size,i.framesize&&(this.size=i.framesize),this.hcb.pipe&&!this.size)throw"1D layer could not determine appropriate size for pipe, use framesize option";if(t.class<=2&&(this.xsub=-1,this.ysub=1,this.cx="C"===t.format[0]),this.skip=1,this.cx&&(this.skip=2),this.xstart=t.xstart,this.xdelta=t.xdelta,this.size>0){var n=t.xstart+t.xdelta*(this.size-1);this.xmin=Math.min(t.xstart,n),this.xmax=Math.max(t.xstart,n)}else this.xmin=0,this.xmax=0;if(this.xlab=t.xunits,this.ylab=t.yunits,this.hcb.pipe){this.drawmode="scrolling",this.position=0,this.tle=i.tl,this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn);var r=this;e.addPipeWriteListener(this.hcb,(function(){r._onpipewrite()}))}},_onpipewrite:function(){var t=new e.PointArray(this.ybuf),i=this.tle;void 0===i&&(i=Math.floor(e.pavail(this.hcb))/this.hcb.spa);for(var n=i*this.hcb.spa;e.pavail(this.hcb)>=n;){if("lefttoright"===this.drawmode)this.position=0,t.set(t.subarray(0,this.size-n),n);else if("righttoleft"===this.drawmode)this.position=this.size-i,t.set(t.subarray(n),0);else if("scrolling"!==this.drawmode)throw"Invalid draw mode";if(0===e.grabx(this.hcb,t,Math.min(i,this.size-this.position)*this.hcb.spa,this.position*this.hcb.spa))break;this.position=(this.position+i)%this.size,void 0===this.tle&&(i=Math.floor(e.pavail(this.hcb))/this.hcb.spa),n=i*this.hcb.spa}},get_data:function(t,i){var n,r=this.plot._Gx,o=this.hcb,s=this.skip;n=2===o.class?o.subsize:o.size;var a=0,l=0;r.index?(a=Math.floor(t),l=Math.floor(i+.5)):o.xdelta>=0?(a=Math.floor((t-o.xstart)/o.xdelta)-1,l=Math.floor((i-o.xstart)/o.xdelta+.5)):(a=Math.floor((i-o.xstart)/o.xdelta)-1,l=Math.floor((t-o.xstart)/o.xdelta+.5)),a=Math.max(0,a),l=Math.min(n-1,l);var h=Math.max(0,Math.min(l-a+1,r.bufmax));if(o.xdelta<0&&(a=l-h+1),a>=this.imin&&a+h<=this.imin+this.size&&void 0!==this.ybuf);else if(this.modified);else if(o.class<=2){var c=this.offset+a;s=this.skip,this.ybufn=h*Math.max(s*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),(void 0===this.ybuf||this.ybuf.byteLength<this.ybufn)&&(this.ybuf=new ArrayBuffer(this.ybufn));var u=new e.PointArray(this.ybuf),d=e.grab(o,u,c,h);this.imin=a,this.xstart=o.xstart+a*this.xdelta,this.size=d}},change_settings:function(t){if(void 0!==t.index)if(t.index)this.xstart=1,this.xdelta=1,this.xmin=1,this.xmax=this.size;else{this.xstart=this.hcb.xstart+this.imin*this.xdelta,this.xdelta=this.hcb.xdelta;var i=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=Math.min(this.hcb.xstart,i),this.xmax=Math.max(this.hcb.xstart,i)}void 0!==t.drawmode&&(this.drawmode=t.drawmode,this.position=0,this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn)),void 0!==t.framesize&&(this.size=t.framesize,this.xstart=this.hcb.xstart+this.imin*this.xdelta,this.xdelta=this.hcb.xdelta,i=this.hcb.xstart+this.hcb.xdelta*(this.size-1),this.xmin=Math.min(this.hcb.xstart,i),this.xmax=Math.max(this.hcb.xstart,i),this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn))},reload:function(t,i){if(this.hcb.pipe)throw"reload cannot be used with pipe, use push instead";var n=this.hcb.dview.length!==t.length||i;if(i)for(var r in i)this.hcb[r]=i[r],"xstart"!==r&&"xdelta"!==r||(n=!0);this.hcb.setData(t),this.imin=-1,this.size=this.hcb.size;var o=this.xmin,s=this.xmax;if(n){2===this.hcb.class&&e.force1000(this.hcb);var a=this.hcb.xstart+this.hcb.xdelta*(this.hcb.size-1);this.xmin=Math.min(this.hcb.xstart,a),this.xmax=Math.max(this.hcb.xstart,a),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,o=void 0,s=void 0}return{xmin:o,xmax:s}},push:function(t,i,n){if(i){for(var r in i)this.hcb[r]=i[r],"type"===r&&(this.hcb.class=i[r]/1e3);i.subsize&&2===this.hcb.class&&(e.force1000(this.hcb),this.size=this.hcb.subsize,this.position=null,this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn));var o=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=this.hcb.xmin||Math.min(this.hcb.xstart,o),this.xmax=this.hcb.xmax||Math.max(this.hcb.xstart,o),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart}return t.length>0&&e.filad(this.hcb,t,n),!!i},prep:function(t,i){var n=this.plot._Gx;this.plot._Mx,this.get_data(t,i);var r=Math.ceil(this.size),o=this.skip;if(0===r)return{num:0,start:0,end:0};r*e.PointArray.BYTES_PER_ELEMENT>this.pointbufsize&&(this.pointbufsize=r*e.PointArray.BYTES_PER_ELEMENT,this.xptr=new ArrayBuffer(this.pointbufsize),this.yptr=new ArrayBuffer(this.pointbufsize),this.xpoint=new e.PointArray(this.xptr),this.ypoint=new e.PointArray(this.yptr));var s,a,l,h=new e.PointArray(this.ybuf),c=this.xmin,u=this.xmax;if(5===n.cmode||this.xsub>0)r<=0?(c=n.panxmin,u=n.panxmax):5!==n.cmode?this.xpoint=new e.PointArray(this.xbuf):this.cx?e.vmov(h,o,this.xpoint,1,r):0!==this.line?(l=e.vmxmn(h,r),this.xpoint[0]=l.smax,this.xpoint[1]=l.smin,s=0,a=2,r=2):this.xpoint=h,r>0&&(u=(l=e.vmxmn(this.xpoint,r)).smax,c=l.smin,s=0,a=r);else if(r>0){var d=this.xstart,f=this.xdelta,p=r;n.index?(s=0,a=r-1):f>=0?(s=Math.max(1,Math.min(p,Math.round((t-d)/f)))-1,a=Math.max(1,Math.min(p,Math.round((i-d)/f)+2))-1):(s=Math.max(1,Math.min(p,Math.round((i-d)/f)-1))-1,a=Math.max(1,Math.min(p,Math.round((t-d)/f)+2))-1),(r=a-s+1)<0&&(e.log.debug("Nothing to plot"),r=0),h=new e.PointArray(this.ybuf).subarray(s*o),d+=f*s;for(var x=0;x<r;x++)n.index?this.xpoint[x]=this.imin+x+1:this.xpoint[x]=d+x*f}if(r<=0)return e.log.debug("Nothing to plot"),{num:r,start:s,end:a};if(this.cx)1===n.cmode?e.cvmag(h,this.ypoint,r):2===n.cmode?25===n.plab?(e.cvpha(h,this.ypoint,r),e.vsmul(this.ypoint,1/(2*Math.PI),this.ypoint,r)):24!==n.plab?e.cvpha(h,this.ypoint,r):e.cvphad(h,this.ypoint,r):3===n.cmode?e.vmov(h,o,this.ypoint,1,r):n.cmode>=6?e.cvmag2(h,this.ypoint,r):n.cmode>=4&&e.vmov(h.subarray(1),o,this.ypoint,1,r);else if(5===n.cmode)e.vfill(this.ypoint,0,r);else if(1===n.cmode||n.cmode>=6)for(x=0;x<r;x++)this.ypoint[x]=Math.abs(h[x]);else for(x=0;x<r;x++)this.ypoint[x]=h[x];if(n.cmode>=6){e.vlog10(this.ypoint,n.dbmin,this.ypoint);var m=10;7===n.cmode&&(m=20),n.lyr.length>0&&n.lyr[0].cx&&(m/=2),e.vsmul(this.ypoint,m,this.ypoint)}var y=(u=(l=e.vmxmn(this.ypoint,r)).smax)-(c=l.smin);return y<0&&(c=(u=c)+y,y=-y),y<=1e-20?(c-=1,u+=1):(c-=.02*y,u+=.02*y),{num:r,start:s,end:a,panxmin:this.xmin,panxmax:this.xmax,panymin:c,panymax:u}},get_pan_bounds:function(t){this.plot._Mx;var e=this.plot._Gx,i=this.xmin,n=Math.min(i+this.size*this.xdelta,i+e.bufmax*this.xdelta);let r,o;t?(i=t.xmin,n=t.xmax):e.all&&e.expand&&(i=this.xmin,n=this.xmax);let s=0;for(;i<n;){let t=this.prep(i,n);r=void 0===r?t.panymin:Math.min(r,t.panymin),o=void 0===o?t.panymax:Math.max(o,t.panymax),s+=t.num,e.all?0===this.size?i=n:e.index?i+=t.num:this.xdelta>=0?i+=t.num*this.xdelta:n+=t.num*this.xdelta:i=n}return void 0===r&&(r=0),void 0===o&&(o=0),this.ymin=r,this.ymax=o,{num:s,xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax}},draw:function(){var t=this.plot._Mx,i=this.plot._Gx,r=this.color,o=this.symbol,s=this.radius,a=0,l={};this.fillStyle?l.fillStyle=this.fillStyle:i.fillStyle&&(l.fillStyle=i.fillStyle),this.options&&(l.highlight=this.options.highlight,l.noclip=this.options.noclip),0===this.line?a=0:(a=1,this.thick>0?a=this.thick:this.thick<0&&(a=Math.abs(this.thick),l.dashed=!0),1===this.line&&(l.vertsym=!0),2===this.line&&(l.horzsym=!0),4===this.line&&(l.horzsym=!0,l.vertsym=!0));var h,c,u=i.segment&&5!==i.cmode&&this.xsub>0&&!0,d=this.xdelta;if(this.xdata?(h=this.xmin,c=this.xmax):(h=Math.max(this.xmin,t.stk[t.level].xmin))>=(c=Math.min(this.xmax,t.stk[t.level].xmax))&&(i.panxmin=Math.min(i.panxmin,this.xmin),i.panxmax=Math.max(i.panxmax,this.xmax)),0===a&&0===o)return{num:0};let f,p,x=0;for(;h<c;){var m=this.prep(h,c);f=void 0===f?m.panymin:Math.min(f,m.panymin),p=void 0===p?m.panymax:Math.max(p,m.panymax),x+=m.num,m.num>0&&(u||n.trace(t,r,new e.PointArray(this.xptr),new e.PointArray(this.yptr),m.num,m.start,1,a,o,s,l)),0===this.size?h=c:i.index?h+=m.num:d>=0?h+=this.size*d:c+=this.size*d}if(this.position&&"scrolling"===this.drawmode){var y=n.real_to_pixel(t,this.position*this.xdelta,0);y.x>t.l&&y.x<t.r&&n.draw_line(t,"white",y.x,t.t,y.x,t.b)}return this.ymin=f,this.ymax=p,{num:x,xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax}},add_highlight:function(t){this.options.highlight||(this.options.highlight=[]);var e=t.xstart,i=t.xend,n=isNaN(e),r=isNaN(i);!0!==n&&null!=e||(this.options.highlight=[]),!0!==r&&null!=i||(this.options.highlight=[]),t instanceof Array?this.options.highlight.push.apply(this.options.highlight,t):this.options.highlight.push(t),this.plot.refresh()},remove_highlight:function(t){if(this.options.highlight){for(var e=this.options.highlight.length;e--;)t!==this.options.highlight[e]&&t!==this.options.highlight[e].id||this.options.highlight.splice(e,1);this.plot.refresh()}},get_highlights:function(){return this.options.highlight?this.options.highlight.slice(0):[]},clear_highlights:function(){this.options.highlight&&(this.options.highlight=void 0,this.plot.refresh())}};var o=[0,53,27,80,13,40,67,93,7,60,33,87,20,47,73,100];r.overlay=function(t,i,s){var a=t._Gx,l=t._Mx;2===i.class&&e.force1000(i),i.buf_type="D";var h=1;if(2===i.class&&i.size>0){var c=i.size/i.subsize;h=Math.min(c,16-a.lyr.length)}var u=s.name;delete s.name;for(var d=[],f=0;f<h;f++){var p=new r(t);p.init(i,s);var x=a.lyr.length%o.length;for(var m in p.color=n.getcolor(l,e.Mc.colormap[3].colors,o[x]),2===i.class?(void 0!==u&&(Array.isArray(u)?p.name=u[f]:(p.name=u,p.name=p.name+"."+n.pad((f+1).toString(),3,"0"))),p.name||(i.file_name?p.name=e.trim_name(i.file_name):p.name="layer_"+a.lyr.length,p.name=p.name+"."+n.pad((f+1).toString(),3,"0")),p.offset=f*i.subsize):(void 0!==u?p.name=u:i.file_name?p.name=e.trim_name(i.file_name):p.name="layer_"+a.lyr.length,p.offset=0),s)void 0!==p[m]&&(p[m]=s[m]);t.add_layer(p)&&d.push(p)}return d},t.exports=r}()},function(t,e,i){var n,r,o;n=i(3),r=i(4),(o=function(t){this.plot=t,this.offset=0,this.xstart=0,this.xdelta=0,this.ystart=0,this.ydelta=0,this.imin=0,this.xmin=0,this.xmax=0,this.name="",this.cx=!1,this.drawmode="scrolling",this.hcb=void 0,this.display=!0,this.color=0,this.line=3,this.thick=1,this.symbol=0,this.radius=3,this.skip=0,this.xsub=0,this.ysub=0,this.xdata=!1,this.modified=!1,this.preferred_origin=4,this.opacity=1,this.xcompression=t._Gx.xcompression,this.downscale=t._Gx.rasterDownscale,this.lpb=void 0,this.yc=1,this.options={}}).prototype={init:function(t){this.plot._Gx;var e=this.plot._Mx;if(this.hcb=t,this.hcb.buf_type="D",this.hcb.pipe){var i=this;this.position=0,this.frame=0,"horizontal"!==this.drawdirection?this.lps=this.hcb.lps||Math.ceil(Math.max(1,e.b-e.t)):this.lps=this.hcb.lps||Math.ceil(Math.max(1,e.r-e.l)),n.addPipeWriteListener(this.hcb,(function(){i._onpipewrite()}))}else this.lps=this.hcb.lps||Math.ceil(t.size);this.offset=0,this.xbufn=0,this.ybufn=0,t.class<=2&&(this.xsub=-1,this.ysub=1,this.cx="C"===t.format[0]),this.skip=1,this.cx&&(this.skip=2),this.init_axes()},init_axes:function(){var t=this.plot._Gx;if(this.plot._Mx,t.index)this.xstart=1,this.xdelta=1,this.xmin=1,this.ystart=1,this.ydelta=1,this.ymin=1,"horizontal"!==this.drawdirection?(this.xmax=this.hcb.subsize,this.ymax=this.size):(this.xmax=this.size,this.ymax=this.hcb.subsize);else if("horizontal"!==this.drawdirection){this.xstart=this.hcb.xstart,this.xdelta=this.hcb.xdelta;var e=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize;this.xmin=this.hcb.xmin||Math.min(this.hcb.xstart,e),this.xmax=this.hcb.xmax||Math.max(this.hcb.xstart,e),this.ystart=this.hcb.ystart,this.ydelta=this.hcb.ydelta,e=this.hcb.ystart+this.hcb.ydelta*this.lps,this.ymin=this.hcb.ymin||Math.min(this.hcb.ystart,e),this.ymax=this.hcb.ymax||Math.max(this.hcb.ystart,e)}else this.ystart=this.hcb.xstart,this.ydelta=this.hcb.xdelta,e=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize,this.ymin=this.hcb.xmin||Math.min(this.hcb.xstart,e),this.ymax=this.hcb.xmax||Math.max(this.hcb.xstart,e),this.xstart=this.hcb.ystart,this.xdelta=this.hcb.ydelta,e=this.hcb.ystart+this.hcb.ydelta*this.lps,this.xmin=this.hcb.ymin||Math.min(this.hcb.ystart,e),this.xmax=this.hcb.ymax||Math.max(this.hcb.ystart,e);this.xframe=this.hcb.subsize,this.yframe=this.lps*this.hcb.subsize/this.xframe,0===this.lpb&&(this.lpb=this.yframe),(!this.lpb||this.lpb<=0)&&(this.lpb=16),this.lpb=Math.max(1,this.lpb/this.yc)*this.yc,"horizontal"!==this.drawdirection?(this.xlab=this.hcb.xunits,this.ylab=this.hcb.yunits):(this.xlab=this.hcb.yunits,this.ylab=this.hcb.xunits),"falling"===this.drawmode||"horizontal"===this.drawdirection?(this.plot._Mx.origin=1,this.preferred_origin=1):(this.plot._Mx.origin=4,this.preferred_origin=4)},_onpipewrite:function(){for(var t=this.plot._Gx,e=this.plot._Mx;n.pavail(this.hcb)>=this.hcb.subsize*this.hcb.spa;){if("scrolling"!==this.drawmode&&(this.hcb.ystart+=this.hcb.ydelta,this.ystart=this.hcb.ystart,this.ymin=this.hcb.ystart-this.hcb.ydelta*this.lps,this.ymax=this.hcb.ystart),"falling"===this.drawmode&&"horizontal"!==this.drawdirection)this.position=0,this.img&&r.shift_image_rows(e,this.img,1);else if("rising"===this.drawmode&&"horizontal"!==this.drawdirection)this.position=this.lps-1,this.img&&r.shift_image_rows(e,this.img,-1);else{if("scrolling"!==this.drawmode)throw"Invalid draw mode";var i=Math.abs(this.ymax-this.ymin);this.ystart=0,this.ymin=0,this.ymax=i,this.position>=this.lps&&(this.position=0)}if(!this.buf)return;if(0===n.grabx(this.hcb,this.buf,this.hcb.subsize*this.hcb.spa))return void n.log.error("Internal error");var o=new n.PointArray(this.hcb.subsize);this.cx?1===t.cmode?n.cvmag(this.buf,o,o.length):2===t.cmode?25===t.plab?(n.cvpha(this.buf,o,o.length),n.vsmul(o,1/(2*Math.PI),o,o.length)):24!==t.plab?n.cvpha(this.buf,o,o.length):n.cvphad(this.buf,o,o.length):3===t.cmode?n.vmov(this.buf,this.skip,o,1,o.length):4===t.cmode?n.vmov(this.buf.subarray(1),this.skip,o,1,o.length):5===t.cmode?n.vfill(o,0,o.length):6===t.cmode?n.cvmag2logscale(this.buf,t.dbmin,10,o):7===t.cmode&&n.cvmag2logscale(this.buf,t.dbmin,20,o):1===t.cmode?n.vabs(this.buf,o):2===t.cmode?n.vfill(o,0,o.length):3===t.cmode?n.vmov(this.buf,this.skip,o,1,o.length):4===t.cmode||5===t.cmode?n.vfill(o,0,o.length):6===t.cmode?n.vlogscale(this.buf,t.dbmin,10,o):7===t.cmode&&n.vlogscale(this.buf,t.dbmin,20,o);for(var s,a,l=o[0],h=o[0],c=0;c<o.length;c++)o[c]<l&&(l=o[c]),o[c]>h&&(h=o[c]);if(1===t.autol)s=l,a=h;else if(t.autol>1){var u=1/Math.max(t.autol,1);s=t.zmin*u+l*(1-u),a=t.zmax*u+h*(1-u)}else t.autol<0&&(u=1/Math.max(5,1),s=t.zmin*u+l*(1-u),a=t.zmax*u+h*(1-u));if(0!=(1&t.autoz)&&(t.zmin=s),0!=(2&t.autoz)&&(t.zmax=a),t.p_cuts){if("scrolling"===this.drawmode){var d=this.position*this.hcb.subsize,f=d+this.hcb.subsize,p=0;for(c=d;c<f;c++)this.zbuf[c]=o[p],p++}if("falling"===this.drawmode){var x=(this.lps-1)*this.hcb.subsize,m=this.zbuf.slice(0,x);for(this.zbuf=[],c=0;c<this.hcb.subsize;c++)this.zbuf.push(o[c]);this.zbuf.push.apply(this.zbuf,m),m=[]}if("rising"===this.drawmode){for(x=this.lps*this.hcb.subsize,m=this.zbuf.slice(this.hcb.subsize,x),this.zbuf=[],this.zbuf.push.apply(this.zbuf,m),c=0;c<this.hcb.subsize;c++)this.zbuf.push(o[c]);m=[]}}this.img&&("horizontal"!==this.drawdirection?r.update_image_row(e,this.img,o,this.position,t.zmin,t.zmax,this.xcompression):r.update_image_col(e,this.img,o,this.position,t.zmin,t.zmax,this.xcompression)),this.frame+=1,"scrolling"===this.drawmode&&(this.position=(this.position+1)%this.lps),0===e.level&&(t.panymin=this.ymin,t.panymax=this.ymax,e.stk[0].ymin=this.ymin,e.stk[0].ymax=this.ymax)}},get_data:function(){var t=this.hcb;this.buf||(this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.lps*this.hcb.subsize))),this.hcb.pipe||n.grab(t,this.buf,0,t.subsize)},get_z:function(t,e){var i=Math.floor(t/this.hcb.xdelta),n=Math.floor(e/this.hcb.ydelta)*this.hcb.subsize+i;return this.zbuf[n]},change_settings:function(t){var e=this.plot._Gx;if(t.subsize){this.hcb.subsize=t.subsize,this.hcb.ape=t.subsize,this.hcb.size=this.hcb.dview.length/(this.hcb.spa*this.hcb.ape),this.lps=Math.ceil(this.hcb.size);var i=this.hcb.ystart+this.hcb.ydelta*this.lps;this.ymin=this.hcb.ymin||Math.min(this.hcb.ystart,i),this.ymax=this.hcb.ymax||Math.max(this.hcb.ystart,i)}if(void 0!==t.cmode&&(this.img=void 0,0!=(1&e.autoz)&&(e.zmin=void 0),0!=(2&e.autoz)&&(e.zmax=void 0)),void 0===t.zmin&&void 0===t.zmax&&void 0===t.autoz||(this.img=void 0),void 0!==t.drawmode&&(this.drawmode=t.drawmode),void 0!==t.drawdirection&&(this.drawdirection=t.drawdirection),void 0===t.drawmode&&void 0===t.xmin&&void 0===t.xmax&&void 0===t.xdelta&&void 0===t.xstart&&void 0===t.drawdirection||(this.position=0,this.frame=0,this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.lps*this.hcb.subsize)),this.img=void 0,this.init_axes()),void 0!==t.opacity&&(this.opacity=t.opacity),void 0!==t.p_cuts){var r=e.p_cuts;r=null===t.p_cuts?!r:t.p_cuts,this.hcb.pipe&&(r?(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.lps*this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.hcb.subsize)))}void 0!==t.xcmp&&("smooth"===t.xcmp?this.xcompression=0:"avg"===t.xcmp?this.xcompression=1:"min"===t.xcmp?this.xcompression=2:"max"===t.xcmp?this.xcompression=3:"first"===t.xcmp?this.xcompression=4:"maxabs"===t.xcmp?this.xcompression=5:this.xcompression=t.xcmp),void 0!==t.name&&(this.name=t.name),void 0!==t.downscale&&(this.downscale=t.downscale)},reload:function(t,e){if(this.hcb.pipe)throw"reload cannot be used with pipe, use push instead";var i=this.hcb.dview.length!==t.length||e;if(e)for(var n in e)this.hcb[n]=e[n],("xstart"===n||"xdelta"===n|"ystart"===n||"ydelta"===n||"subsize"===n)&&(i=!0);Array.isArray(t)&&Array.isArray(t[0])&&(this.hcb.type=2e3,this.hcb.class=2,this.hcb.subsize=t[0].length,this.hcb.size=t.length,i=!0),this.hcb.setData(t),this.init(this.hcb),this.img=null,this.buf=null;var r=this.xmin,o=this.xmax;if(i){var s=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize;this.xmin=Math.min(this.hcb.xstart,s),this.xmax=Math.max(this.hcb.xstart,s),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,r=void 0,o=void 0}return{xmin:r,xmax:o}},push:function(t,e,i){var r=this.plot._Gx,o=!1,s=null;if(e){for(var a in e.timestamp&&(s=e.timestamp,delete e.timestamp),e.subsize&&e.subsize!==this.hcb.subsize&&(this.hcb.subsize=e.subsize,this.hcb.pipe&&!r.p_cuts?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.hcb.subsize),this.img=void 0):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.lps*this.hcb.subsize),this.img=void 0),o=!0),e)this.hcb[a]!==e[a]&&(this.hcb[a]=e[a],"type"===a&&(this.hcb.class=e[a]/1e3),o=!0);if(e.lps&&(this.lps=e.lps),o){var l=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize;this.xmin=Math.min(this.hcb.xstart,l),this.xmax=Math.max(this.hcb.xstart,l),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,this.ystart=this.hcb.ystart,this.ydelta=this.hcb.ydelta,l=this.hcb.ystart+this.hcb.ydelta*this.lps,this.ymin=Math.min(this.hcb.ystart,l),this.ymax=Math.max(this.hcb.ystart,l)}}return 1!==this.hcb.yunits&&4!==this.hcb.yunits||!this.hcb.timecode&&s&&(this.hcb.timecode=n.j1970toj1950(s),this.hcb.ystart=0,o=!0),t.length>0&&n.filad(this.hcb,t,i),o},get_pan_bounds:function(t){let e=this.prep();return e?{num:e.num,xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax}:{num:0}},prep:function(t,e){var i,o,s=this.plot._Gx,a=this.plot._Mx,l=this.lps,h=(this.skip,this.xmin,this.xmax,this.hcb.subsize);if(this.xcompression>0&&(h="horizontal"!==this.drawdirection?Math.min(this.hcb.subsize,Math.ceil(a.r-a.l)):Math.min(this.hcb.subsize,Math.ceil(a.t-a.b))),this.get_data(),this.hcb.pipe)this.img||(void 0===s.zmin&&(s.zmin=0),void 0===s.zmax&&(s.zmax=0),this.img=r.create_image(a,null,this.hcb.subsize,h,this.lps,s.zmin+s.zoff,s.zmax+s.zoff,this.xcompression,this.drawdirection));else{if(5===s.cmode||this.xsub>0);else if(l>0){var c=this.xstart,u=this.xdelta,d=l;s.index?(i=0,o=l-1):u>=0?(i=Math.max(1,Math.min(d,Math.round((t-c)/u)))-1,o=Math.max(1,Math.min(d,Math.round((e-c)/u)+2))-1):(i=Math.max(1,Math.min(d,Math.round((e-c)/u)-1))-1,o=Math.max(1,Math.min(d,Math.round((t-c)/u)+2))-1),(l=o-i+1)<0&&(n.log.debug("Nothing to plot"),l=0)}if(l<=0)return void n.log.debug("Nothing to plot");if(5===s.cmode||this.ysub>0);else if(l>0){var f=this.ystart,p=this.ydelta;d=l,s.index?(i=0,o=l-1):p>=0?(i=Math.max(1,Math.min(d,Math.round((t-f)/p)))-1,o=Math.max(1,Math.min(d,Math.round((e-f)/p)+2))-1):(i=Math.max(1,Math.min(d,Math.round((e-f)/p)-1))-1,o=Math.max(1,Math.min(d,Math.round((t-f)/p)+2))-1),(l=o-i+1)<0&&(n.log.debug("Nothing to plot"),l=0)}this.cx?1===s.cmode?n.cvmag(this.buf,this.zbuf,this.zbuf.length):2===s.cmode?25===s.plab?(n.cvpha(this.buf,this.zbuf,this.zbuf.length),n.vsmul(this.zbuf,1/(2*Math.PI),this.zbuf,this.zbuf.length)):24!==s.plab?n.cvpha(this.buf,this.zbuf,this.zbuf.length):n.cvphad(this.buf,this.zbuf,this.zbuf.length):3===s.cmode?n.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===s.cmode?n.vmov(this.buf.subarray(1),this.skip,this.zbuf,1,this.zbuf.length):5===s.cmode?n.vfill(this.zbuf,0,this.zbuf.length):6===s.cmode?n.cvmag2logscale(this.buf,s.dbmin,10,this.zbuf):7===s.cmode&&n.cvmag2logscale(this.buf,s.dbmin,20,this.zbuf):1===s.cmode?n.vabs(this.buf,this.zbuf):2===s.cmode?n.vfill(this.zbuf,0,this.zbuf.length):3===s.cmode?n.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===s.cmode||5===s.cmode?n.vfill(this.zbuf,0,this.zbuf.length):6===s.cmode?n.vlogscale(this.buf,s.dbmin,10,this.zbuf):7===s.cmode&&n.vlogscale(this.buf,s.dbmin,20,this.zbuf);var x=this.zbuf,m=0,y=0;if(s.autol<=0||this.hcb.pipe){if(x.length>0){m=x[0],y=x[0];for(var v=0;v<x.length&&!(v/this.xframe>=this.lpb);v++)x[v]<m&&(m=x[v]),x[v]>y&&(y=x[v])}0!=(1&s.autoz)&&(void 0!==s.zmin?s.zmin=Math.min(s.zmin,m):s.zmin=m),0!=(2&s.autoz)&&(void 0!==s.zmax?s.zmax=Math.min(s.zmax,y):s.zmax=y),this.img=r.create_image(a,this.zbuf,this.hcb.subsize,h,this.lps,s.zmin+s.zoff,s.zmax+s.zoff,this.xcompression,this.drawdirection)}else{var _=this.hcb.size,b=1/Math.max(s.autol,1);if(this.img||(this.img=r.create_image(a,this.zbuf,this.hcb.subsize,h,this.lps,s.zmin+s.zoff,s.zmax+s.zoff,this.drawdirection)),s.zmin=0,s.zmax=0,x.length>0)for(var g=0;g<_;g++){var w=g*this.xframe;for(m=x[w],y=x[w],v=0;v<this.xframe;v++)m=Math.min(x[w+v],m),y=Math.max(x[w+v],y);2!==s.autoz&&void 0!==m&&(s.zmin=m*b+s.zmin*(1-b)),1!==s.autoz&&void 0!==y&&(s.zmax=y*b+s.zmax*(1-b)),r.update_image_row(a,this.img,x.subarray(w,w+this.xframe),g,s.zmin,s.zmax)}}}if(this.img.cmode=s.cmode,this.img.cmap=s.cmap,this.img.origin=a.origin,this.hcb.pipe&&this.frame<this.lps){var M=new Uint32Array(this.img);if("horizontal"!==this.drawdirection)if("rising"===this.drawmode)for(v=0;v<M.length-this.frame*h;v++)M[v]=0;else for(v=this.frame*h;v<M.length;v++)M[v]=0;else for(var k=this.frame;k<this.lps;k++)for(v=0;v<this.img.height;v++)M[v*this.img.width+k]=0}return{num:l,panxmin:this.xmin,panxmax:this.xmax,panymin:this.ymin,panymax:this.ymax}},xCutData:function(t,e){var i,n,r=this.plot._Gx,o=this.plot._Mx,s=this.lps,a=this.xframe;if(this.hcb.pipe&&!r.p_cuts)return null;if("horizontal"!==this.drawdirection){var l;if((l=this.hcb.pipe?Math.floor(s*(o.ypos-o.t)/(o.b-o.t)):Math.floor((t-this.ystart)/this.ydelta))<0||l>this.lps)return null;var h=l*a,c=h+a;n=e||this.hcb.pipe?this.zbuf.slice(h,c):this.buf.slice(h,c)}else for(n=[],i=Math.round((t-this.ystart)/this.ydelta);i<a*s;i+=a)e||this.hcb.pipe?n.push(this.zbuf[i]):n.push(this.buf[i]);return n},xCut:function(t){var e=this.plot._Mx,i=this.plot._Gx;if(void 0!==t){this.cut_stash={},this.cut_stash.ylabel=i.ylabel,this.cut_stash.xlabel=i.xlabel,this.cut_stash.level=e.level,this.cut_stash.stk=JSON.parse(JSON.stringify(e.stk)),this.cut_stash.panymin=i.panymin,this.cut_stash.panymax=i.panymax,this.cut_stash.panxmin=i.panxmin,this.cut_stash.panxmax=i.panxmax;var r=this.xCutData(t);if(!r)return;this.old_drawmode=this.drawmode,this.old_autol=i.autol,this.plot.change_settings({drawmode:"undefined",autol:-1});var o=i.lyr.length>0&&this.cx;1===i.cmode?i.ylabel=n.UNITS[28][0]:2===i.cmode?i.ylabel=i.plab:3===i.cmode&&o?i.ylabel=n.UNITS[21][0]:4===i.cmode||5===i.cmode?i.ylabel=n.UNITS[22][0]:6===i.cmode?i.ylabel=n.UNITS[26][0]:7===i.cmode?i.ylabel=n.UNITS[27][0]:i.ylabel="Intensity","None"!==n.UNITS[i.xlab][0]&&"Unknown"!==n.UNITS[i.xlab][0]?i.xlabel=n.UNITS[i.xlab][0]:i.xlabel="Frequency",i.xlabel+="    CURRENTLY IN X_CUT MODE",e.origin=1,this.xcut_layer=this.plot.overlay_array(r,{xstart:this.xstart,xdelta:this.xdelta},{name:"x_cut_data",line:3});for(var s=this.plot.get_lyrn(this.xcut_layer),a=0;a<i.lyr.length;a++)a!==s&&(i.lyr[a].display=!i.lyr[a].display);i.x_cut_press_on=!0;var l=n.vmxmn(r,this.xframe),h=l.smax,c=l.smin,u=h-c;u<0&&(c=(h=c)+u,u=-u),u<=1e-20?(c-=1,h+=1):(c-=.02*u,h+=.02*u),i.panymin=l.smin,i.panymax=l.smax;for(var d=1;d<e.level+1;d++)e.stk[d].ymin=c,e.stk[d].ymax=h,e.stk[d].yscl=(e.stk[d].ymax-e.stk[d].ymin)/(e.b-e.t);this.plot.rescale()}else if(i.x_cut_press_on)for(i.x_cut_press_on=!1,d=0;d<i.lyr.length;d++)d!==this.xcut_layer&&(i.lyr[d].display=!i.lyr[d].display),this.plot.deoverlay(this.xcut_layer),i.xlabel=this.cut_stash.xlabel,i.ylabel=this.cut_stash.ylabel,e.level=this.cut_stash.level,e.stk=JSON.parse(JSON.stringify(this.cut_stash.stk)),i.panymin=this.cut_stash.panymin,i.panymax=this.cut_stash.panymax,i.panxmin=this.cut_stash.panxmin,i.panxmax=this.cut_stash.panxmax,this.cut_stash=void 0,this.plot.rescale(),this.plot.refresh(),this.xcut_layer=void 0,this.plot.change_settings({drawmode:this.old_drawmode,autol:this.old_autol})},yCutData:function(t,e){var i,n=this.plot._Gx,r=this.plot._Mx,o=this.lps,s=this.xframe,a=0;if(this.hcb.pipe&&!n.p_cuts)return null;if("horizontal"!==this.drawdirection){var l;if(i=[],!this.hcb.pipe||e)if(l=Math.floor((t-this.xstart)/this.xdelta),e)for(a=l;a<s*o;a+=s)i.push(this.zbuf[a]);else for(a=l;a<s*o;a+=s)i.push(this.buf[a]);else for(a=l=Math.floor(s*(r.xpos-r.l)/(r.r-r.l));a<s*o;a+=s)i.push(this.zbuf[a])}else{var h=Math.round((t-this.xstart)/this.xdelta);if(h<0||h>this.lps)return;var c=h*s,u=c+s;i=!this.hcb.pipe||e?this.zbuf.slice(c,u):this.buf.slice(c,u)}return i},yCut:function(t){var e=this.plot._Mx,i=this.plot._Gx;if(void 0!==t){this.cut_stash={},this.cut_stash.xlabel=i.xlabel,this.cut_stash.ylabel=i.ylabel,this.cut_stash.level=e.level,this.cut_stash.stk=JSON.parse(JSON.stringify(e.stk)),this.cut_stash.ymax=e.stk[e.level].ymax,this.cut_stash.panymin=i.panymin,this.cut_stash.panymax=i.panymax,this.cut_stash.panxmin=i.panxmin,this.cut_stash.panxmax=i.panxmax;var r=this.yCutData(t);this.old_drawmode=this.drawmode,this.old_autol=i.autol,this.plot.change_settings({drawmode:"undefined",autol:-1});var o=i.lyr.length>0&&this.cx;1===i.cmode?i.ylabel=n.UNITS[28][0]:2===i.cmode?i.ylabel=i.plab:3===i.cmode&&o?i.ylabel=n.UNITS[21][0]:4===i.cmode||5===i.cmode?i.ylabel=n.UNITS[22][0]:6===i.cmode?i.ylabel=n.UNITS[26][0]:7===i.cmode?i.ylabel=n.UNITS[27][0]:i.ylabel="Intensity","None"!==n.UNITS[i.ylab][0]&&"Unknown"!==n.UNITS[i.ylab][0]?i.xlabel=n.UNITS[i.ylab][0]:i.xlabel="Time",i.xlabel+="    CURRENTLY IN Y_CUT MODE",e.origin=1,this.ycut_layer=this.plot.overlay_array(r,{xstart:this.ystart,xdelta:this.ydelta},{name:"y_cut_data",line:3});for(var s=this.plot.get_lyrn(this.ycut_layer),a=0;a<i.lyr.length;a++)a!==s&&(i.lyr[a].display=!i.lyr[a].display);i.y_cut_press_on=!0;var l=n.vmxmn(r,this.lps),h=l.smax,c=l.smin,u=h-c;u<0&&(c=(h=c)+u,u=-u),u<=1e-20?(c-=1,h+=1):(c-=.02*u,h+=.02*u),i.panymin=l.smin,i.panymax=l.smax;for(var d=1;d<e.level+1;d++)e.stk[d].xmin=e.stk[d].ymin,e.stk[d].xmax=e.stk[d].ymax,e.stk[d].xscl=(e.stk[d].xmax-e.stk[d].xmin)/(e.r-e.t),e.stk[d].ymin=c,e.stk[d].ymax=h,e.stk[d].yscl=(e.stk[d].ymax-e.stk[d].ymin)/(e.b-e.t);this.plot.rescale()}else if(i.y_cut_press_on){i.y_cut_press_on=!1;for(var f=0;f<i.lyr.length;f++)f!==this.ycut_layer&&(i.lyr[f].display=!i.lyr[f].display),this.plot.deoverlay(this.ycut_layer),i.xlabel=this.cut_stash.xlabel,i.ylabel=this.cut_stash.ylabel,e.level=this.cut_stash.level,e.stk=JSON.parse(JSON.stringify(this.cut_stash.stk)),i.panymin=this.cut_stash.panymin,i.panymax=this.cut_stash.panymax,i.panxmin=this.cut_stash.panxmin,i.panxmax=this.cut_stash.panxmax,this.cut_stash=void 0,this.plot.rescale(),this.plot.refresh(),this.ycut_layer=void 0,this.plot.change_settings({drawmode:this.old_drawmode,autol:this.old_autol})}},draw:function(){var t,e=this.plot._Mx,i=this.plot._Gx,n=this.hcb;if(this.hcb.pipe&&this.img&&(t="horizontal"!==this.drawdirection?this.hcb.lps||Math.ceil(Math.max(1,e.b-e.t)):this.lps)!==this.lps&&this.buf){var o=t-this.lps;if(this.lps=t,this.position>=this.lps&&(this.position=0),"scrolling"===this.drawmode){if("horizontal"!==this.drawdirection){var s=n.ystart+n.ydelta*this.lps;this.ymin=Math.min(n.ystart,s),this.ymax=Math.max(n.ystart,s),this.img=r.resize_image_height(e,this.img,this.lps)}}else"falling"===this.drawmode?(this.ymax=this.ymin+n.ydelta*this.lps,this.img=r.resize_image_height(e,this.img,this.lps)):"rising"===this.drawmode&&(this.ymin=this.ymax-n.ydelta*this.lps,o>0?(this.img=r.resize_image_height(e,this.img,this.lps),r.shift_image_rows(e,this.img,o,!0)):(r.shift_image_rows(e,this.img,o,!0),this.img=r.resize_image_height(e,this.img,this.lps)));this.plot.rescale()}var a=Math.max(this.xmin,e.stk[e.level].xmin),l=Math.min(this.xmax,e.stk[e.level].xmax);if(a>=l)return i.panxmin=Math.min(i.panxmin,this.xmin),void(i.panxmax=Math.max(i.panxmax,this.xmax));var h=Math.max(this.ymin,e.stk[e.level].ymin),c=Math.min(this.ymax,e.stk[e.level].ymax),u=Math.abs(l-a)+1,d=Math.abs(c-h)+1;u=Math.floor(u/n.xdelta),d=Math.floor(d/n.ydelta),u=Math.min(u,n.subsize),d=Math.min(d,n.size);var f,p=r.real_to_pixel(e,a,h),x=r.real_to_pixel(e,l,c),m=(x.x-p.x)/u,y=(x.y-p.y)/d;i.xe=Math.max(1,Math.round(m)),i.ye=Math.max(1,Math.round(y)),this.img&&this.buf&&i.cmode===this.img.cmode&&e.origin===this.img.origin||this.prep(a,l),this.img&&r.draw_image(e,this.img,this.xmin,this.ymin,this.xmax,this.ymax,this.opacity,i.rasterSmoothing,this.downscale),null!==this.position&&"scrolling"===this.drawmode&&("horizontal"!==this.drawdirection?(f=r.real_to_pixel(e,0,this.position*this.ydelta)).y>e.t&&f.y<e.b&&r.draw_line(e,"white",e.l,f.y,e.r,f.y):(f=r.real_to_pixel(e,this.position*this.xdelta,0)).x>e.l&&f.x<e.r&&r.draw_line(e,"white",f.x,e.t,f.x,e.b))}},o.overlay=function(t,e,i){var r=t._Gx;t._Mx,e.buf_type="D",e.ystart||(e.ystart=0),e.ydelta||(e.ydelta=1);var s=new o(t);s.init(e),e.file_name?s.name=n.trim_name(e.file_name):s.name="layer_"+r.lyr.length,s.change_settings(i);var a=[];return t.add_layer(s)&&a.push(s),a},t.exports=o},function(t,e,i){!function(){var e=i(3),n=i(4),r=i(5),o=i(11),s=function(t){this.plot=t,this.options={},this.size=0,this.color=0,this.line=3,this.thick=1,this.opacity=1,this.fillStyle=null,this.symbol=0,this.radius=3,this.display=!0,this.xptr=null,this.yptr=null,this.xpoint=null,this.ypoint=null,this.server_data=null,this.ymax=-1,this.ymin=0,this.localpanymin=0,this.localpanymax=-1,this.xmax=-1,this.xmin=0,this.localpanxmin=0,this.localpanxmax=-1,this.xlab=0,this.ylab=0,this.mode="lds",this.xypos_index=0,this.y_value_change=!1,this.pendingurl=""};s.prototype={init:function(t,i){this.plot._Gx,this.plot._Mx,this.hcb=t,this.hcb.buf_type="I",2e3===t.file_type?(e.force1000(t),this.size=t.subsize):this.size=t.size,"lds"===this.mode||"xcut"===this.mode?(this.xmin=this.hcb.xstart,this.xmax=this.hcb.xstart+this.hcb.xdelta*this.size):"ycut"===this.mode&&(this.xmin=this.hcb.ystart,2e3===t.file_type?this.xmax=this.hcb.ystart+this.hcb.ydelta*this.hcb.size:this.xmax=this.hcb.ystart+this.hcb.ydelta*(this.hcb.size/this.hcb.subsize)),this.set_pan_values(),this.cache=new o(20),this.debounceSend=r.debounce((function(t){t.send(null)}),100,!1)},get_data:function(){},change_settings:function(t){var e=this.plot._Gx;void 0!==t.cmode&&(0!=(1&e.autoz)&&(this.ymin=0,this.localpanymin=0),0!=(2&e.autoz)&&(this.ymax=-1,this.localpanymax=-1))},reload:function(t,e){},push:function(t,e,i){},set_pan_values(){this.localpanxmin>this.localpanxmax?(this.localpanxmin=this.xmin,this.localpanxmax=this.xmax):(this.localpanxmin=Math.min(this.localpanxmin,this.xmin),this.localpanxmax=Math.max(this.localpanxmax,this.xmax)),this.localpanymin>this.localpanymax?(this.localpanymin=this.ymin,this.localpanymax=this.ymax):(this.localpanymin=Math.min(this.localpanymin,this.ymin),this.localpanymax=Math.max(this.localpanymax,this.ymax))},prep:function(t,e){},make_request_url:function(t,e,i,n,r,o){var s=this.plot._Gx,a=this.plot._Mx,l=this.hcb.url.split("/sds/hdr/"),h="";if("lds"===this.mode?h=l[0]+"/sds/lds/"+t+"/"+i+"/"+Math.round(a.r-a.l)+"/"+Math.round(a.b-a.t)+"/"+l[1]:"xcut"===this.mode?h=l[0]+"/sds/rdsxcut/"+t+"/"+this.xypos_index+"/"+i+"/"+Math.round(this.xypos_index+1)+"/"+Math.round(a.r-a.l)+"/"+Math.round(a.b-a.t)+"/"+l[1]:"ycut"===this.mode&&(h=l[0]+"/sds/rdsycut/"+this.xypos_index+"/"+e+"/"+Math.round(this.xypos_index+1)+"/"+n+"/"+Math.round(a.r-a.l)+"/"+Math.round(a.b-a.t)+"/"+l[1]),void 0!==r&&(h=h.includes("?")?h+"&zmin="+r:h+"?zmin="+r),void 0!==o&&(h=h.includes("?")?h+"&zmax="+o:h+"?zmax="+o),void 0!==s.cmode){var c=["Ma","Ph","Re","Im","IR","Lo","L2"];h=h.includes("?")?h+"&cxmode="+c[s.cmode-1]:h+"?cxmode="+c[s.cmode-1]}return h},send_request_to_server:function(t){if(this.pendingurl!==t){var e;(e=new XMLHttpRequest).open("GET",t,!0),e.responseType="arraybuffer",e.overrideMimeType("text/plain; charset=x-user-defined");var i=this;e.onload=function(e){i.load_data_from_server(t,this,e)},e.onerror=function(t){},this.debounceSend(e),this.pendingurl=t}},load_data_from_server:function(t,e,i){if(this.plot._Mx,4===e.readyState&&(200===e.status||0===e.status)){this.plot._Mx,this.plot._Gx;var n=null;e.response&&(n=e.response),this.server_data=new Int16Array(n);var r=parseFloat(e.getResponseHeader("Zmin")),o=parseFloat(e.getResponseHeader("Zmax"));this.ymin=r,this.ymax=o,this.set_pan_values(),n.zmin=this.ymin,n.zmax=this.ymax,this.cache.set(t,n),this.plot.refresh()}},process_plot_data:function(){var t=this.plot._Gx,i=this.plot._Mx,r=this.server_data.length/2;this.xptr=new ArrayBuffer(2*r),this.yptr=new ArrayBuffer(2*r),this.xpoint=new Int16Array(this.xptr),this.ypoint=new Int16Array(this.yptr),e.vmov(this.server_data,1,this.xpoint,1,r),e.vmov(this.server_data.subarray(r),1,this.ypoint,1,r);var o={};this.fillStyle?o.fillStyle=this.fillStyle:t.fillStyle&&(o.fillStyle=t.fillStyle),this.options&&(o.highlight=this.options.highlight,o.noclip=this.options.noclip);var s=0;0===this.line?s=0:(s=1,this.thick>0?s=this.thick:this.thick<0&&(s=Math.abs(this.thick),o.dashed=!0),1===this.line&&(o.vertsym=!0),2===this.line&&(o.horzsym=!0),4===this.line&&(o.horzsym=!0,o.vertsym=!0)),o.pixels=!0,n.trace(i,this.color,this.xpoint,this.ypoint,this.xpoint.length,0,1,s,this.symbol,this.radius,o)},get_pan_bounds:function(t){var e,i,n,r,o=this.get_data_from_cache();return o.plotData&&(this.ymin=o.plotData.zmin,this.ymax=o.plotData.zmax,this.set_pan_values()),this.localpanxmin<this.localpanxmax&&(e=this.localpanxmin,i=this.localpanxmax),this.localpanymin<this.localpanymax&&(n=this.localpanymin,r=this.localpanymax),{xmin:e,xmax:i,ymin:n,ymax:r}},get_data_from_cache(){var t,e,i,n=this.plot._Mx,r=Math.round((n.stk[n.level].xmin-this.xmin)/this.hcb.xdelta),o=Math.round((n.stk[n.level].xmax-this.xmin)/this.hcb.xdelta),s=Math.round((n.stk[n.level].xmin-this.xmin)/this.hcb.ydelta),a=Math.round((n.stk[n.level].xmax-this.xmin)/this.hcb.ydelta);if(n.stk[n.level].ymin<n.stk[n.level].ymax&&(t=n.stk[n.level].ymin,e=n.stk[n.level].ymax),i=this.make_request_url(r,s,o,a,t,e),!(l=this.cache.get(i))){var l,h=this.make_request_url(r,s,o,a,void 0,void 0);(l=this.cache.get(h))&&(l.zmin===t&&l.zmax===e||(l=void 0))}return{url:i,plotData:l}},draw:function(){var t=this.get_data_from_cache();if(t.plotData)return this.server_data=new Int16Array(t.plotData),this.ymin=t.plotData.zmin,this.ymax=t.plotData.zmax,this.set_pan_values(),this.process_plot_data(),{xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax};this.send_request_to_server(t.url)}};var a=[0,53,27,80,13,40,67,93,7,60,33,87,20,47,73,100];s.overlay=function(t,i,r){var o=t._Gx,l=t._Mx;2===i.class&&e.force1000(i),i.buf_type="I";var h=r.name;delete r.name;var c=[],u=new s(t),d=o.lyr.length%a.length;for(var f in u.color=n.getcolor(l,e.Mc.colormap[3].colors,a[d]),void 0!==h?u.name=h:i.file_name?u.name=e.trim_name(i.file_name):u.name="layer_"+o.lyr.length,u.offset=0,r)void 0!==u[f]&&(u[f]=r[f]);return u.init(i,r),t.add_layer(u)&&c.push(u),c},t.exports=s}()},function(t,e,i){"use strict";var n,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(i,n){function r(){void 0!==o&&t.removeListener("error",o),i([].slice.call(arguments))}var o;"error"!==e&&(o=function(i){t.removeListener(e,r),n(i)},t.once("error",o)),t.once(e,r)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function h(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function u(t,e,i,n){var r,o,s,a;if(h(i),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),o=t._events),s=o[e]),void 0===s)s=o[e]=i,++t._eventsCount;else if("function"==typeof s?s=o[e]=n?[i,s]:[s,i]:n?s.unshift(i):s.push(i),(r=c(t))>0&&s.length>r&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=d.bind(n);return r.listener=i,n.wrapFn=r,r}function p(t,e,i){var n=t._events;if(void 0===n)return[];var r=n[e];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(r):m(r,r.length)}function x(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function m(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var n="error"===t,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[t];if(void 0===l)return!1;if("function"==typeof l)o(l,this,e);else{var h=l.length,c=m(l,h);for(i=0;i<h;++i)o(c[i],this,e)}return!0},a.prototype.addListener=function(t,e){return u(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return u(this,t,e,!0)},a.prototype.once=function(t,e){return h(e),this.on(t,f(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,f(this,t,e)),this},a.prototype.removeListener=function(t,e){var i,n,r,o,s;if(h(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(r=-1,o=i.length-1;o>=0;o--)if(i[o]===e||i[o].listener===e){s=i[o].listener,r=o;break}if(r<0)return this;0===r?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,r),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var r,o=Object.keys(i);for(n=0;n<o.length;++n)"removeListener"!==(r=o[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):x.call(t,e)},a.prototype.listenerCount=x,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},function(t,e,i){!function(){const e=i(3),n=i(4),r=i(5),o={1:1,2:2,4:3,8:4,16:5,32:6,64:7,128:8,256:9,512:10},s=[512,256,128,64,32,16,8,4,2,1],a=function(t){this.plot=t,this.offset=0,this.xstart=0,this.xdelta=0,this.ystart=0,this.ydelta=0,this.imin=0,this.xmin=0,this.xmax=0,this.name="",this.cx=!1,this.hcb=void 0,this.display=!0,this.color=0,this.line=3,this.thick=1,this.symbol=0,this.radius=3,this.skip=0,this.xsub=0,this.ysub=0,this.xdata=!1,this.modified=!1,this.preferred_origin=4,this.opacity=1,this.xcompression=t._Gx.xcompression,this.lpb=void 0,this.yc=1,this.options={},this.pendingURLs={}};a.prototype={init:function(t){this.debounceSend=r.debounce((function(t){t.send(null)}),100,!1),this.hcb=t,this.hcb.buf_type="D",1e3===t.file_type?this.lps=this.hcb.lps||Math.ceil(t.size/t.subsize):this.lps=this.hcb.lps||Math.ceil(t.size),this.hcb.class=2;const e=i(11);this.cache=new e(500),this.init_axes()},init_axes:function(){if(this.plot._Gx.index)this.xstart=1,this.xdelta=1,this.xmin=1,this.ystart=1,this.ydelta=1,this.ymin=1,1e3===this.hcb.file_type?this.ymax=this.hcb.size/this.hcb.subsize:"horizontal"!==this.drawdirection?(this.xmax=this.hcb.subsize,this.ymax=this.size):(this.xmax=this.size,this.ymax=this.hcb.subsize);else{let t;"horizontal"!==this.drawdirection?(this.xstart=this.hcb.xstart,this.xdelta=this.hcb.xdelta,t=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize,this.xmin=this.hcb.xmin||Math.min(this.hcb.xstart,t),this.xmax=this.hcb.xmax||Math.max(this.hcb.xstart,t),this.ystart=this.hcb.ystart,this.ydelta=this.hcb.ydelta,t=this.hcb.ystart+this.hcb.ydelta*this.lps,this.ymin=this.hcb.ymin||Math.min(this.hcb.ystart,t),this.ymax=this.hcb.ymax||Math.max(this.hcb.ystart,t)):(this.ystart=this.hcb.xstart,this.ydelta=this.hcb.xdelta,t=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize,this.ymin=this.hcb.xmin||Math.min(this.hcb.xstart,t),this.ymax=this.hcb.xmax||Math.max(this.hcb.xstart,t),this.xstart=this.hcb.ystart,this.xdelta=this.hcb.ydelta,t=this.hcb.ystart+this.hcb.ydelta*this.lps,this.xmin=this.hcb.ymin||Math.min(this.hcb.ystart,t),this.xmax=this.hcb.ymax||Math.max(this.hcb.ystart,t))}this.xframe=this.hcb.subsize,this.yframe=this.lps*this.hcb.subsize/this.xframe,0===this.lpb&&(this.lpb=this.yframe),(!this.lpb||this.lpb<=0)&&(this.lpb=16),this.lpb=Math.max(1,this.lpb/this.yc)*this.yc,"horizontal"!==this.drawdirection?(this.xlab=this.hcb.xunits,this.ylab=this.hcb.yunits):(this.xlab=this.hcb.yunits,this.ylab=this.hcb.xunits),"horizontal"===this.drawdirection?(this.plot._Mx.origin=1,this.preferred_origin=1):(this.plot._Mx.origin=4,this.preferred_origin=4)},get_data:function(){},get_z:function(t,e){},change_settings:function(t){const e=this.plot._Gx;if(t.subsize){this.hcb.subsize=t.subsize,this.hcb.ape=t.subsize,1e3===this.hcb.file_type?this.lps=Math.ceil(this.hcb.size/this.hcb.subsize):this.lps=Math.ceil(this.hcb.size);let e=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize;this.xmin=this.hcb.xmin||Math.min(this.hcb.xstart,e),this.xmax=this.hcb.xmax||Math.max(this.hcb.xstart,e),e=this.hcb.ystart+this.hcb.ydelta*this.lps,this.ymin=this.hcb.ymin||Math.min(this.hcb.ystart,e),this.ymax=this.hcb.ymax||Math.max(this.hcb.ystart,e)}t.debug&&(this.debug=t.debug),void 0!==t.cmode&&(this.img=void 0,0!=(1&e.autoz)&&(e.zmin=void 0),0!=(2&e.autoz)&&(e.zmax=void 0)),void 0!==t.drawdirection&&(this.drawdirection=t.drawdirection),void 0!==t.origin&&(this.plot._Mx.origin=t.origin,this.preferred_origin=t.origin),"horizontal"===this.drawdirection&&(this.plot._Mx.origin=1,this.preferred_origin=1,this.init_axes()),void 0!==t.xcmp&&("smooth"===t.xcmp?this.xcompression=0:"avg"===t.xcmp?this.xcompression=1:"min"===t.xcmp?this.xcompression=2:"max"===t.xcmp?this.xcompression=3:"first"===t.xcmp?this.xcompression=4:"maxabs"===t.xcmp?this.xcompression=5:this.xcompression=t.xcmp),void 0!==t.usetiles&&(this.usetiles=t.usetiles),void 0!==t.opacity&&(this.opacity=t.opacity)},reload:function(t,e){},prep:function(t,e){return this.lps},get_pan_bounds:function(t){let e,i,n,r;return this.xmin<this.xmax&&(e=this.xmin,i=this.xmax),this.ymin<this.ymax&&(n=this.ymin,r=this.ymax),{xmin:e,xmax:i,ymin:n,ymax:r}},load_tile:function(t,e,i){if(4===e.readyState&&(200===e.status||0===e.status)){let i=null;e.response&&(i=e.response);const n=parseFloat(e.getResponseHeader("Xmin")),r=parseFloat(e.getResponseHeader("Xmax")),o=parseFloat(e.getResponseHeader("Ymin")),s=parseFloat(e.getResponseHeader("Ymax"));i.width=e.getResponseHeader("Outxsize"),i.height=e.getResponseHeader("Outysize"),i.contents="rgba",i.xmin=n,i.ymin=o,i.xmax=r,i.ymax=s,this.cache.set(t,i),delete this.pendingURLs[t],this.plot.refresh()}},make_tile_request_url:function(t,i,n,r,o,s){const a=this.plot._Gx,l=this.hcb.url.split("/sds/hdr/");let h=l[0]+"/sds/rdstile/"+t+"/"+i+"/"+n+"/"+r+"/"+o+"/"+s+"/"+l[1]+"?outfmt=RGBA&colormap="+e.Mc.colormap[a.cmap].name+"&subsize="+this.hcb.subsize;return void 0!==a.zmin&&(h=h+"&zmin="+a.zmin),void 0!==a.zmax&&(h=h+"&zmax="+a.zmax),void 0!==a.cmode&&(h=h+"&cxmode="+["Ma","Ph","Re","Im","IR","Lo","L2"][a.cmode-1]),void 0!==this.xcompression&&(h=h+"&transform="+["first","mean","min","max","first","absmax"][this.xcompression]),h},sendTileRequest:function(t){if(this.pendingURLs[t])return;const e=new XMLHttpRequest;this.pendingURLs[t]=e,e.open("GET",t,!0),e.responseType="arraybuffer",e.overrideMimeType("text/plain; charset=x-user-defined");const i=this;e.onload=function(e){i.load_tile(t,this,e)},e.onerror=function(t){},e.send(null)},draw:function(){const t=this.plot._Mx,i=this.plot._Gx,r=this.hcb;let a,l,h,c,u,d,f,p,x,m;if("horizontal"!==this.drawdirection){if(a=Math.max(this.xmin,t.stk[t.level].xmin),l=Math.min(this.xmax,t.stk[t.level].xmax),a>=l)return;h=Math.max(this.ymin,t.stk[t.level].ymin),c=Math.min(this.ymax,t.stk[t.level].ymax)}else{if(a=Math.max(this.ymin,t.stk[t.level].ymin),l=Math.min(this.ymax,t.stk[t.level].ymax),a>=l)return;h=Math.max(this.xmin,t.stk[t.level].xmin),c=Math.min(this.xmax,t.stk[t.level].xmax)}"horizontal"!==this.drawmode?(u=Math.abs(l-a),d=Math.abs(c-h)):(u=Math.abs(c-h),d=Math.abs(l-a)),u=Math.ceil(u/r.xdelta),d=Math.ceil(d/r.ydelta),u=Math.min(u,r.subsize),d=1e3===r.file_type?Math.min(d,r.size/r.subsize):Math.min(d,r.size),"horizontal"!==this.drawdirection?(f=n.real_to_pixel(t,a,h),p=n.real_to_pixel(t,l,c),x=Math.abs(p.x-f.x),m=Math.abs(p.y-f.y)):(p=n.real_to_pixel(t,h,a),f=n.real_to_pixel(t,c,l),m=Math.abs(p.x-f.x),x=Math.abs(p.y-f.y));const y=Math.floor((a-r.xstart)/r.xdelta),v=Math.floor((h-r.ystart)/r.ydelta),_=y+u,b=v+d,g="horizontal"===this.drawdirection?-Math.PI/2:null;if(this.usetiles){const e=Math.min(Math.max(100*Math.ceil(x/300),100),500),i=Math.min(Math.max(100*Math.ceil(m/300),100),500),a=Math.max(1,u/x),l=Math.max(1,d/m);let h=0;for(;s[h]>a;)h++;const c=s[h];for(h=0;s[h]>l;)h++;const f=s[h],p=o[c],w=o[f],M=e*c,k=i*f,S=Math.ceil(r.subsize/M),E=Math.ceil(r.size/k),A=Math.max(0,Math.floor(y/M)),z=Math.max(0,Math.floor(v/k)),C=Math.min(S,Math.ceil(_/M)+1),L=Math.min(E,Math.ceil(b/k)+1);for(let r=z;r<L;r++)for(let o=A;o<C;o++){const s=this.make_tile_request_url(e,i,p,w,o,r),a=this.cache.get(s);if(a){let e,i;this.debug&&(e=t.fg,i=o.toString()+","+r.toString()),"horizontal"!==this.drawdirection?n.draw_image(t,a,a.xmin,a.ymin,a.xmax,a.ymax,this.opacity,!1,!0,g,e,i):n.draw_image(t,a,a.ymin,a.xmin,a.ymax,a.xmax,this.opacity,!1,!0,g,e,i)}else this.sendTileRequest(s)}}else{const o=new XMLHttpRequest,[s,u]=this.hcb.url.split("/sds/hdr/"),d=s+"/sds",f=`rds/${y}/${v}/${_}/${b}/${x}/${m}/${u}`;let p=`?outfmt=RGBA&colormap=${e.Mc.colormap[i.cmap].name}&subsize=${r.subsize}`;void 0!==i.zmin&&(p=`${p}&zmin=${i.zmin}`),void 0!==i.zmax&&(p=`${p}&zmax=${i.zmax}`),void 0!==i.cmode&&(p=`${p}&cxmode=${["Ma","Ph","Re","Im","IR","Lo","L2"][i.cmode-1]}`),void 0!==this.xcompression&&(p=`${p}&transform=${["first","mean","min","max","first","absmax"][this.xcompression]}`);const w=`${d}/${f}${p}`,M=this.cache.get(w);if(M)"horizontal"!==this.drawdirection?n.draw_image(t,M,a,h,l,c,this.opacity,!1,!0,g):n.draw_image(t,M,h,a,c,l,this.opacity,!1,!0,g);else{o.open("GET",w,!0),o.responseType="arraybuffer",o.overrideMimeType("text/plain; charset=x-user-defined");const e=this;o.onload=function(r){if(4===o.readyState&&(200===o.status||0===o.status)){const r=o.getResponseHeader("Zmin"),s=o.getResponseHeader("Zmax");0===t.level&&void 0===i.zmin&&0!=(1&i.autoz)&&(i.zmin=r),0===t.level&&void 0===i.zmax&&0!=(2&i.autoz)&&(i.zmax=s);let u=null;o.response&&(u=o.response),u.width=x,u.height=m,u.contents="rgba",e.cache.set(w,u),"horizontal"!==e.drawdirection?n.draw_image(t,u,a,h,l,c,e.opacity,!1,!0,g):n.draw_image(t,u,h,a,c,l,e.opacity,!1,!0,g)}},o.onerror=function(t){},this.debounceSend(o)}}return{xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax}},xCut:function(t){const i=this.plot._Mx,n=this.plot._Gx;if(void 0!==t){this.cut_stash={ylabel:n.ylabel,xlabel:n.xlabel,xlab:n.xlab,ylab:n.ylab,level:i.level,stk:JSON.parse(JSON.stringify(i.stk)),panymin:n.panymin,panymax:n.panymax,panxmin:n.panxmin,panxmax:n.panxmax};const o=Math.round((t-this.ystart)/this.ydelta);if(o<0||o>this.lps)return;for(let t=0;t<i.stk.length;t++)i.stk[t].ymin=void 0,i.stk[t].ymax=void 0;let s,a;n.panymax=void 0,n.panymin=void 0,"horizontal"!==this.drawdirection?(s="x_cut_data",a="xcut"):(s="y_cut_data",a="ycut");var r=n.lyr.length>0&&this.cx;1===n.cmode?n.ylabel=e.UNITS[28][0]:2===n.cmode?n.ylabel=n.plab:3===n.cmode&&r?n.ylabel=e.UNITS[21][0]:4===n.cmode||5===n.cmode?n.ylabel=e.UNITS[22][0]:6===n.cmode?n.ylabel=e.UNITS[26][0]:7===n.cmode?n.ylabel=e.UNITS[27][0]:n.ylabel="Intensity","None"!==e.UNITS[n.xlab][0]&&"Unknown"!==e.UNITS[n.xlab][0]?n.xlabel=e.UNITS[n.xlab][0]:n.xlabel="Frequency",n.xlabel+="    CURRENTLY IN X_CUT MODE",i.origin=1,this.xcut_layer=this.plot.overlay_href(this.hcb.url,null,{name:s,layerType:"1DSDS",mode:a,xypos_index:o,bottom_level:i.level},{}),i.origin=1;const l=this.plot.get_lyrn(this.xcut_layer);for(let t=0;t<n.lyr.length;t++)t!==l&&(n.lyr[t].display=!n.lyr[t].display);n.x_cut_press_on=!0,this.plot.rescale()}else if(n.x_cut_press_on){n.x_cut_press_on=!1;const t=this.plot.get_lyrn(this.xcut_layer);for(let e=0;e<n.lyr.length;e++)e!==t&&(n.lyr[e].display=!n.lyr[e].display),this.plot.deoverlay(this.xcut_layer),n.xlab=this.cut_stash.xlab,n.ylab=this.cut_stash.ylab,n.xlabel=this.cut_stash.xlabel,n.ylabel=this.cut_stash.ylabel,i.level=this.cut_stash.level,i.stk=JSON.parse(JSON.stringify(this.cut_stash.stk)),n.panymin=this.cut_stash.panymin,n.panymax=this.cut_stash.panymax,n.panxmin=this.cut_stash.panxmin,n.panxmax=this.cut_stash.panxmax,this.cut_stash=void 0,i.origin=4,this.plot.rescale(),this.plot.refresh(),this.xcut_layer=void 0,this.plot.change_settings({drawmode:this.old_drawmode,autol:this.old_autol})}},yCut:function(t){const i=this.plot._Mx,n=this.plot._Gx;if(void 0!==t){this.cut_stash={xlabel:n.xlabel,ylabel:n.ylabel,xlab:n.xlab,ylab:n.ylab,level:i.level,stk:JSON.parse(JSON.stringify(i.stk)),ymax:i.stk[i.level].ymax,panymin:n.panymin,panymax:n.panymax,panxmin:n.panxmin,panxmax:n.panxmax};const o=Math.round((t-this.xstart)/this.xdelta);if(o<0)return;for(let t=0;t<i.stk.length;t++)i.stk[t].xmin=i.stk[t].ymin,i.stk[t].xmax=i.stk[t].ymax,i.stk[t].xscl=i.stk[t].yscl,i.stk[t].ymin=void 0,i.stk[t].ymax=void 0,i.stk[t].yscl=void 0;let s,a;n.panymax=void 0,n.panymin=void 0,"horizontal"!==this.drawdirection?(s="y_cut_data",a="ycut"):(s="x_cut_data",a="xcut");var r=n.lyr.length>0&&this.cx;1===n.cmode?n.ylabel=e.UNITS[28][0]:2===n.cmode?n.ylabel=n.plab:3===n.cmode&&r?n.ylabel=e.UNITS[21][0]:4===n.cmode||5===n.cmode?n.ylabel=e.UNITS[22][0]:6===n.cmode?n.ylabel=e.UNITS[26][0]:7===n.cmode?n.ylabel=e.UNITS[27][0]:n.ylabel="Intensity","None"!==e.UNITS[n.ylab][0]&&"Unknown"!==e.UNITS[n.ylab][0]?n.xlabel=e.UNITS[n.ylab][0]:n.xlabel="Time",n.xlabel+="    CURRENTLY IN Y_CUT MODE",i.origin=1,this.ycut_layer=this.plot.overlay_href(this.hcb.url,null,{name:s,layerType:"1DSDS",mode:a,xypos_index:o,bottom_level:i.level},{}),i.origin=1;const l=this.plot.get_lyrn(this.ycut_layer);for(let t=0;t<n.lyr.length;t++)t!==l&&(n.lyr[t].display=!n.lyr[t].display);n.y_cut_press_on=!0}else if(n.y_cut_press_on){n.y_cut_press_on=!1;for(let t=0;t<n.lyr.length;t++)t!==this.ycut_layer&&(n.lyr[t].display=!n.lyr[t].display),this.plot.deoverlay(this.ycut_layer),n.xlab=this.cut_stash.xlab,n.ylab=this.cut_stash.ylab,n.xlabel=this.cut_stash.xlabel,n.ylabel=this.cut_stash.ylabel,i.level=this.cut_stash.level,i.stk=JSON.parse(JSON.stringify(this.cut_stash.stk)),n.panymin=this.cut_stash.panymin,n.panymax=this.cut_stash.panymax,n.panxmin=this.cut_stash.panxmin,n.panxmax=this.cut_stash.panxmax,this.cut_stash=void 0,i.origin=4,this.plot.rescale(),this.plot.refresh(),this.ycut_layer=void 0,this.plot.change_settings({drawmode:this.old_drawmode,autol:this.old_autol})}}},a.overlay=function(t,i,n){const r=t._Gx;i.buf_type="D";const o=new a(t);o.init(i),i.file_name?o.name=e.trim_name(i.file_name):o.name="layer_"+r.lyr.length,o.change_settings(n);const s=[];return t.add_layer(o)&&s.push(o),s},t.exports=a}()},function(t,e,i){!function(){i(3);var e=i(4),n=i(12);class r extends n.Plugin{pluginSetup(){this.defineProperty("center_line_style",{defaultValue:{},refreshOnChange:!0}),this.defineProperty("edge_line_style",{defaultValue:{},refreshOnChange:!0}),this.defineProperty("fill_style",{defaultValue:{},refreshOnChange:!0}),this.defineProperty("direction",{defaultValue:"vertical",refreshOnChange:!0}),this.defineProperty("mode",{defaultValue:"absolute",refreshOnChange:!0}),this.defineProperty("draw_center_line",{defaultValue:!0,refreshOnChange:!0}),this.defineProperty("prevent_drag",{defaultValue:!1,refreshOnChange:!0}),this.defineProperty("prevent_move",{defaultValue:!1,refreshOnChange:!0}),this.defineProperty("prevent_resize",{defaultValue:!1,refreshOnChange:!0}),this.defineProperty("discrete_widths",{defaultValue:void 0,refreshOnChange:!0}),this.defineProperty("min_width",{defaultValue:void 0,refreshOnChange:!0}),this.defineProperty("max_width",{defaultValue:void 0,refreshOnChange:!0}),this.defineProperty("shade_area",{defaultValue:void 0,refreshOnChange:!0}),this.defineProperty("draw_edge_lines",{defaultValue:!0,refreshOnChange:!0}),this.defineProperty("draw_center_line",{defaultValue:!0,refreshOnChange:!0}),this.defineProperty("center",{refreshOnChange:!0,callback:t=>{this._onCenterChange(t)},help:"center of the accordion in plot units (not pixels)"}),this.defineProperty("highlight",{refreshOnChange:!0,help:"highlight the center of the accordion"}),this.defineProperty("edge_highlight",{refreshOnChange:!0,help:"highlight the edges of the accordion"}),this.defineProperty("width",{refreshOnChange:!0,callback:t=>{this._onWidthChange(t)},help:"width of the accordion in plot units (not pixels)"}),this.defineProperty("center_location",{refreshOnChange:!0,help:"center of the accordion in pixels"}),this.defineProperty("loc_1",{refreshOnChange:!0,help:"location of one of the accordion bars in pixels"}),this.defineProperty("loc_2",{refreshOnChange:!0,help:"location of one of the accordion bars in pixels"}),this.defineProperty("text",{defaultValue:null,refreshOnChange:!0}),this.defineProperty("textFont",{defaultValue:null,refreshOnChange:!0}),this.defineProperty("textStokeStyle",{defaultValue:null,refreshOnChange:!0}),this.defineProperty("textPosition",{defaultValue:{horizontal:"middle",vertical:"middle"},refreshOnChange:!0})}pluginInit(){this.addListener("mmove",t=>{this._onMouseMove(t)}),this.addListener("mdown",t=>{this._onMouseDown(t)}),document.addEventListener("mouseup",()=>{this._onDocMouseUp()},!1)}pluginDispose(){}pluginRefresh(){if(void 0===this.properties.center||void 0===this.properties.width)return;let t,i,n,r=this.Mx,o=this.Context;if(o.clearRect(0,0,this.canvas.width,this.canvas.height),"absolute"===this.properties.mode)t=e.real_to_pixel(r,this.properties.center,this.properties.center);else if("relative"===this.properties.mode)if("vertical"===this.properties.direction){let i=r.stk[0].x1+(r.stk[0].x2-r.stk[0].x1)*this.properties.center;t=e.real_to_pixel(r,e.pixel_to_real(r,i,i).x,e.pixel_to_real(r,i,i).y)}else if("horizontal"===this.properties.direction){let i=r.stk[0].y1+(r.stk[0].y2-r.stk[0].y1)*this.properties.center;t=e.real_to_pixel(r,e.pixel_to_real(r,i,i).x,e.pixel_to_real(r,i,i).y)}if("absolute"===this.properties.mode)i=e.real_to_pixel(r,this.properties.center-this.properties.width/2,this.properties.center-this.properties.width/2),n=e.real_to_pixel(r,this.properties.center+this.properties.width/2,this.properties.center+this.properties.width/2);else if("relative"===this.properties.mode){let e=r.stk[0].x2-r.stk[0].x1,o=r.stk[0].y2-r.stk[0].y1;i={x:t.x-this.properties.width*e/2,y:t.y-this.properties.width*o/2},n={x:t.x+this.properties.width*e/2,y:t.y+this.properties.width*o/2}}if("vertical"===this.properties.direction?(this.properties.center_location=t.x,this.properties.loc_1=Math.max(r.l,i.x),this.properties.loc_2=Math.min(r.r,n.x)):"horizontal"===this.properties.direction&&(this.properties.center_location=t.y,this.properties.loc_1=Math.max(r.t,n.y),this.properties.loc_2=Math.min(r.b,i.y)),this.properties.shade_area&&Math.abs(this.properties.loc_2-this.properties.loc_1)>0){let t=o.globalAlpha;o.globalAlpha=void 0!==this.properties.fill_style.opacity?this.properties.fill_style.opacity:.4,o.fillStyle=void 0!==this.properties.fill_style.fillStyle?this.properties.fill_style.fillStyle:r.hi,"vertical"===this.properties.direction?o.fillRect(this.properties.loc_1,r.t,this.properties.loc_2-this.properties.loc_1,r.b-r.t):"horizontal"===this.properties.direction&&o.fillRect(r.l,this.properties.loc_1,r.r-r.l,this.properties.loc_2-this.properties.loc_1),o.globalAlpha=t}if((this.properties.draw_edge_lines||this.properties.edge_highlight||this.edge_dragging)&&(o.lineWidth=void 0!==this.properties.edge_line_style.lineWidth?this.properties.edge_line_style.lineWidth:1,o.lineCap=void 0!==this.properties.edge_line_style.lineCap?this.properties.edge_line_style.lineCap:"square",o.strokeStyle=void 0!==this.properties.edge_line_style.strokeStyle?this.properties.edge_line_style.strokeStyle:r.fg,(this.edge_dragging||this.properties.edge_highlight)&&(o.lineWidth=Math.ceil(1.2*o.lineWidth)),"vertical"===this.properties.direction?(o.beginPath(),o.moveTo(this.properties.loc_1+.5,r.t),o.lineTo(this.properties.loc_1+.5,r.b),o.stroke(),o.beginPath(),o.moveTo(this.properties.loc_2+.5,r.t),o.lineTo(this.properties.loc_2+.5,r.b),o.stroke()):"horizontal"===this.properties.direction&&(o.beginPath(),o.moveTo(r.l,this.properties.loc_1+.5),o.lineTo(r.r,this.properties.loc_1+.5),o.stroke(),o.beginPath(),o.moveTo(r.l,this.properties.loc_2+.5),o.lineTo(r.r,this.properties.loc_2+.5),o.stroke())),this.properties.draw_center_line&&(o.lineWidth=void 0!==this.properties.center_line_style.lineWidth?this.properties.center_line_style.lineWidth:1,o.lineCap=void 0!==this.properties.center_line_style.lineCap?this.properties.center_line_style.lineCap:"square",o.strokeStyle=void 0!==this.properties.center_line_style.strokeStyle?this.properties.center_line_style.strokeStyle:r.fg,(this.dragging||this.properties.highlight)&&(o.lineWidth=Math.ceil(1.2*o.lineWidth)),"vertical"===this.properties.direction?(o.beginPath(),o.moveTo(this.properties.center_location+.5,r.t),o.lineTo(this.properties.center_location+.5,r.b),o.stroke()):"horizontal"===this.properties.direction&&(o.beginPath(),o.moveTo(r.l,this.properties.center_location+.5),o.lineTo(r.r,this.properties.center_location+.5),o.stroke())),this.properties.text){o.save(),o.font=this.properties.textFont||r.text_h+"px Courier New, monospace",o.globalAlpha=1,o.fillStyle=this.properties.textStrokeStyle||r.fg;let t,e,i=o.measureText("M").width;"vertical"===this.properties.direction?("left"===this.properties.textPosition.horizontal?(o.textAlign="end",t=this.properties.center_location-r.text_w):"right"===this.properties.textPosition.horizontal?t=this.properties.center_location+r.text_w:"middle"===this.properties.textPosition.horizontal&&(o.textAlign="center",t=this.properties.center_location),"top"===this.properties.textPosition.vertical?e=r.t+2*i:"middle"===this.properties.textPosition.vertical?e=Math.floor(r.t+r.b)/2:"bottom"===this.properties.textPosition.vertical&&(e=r.b-i)):"horizontal"===this.properties.direction&&("left"===this.properties.textPosition.horizontal?t=r.l+r.text_w:"right"===this.properties.textPosition.horizontal?(o.textAlign="end",t=r.r-r.text_w):"middle"===this.properties.textPosition.horizontal&&(o.textAlign="center",t=Math.floor(r.r+r.l)/2),"top"===this.properties.textPosition.vertical?e=this.properties.center_location-i:"middle"===this.properties.textPosition.vertical?e=this.properties.center_location:"bottom"===this.properties.textPosition.vertical&&(e=this.properties.center_location+2*i)),o.rect(r.l,r.t,r.r-r.l,r.b-r.t),o.clip(),o.fillText(this.properties.text,t,e),o.restore()}}mimic(t){t instanceof r&&t.on("change",t=>{this.properties.width=t.width,this.properties.center=t.center,this.plot.redraw()})}_onMouseMove(t){const i=this.Mx;if(void 0===this.properties.center_location)return;if(this.properties.prevent_drag)return;if(t.xpos<i.l||t.xpos>i.r)return void(this.properties.highlight=!1);if(t.ypos>i.b||t.ypos<i.t)return void(this.properties.highlight=!1);let n=void 0!==this.properties.center_line_style.lineWidth?this.properties.center_line_style.lineWidth:1,r=void 0!==this.properties.edge_line_style.lineWidth?this.properties.edge_line_style.lineWidth:1;if(this.dragging||this.edge_dragging){if(this.dragging){var o=e.pixel_to_real(i,t.xpos,t.ypos);"vertical"===this.properties.direction?(this.properties.center_location=t.xpos,"absolute"===this.properties.mode?this.properties.center=o.x:"relative"===this.properties.mode&&(this.properties.center=(t.xpos-i.l)/(i.r-i.l))):"horizontal"===this.properties.direction&&(this.properties.center_location=t.ypos,"absolute"===this.properties.mode?this.properties.center=o.y:"relative"===this.properties.mode&&(this.properties.center=(t.ypos-i.t)/(i.b-i.t)))}if(this.edge_dragging&&(o=e.pixel_to_real(i,t.xpos,t.ypos),"vertical"===this.properties.direction?"absolute"===this.properties.mode?this.properties.width=2*Math.abs(this.properties.center-o.x):"relative"===this.properties.mode&&(this.properties.width=2*Math.abs(this.properties.center_location-t.xpos)/(i.r-i.l)):"horizontal"===this.properties.direction&&("absolute"===this.properties.mode?this.properties.width=2*Math.abs(this.properties.center-o.y):"relative"===this.properties.mode&&(this.properties.width=2*Math.abs(this.properties.center_location-t.ypos)/(i.b-i.t))),this.properties.discrete_widths)){let t=0,e=Math.abs(this.properties.width-this.properties.discrete_widths[0]),i=0;for(let n=1;n<this.properties.discrete_widths.length;n++)i=Math.abs(this.properties.width-this.properties.discrete_widths[n]),i<e&&(t=n,e=i);this.properties.min_width&&(this.properties.width=Math.max(this.properties.width,this.properties.min_width)),this.properties.max_width&&(this.properties.width=Math.min(this.properties.width,this.properties.max_width))}this.plot&&this.plot.refresh(),t.preventDefault()}else{if(i.warpbox)return;"vertical"===this.properties.direction?(this.properties.prevent_move||(Math.abs(this.properties.center_location-t.xpos)<n+5?this.properties.highlight=!0:this.properties.highlight=!1),this.properties.prevent_resize||(Math.abs(this.properties.loc_1-t.xpos)<r+5||Math.abs(this.properties.loc_2-t.xpos)<r+5?this.properties.edge_highlight=!0:this.properties.edge_highlight=!1)):"horizontal"===this.properties.direction&&(this.properties.prevent_move||(Math.abs(this.properties.center_location-t.ypos)<n+5?this.properties.highlight=!0:this.properties.highlight=!1),this.properties.prevent_resize||(Math.abs(this.properties.loc_1-t.ypos)<r+5||Math.abs(this.properties.loc_2-t.ypos)<r+5?this.properties.edge_highlight=!0:this.properties.edge_highlight=!1))}}_onMouseDown(t){const e=this.Mx;if(void 0===this.properties.center_location)return;if(t.xpos<e.l||t.xpos>e.r)return;if(t.ypos>e.b||t.ypos<e.t)return;if(this.properties.prevent_drag)return;let i=void 0!==this.properties.center_line_style.lineWidth?this.properties.center_line_style.lineWidth:1,n=void 0!==this.properties.edge_line_style.lineWidth?this.properties.edge_line_style.lineWidth:1;"vertical"===this.properties.direction?Math.abs(this.properties.loc_1-t.xpos)<n+5||Math.abs(this.properties.loc_2-t.xpos)<n+5?(this.edge_dragging=!this.properties.prevent_resize,t.preventDefault()):Math.abs(this.properties.center_location-t.xpos)<i+5&&(this.dragging=!this.properties.prevent_move,t.preventDefault()):"horizontal"===this.properties.direction&&(Math.abs(this.properties.loc_1-t.ypos)<n+5||Math.abs(this.properties.loc_2-t.ypos)<n+5?(this.edge_dragging=!this.properties.prevent_resize,t.preventDefault()):Math.abs(this.properties.center_location-t.ypos)<i+5&&(this.dragging=!this.properties.prevent_move,t.preventDefault()))}_onDocMouseUp(){const t=this.Mx;if(!this.dragging||!this.edge_dragging)return;this.dragging=!1,this.edge_dragging=!1;let i=document.createEvent("Event");i.initEvent("accordiontag",!0,!0),i.center=this.properties.center,i.width=this.properties.width,e.dispatchEvent(t,i),this.emit("change",{center:this.properties.center,width:this.properties.width})}_onCenterChange(t){if(this.plot){var i=this.Mx,n=document.createEvent("Event");n.initEvent("accordiontag",!0,!0),this.emit("change",{center:this.properties.center,width:this.properties.width}),n.center=this.properties.center,n.width=this.properties.width,e.dispatchEvent(i,n),this.plot.redraw()}}_onWidthChange(t){if(this.plot){var i=this.Mx,n=document.createEvent("Event");n.initEvent("accordiontag",!0,!0),this.emit("change",{center:this.properties.center,width:this.properties.width}),n.center=this.properties.center,n.width=this.properties.width,e.dispatchEvent(i,n),this.plot.redraw()}}set_center(t){this.center(t)}set_width(t){this.width(t)}set_highlight(t){this.highlight(t)}set_edge_highlight(t){this.edge_highlight(t)}set_visible(t){this.display(!1)}set_mode(t){this.mode(t)}get_center(){return this.properties.center()}get_width(){return this.properties.width()}}t.exports=r}()},function(t,e,i){!function(){i(3);var e=i(4),n=function(t){this.options=void 0===t?{}:t,void 0===this.options.display&&(this.options.display=!0),this.options.textBaseline=this.options.textBaseline||"alphabetic",this.options.textAlign=this.options.textAlign||"left",this.annotations=[]};n.prototype={init:function(t){var i=this;this.plot=t;var n=this.plot._Mx;this.onmousemove=function(t){if(0!==i.annotations.length&&!i.options.prevent_hover)if(t.xpos<n.l||t.xpos>n.r)i.set_highlight(!1);else if(t.ypos>n.b||t.ypos<n.t)i.set_highlight(!1);else{for(var r=!1,o=0;o<i.annotations.length;o++){var s=i.annotations[o],a={x:void 0,y:void 0};s.absolute_placement&&(a.x=s.x,a.y=s.y),void 0!==s.pxl_x&&(a.x=s.pxl_x),void 0!==s.pxl_y&&(a.y=s.pxl_y);var l=e.real_to_pixel(n,s.x,s.y);void 0===a.x&&(a.x=l.x),void 0===a.y&&(a.y=l.y);var h={x:a.x,y:a.y};s.value instanceof HTMLImageElement||s.value instanceof HTMLCanvasElement||"undefined"!=typeof HTMLVideoElement&&s.value instanceof HTMLVideoElement?(h.x-=s.width/2,h.y-=s.height/2):h.y-=s.height,e.inrect(t.xpos,t.ypos,h.x,h.y,s.width,s.height)?s.highlight||(i.set_highlight(!0,[s],a.x,a.y),r=!0):(s.highlight&&(i.set_highlight(!1,[s]),r=!0),s.selected=void 0)}i.plot&&r&&i.plot.refresh()}},this.plot.addListener("mmove",this.onmousemove),this.onmousedown=function(t){for(var e=0;e<i.annotations.length;e++)i.annotations[e].highlight&&(i.annotations[e].selected=!0)},this.plot.addListener("mdown",this.onmousedown),this.onmouseup=function(t){for(var n=0;n<i.annotations.length;n++)i.annotations[n].selected&&((t=document.createEvent("Event")).initEvent("annotationclick",!0,!0),t.annotation=i.annotations[n],e.dispatchEvent(i.plot._Mx,t)&&i.annotations[n].onclick&&i.annotations[n].onclick()),i.annotations[n].selected=void 0},document.addEventListener("mouseup",this.onmouseup,!1)},set_highlight:function(t,i,n,r){for(var o=i||this.annotations,s=0;s<o.length;s++){var a=document.createEvent("Event");a.initEvent("annotationhighlight",!0,!0),a.annotation=o[s],a.state=t,a.x=n,a.y=r,e.dispatchEvent(this.plot._Mx,a)&&(o[s].highlight=t)}},menu:function(){var t=function(t){return function(){t.options.display=!t.options.display,t.plot.redraw()}}(this),e=function(t){return function(){t.annotations=[],t.plot.redraw()}}(this);return{text:"Annotations...",menu:{title:"ANNOTATIONS",items:[{text:"Display",checked:this.options.display,style:"checkbox",handler:t},{text:"Clear All",handler:e}]}}},add_annotation:function(t){return this.annotations.push(t),this.plot.redraw(),this.annotations.length},clear_annotations:function(){this.annotations=[],this.plot.redraw()},refresh:function(t){if(this.options.display){this.plot._Gx;var i=this.plot._Mx,n=t.getContext("2d"),r=this;n.save(),n.beginPath(),n.rect(i.l,i.t,i.r-i.l,i.b-i.t),n.clip(),e.onCanvas(i,t,(function(){for(var t=r.annotations.length-1;t>=0;t--){var o=r.annotations[t],s={x:void 0,y:void 0};o.absolute_placement&&(s.x=o.x,s.y=o.y),void 0!==o.pxl_x&&(s.x=o.pxl_x),void 0!==o.pxl_y&&(s.y=o.pxl_y);var a=e.real_to_pixel(i,o.x,o.y);void 0===s.x&&(s.x=a.x),void 0===s.y&&(s.y=a.y),e.inrect(s.x,s.y,i.l,i.t,i.r-i.l,i.b-i.t)&&(o.value instanceof HTMLImageElement||o.value instanceof HTMLCanvasElement||"undefined"!=typeof HTMLVideoElement&&o.value instanceof HTMLVideoElement?(o.width=o.value.width,o.height=o.value.height,n.drawImage(o.value,s.x-o.width/2,s.y-o.height/2)):(n.font=o.font||"bold italic 20px new century schoolbook",o.highlight?n.fillStyle=o.highlight_color||i.hi:n.fillStyle=o.color||i.fg,n.globalAlpha=1,o.width=n.measureText(o.value).width,o.height=n.measureText("M").width,n.textBaseline=o.textBaseline||r.options.textBaseline,n.textAlign=o.textAlign||r.options.textAlign,n.fillText(o.value,s.x,s.y)),o.highlight&&o.popup&&e.render_message_box(i,o.popup,s.x+5,s.y+5,o.popupTextColor))}})),n.restore()}},dispose:function(){this.plot=void 0,this.annotations=void 0}},t.exports=n}()},function(t,e,i){var n,r,o;n=i(13),r=i(5),i(3),o=i(4),t.exports=class{constructor({display:t=!0,enableSelect:e=!1,enableMove:i=!1,enableResize:n=!1,lineWidth:r=1,alpha:o=.5,font:s,fill:a=!1,strokeStyle:l,fillStyle:h,absolutePlacement:c=!1}={}){this.options={},this.options.display=t,this.options.enableSelect=e,this.options.enableMove=i,this.options.enableResize=n,this.options.lineWidth=r,this.options.alpha=o,this.options.font=s,this.options.fill=a,this.options.strokeStyle=l,this.options.fillStyle=h,this.options.absolutePlacement=c}init(t){this.plot=t,this.boxes=[],this._clickTimer=null,this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseClick=this._onMouseClick.bind(this),this.plot.addListener("mdown",this._onMouseDown),this.plot.addListener("mmove",this._onMouseMove),this.plot.addListener("mup",this._onMouseClick),this.plot.addListener("mdblclick",this._onMouseClick)}display(t){if(void 0===t)return this.options.display;this.options.display=t,this.plot.refresh()}enableSelect(t){if(void 0===t)return this.options.enableSelect;this.options.enableSelect=t,!1===this.options.enableSelect&&n.each(this.boxes,t=>{t.selected=void 0}),this.plot.refresh()}enableMove(t){if(void 0===t)return this.options.enableMove;this.options.enableMove=t,this.plot.refresh()}enableResize(t){if(void 0===t)return this.options.enableResize;this.options.enableResize=t,this.plot.refresh()}getBoxes(){return this.boxes}addBox(t){const e=this.plot._Mx,i={x:t.x,y:t.y,w:t.w,h:t.h,text:t.text,id:r.uuidv4(),fill:t.fill,fillStyle:t.fillStyle,alpha:t.alpha,strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,absolutePlacement:t.absolutePlacement};t.absolute_placement&&(i.absolutePlacement=t.absolute_placement),this.boxes.push(i),this.plot.redraw();const n=document.createEvent("Event");return n.box=i,n.initEvent("boxadd",!0,!0),o.dispatchEvent(e,n),i.id}getSelectedBoxes(){const t=[];let e,i;for(i=this.boxes.length-1;i>-1;i--)e=this.boxes[i],e.selected&&t.push(e);return t}bringBoxToFront(t){let e,i;for(i=this.boxes.length-1;i>-1;i--)if(e=this.boxes[i],e.id===t){this.boxes.splice(i,1),this.boxes.push(e);break}}sendBoxToBack(t){let e,i;for(i=this.boxes.length-1;i>-1;i--)if(e=this.boxes[i],e.id===t){this.boxes.splice(i,1),this.boxes.splice(0,0,e);break}}removeBox(t){const e=this.plot._Mx;let i,n;for(n=this.boxes.length-1;n>-1;n--)if(i=this.boxes[n],i.id===t){this.boxes.splice(n,1);const t=document.createEvent("Event");t.box=i,t.initEvent("boxremove",!0,!0),o.dispatchEvent(e,t);break}this.plot.redraw()}clearBoxes(){const t=this.plot._Mx;let e,i;for(i=this.boxes.length-1;i>-1;i--){e=this.boxes[i],this.boxes.splice(i,1);const n=document.createEvent("Event");n.box=e,n.initEvent("boxremove",!0,!0),o.dispatchEvent(t,n)}this.plot.redraw()}add_box(t){return this.addBox(t)}remove_box(t){return this.removeBox(t)}clear_boxes(t){return this.clearBoxes()}_getControlPoints(t){const e=o.real_box_to_pixel(this.plot._Mx,t.x,t.y,t.w,t.h),i=e.ul,n=e.lr;return{ul:i,lr:n,ll:{x:i.x,y:n.y},ur:{x:n.x,y:i.y},um:{x:(i.x+n.x)/2,y:i.y},lm:{x:(i.x+n.x)/2,y:n.y},ml:{x:i.x,y:(i.y+n.y)/2},mr:{x:n.x,y:(i.y+n.y)/2}}}_isWithinBox(t,e,i){const n=o.real_box_to_pixel(this.plot._Mx,i.x,i.y,i.w,i.h),r=n.ul.x<=t&&t<=n.lr.x,s=n.ul.y<=e&&e<=n.lr.y;return r&&s}_isOverControlPoint(t,e,i){const n=this._getControlPoints(i);for(const[i,r]of Object.entries(n)){const n=Math.abs(r.x-t),o=Math.abs(r.y-e);if(n<5&&o<5)return i}return null}_selectBoxes(t,e,i){const n=[];for(let r=this.boxes.length-1;r>-1;r--){const s=this.boxes[r],a=o.real_box_to_pixel(this.plot._Mx,s.x,s.y,s.w,s.h),l=a.ul.x<=t&&t<=a.lr.x,h=a.ul.y<=e&&e<=a.lr.y;(i||0===n.length)&&l&&h||i||this._isOverControlPoint(t,e,s)?(n.push(s),this.options.enableSelect&&(s.selected=!0)):s.selected=void 0}return n}_onMouseDown(t){const e=this.plot._Mx;if(2===t.which)return;if(0===this.boxes.length)return;if(!this.options.enableSelect&&!this.options.enableMove&&!this.options.enableResize)return;if(t.xpos<e.l||t.xpos>e.r)return;if(t.ypos>e.b||t.ypos<e.t)return;const i=this._selectBoxes(t.xpos,t.ypos,!1);if(i.length>0){let e;this.options.enableSelect&&(i[0].selected=!0),this.options.enableResize&&(e=this._isOverControlPoint(t.xpos,t.ypos,i[0])),this._selected={x:t.x,y:t.y,orig_box:Object.assign({},i[0]),box:i[0],controlPoint:e,which:t.which},t.preventDefault()}}_onMouseMove(t){const e=this.plot._Mx;if(0!==this.boxes.length&&(this.options.enableMove||this.options.enableResize)&&!(t.xpos<e.l||t.xpos>e.r||t.ypos>e.b||t.ypos<e.t))if(this._selected&&1===this._selected.which){o.pixel_to_real(e,t.xpos-this._selected.xpos,t.ypos-this._selected.ypos);const i=t.x-this._selected.x,n=t.y-this._selected.y;this.options.enableMove&&(this._selected.controlPoint||(this._selected.box.x=this._selected.orig_box.x+i,this._selected.box.y=this._selected.orig_box.y+n)),this.options.enableResize&&("ul"===this._selected.controlPoint||"um"===this._selected.controlPoint||"ur"===this._selected.controlPoint?1===e.origin||2===e.origin?(this._selected.box.y=this._selected.orig_box.y+n,this._selected.box.h=this._selected.orig_box.h+n):(this._selected.box.y=this._selected.orig_box.y+n,this._selected.box.h=this._selected.orig_box.h-n):"ll"!==this._selected.controlPoint&&"lm"!==this._selected.controlPoint&&"lr"!==this._selected.controlPoint||(1===e.origin||2===e.origin?this._selected.box.h=this._selected.orig_box.h-n:this._selected.box.h=this._selected.orig_box.h+n),"ul"===this._selected.controlPoint||"ml"===this._selected.controlPoint||"ll"===this._selected.controlPoint?1===e.origin||4===e.origin?(this._selected.box.x=this._selected.orig_box.x+i,this._selected.box.w=this._selected.orig_box.w-i):(this._selected.box.x=this._selected.orig_box.x+i,this._selected.box.x=this._selected.orig_box.w-i):"ur"!==this._selected.controlPoint&&"mr"!==this._selected.controlPoint&&"lr"!==this._selected.controlPoint||(1===e.origin||4===e.origin?this._selected.box.w=this._selected.orig_box.w+i:this._selected.box.w=this._selected.orig_box.w-i)),this.plot.redraw(),t.preventDefault()}else{let i,n,r,o,s="default";for(o=0;o<this.boxes.length;o++)i=this.boxes[o],r=this._isWithinBox(t.xpos,t.ypos,i),r&&this.options.enableMove&&(s="move"),n=this._isOverControlPoint(t.xpos,t.ypos,i),n&&this.options.enableResize?("ul"===n||"lr"===n?s="nw-resize":"ll"===n||"ur"===n?s="ne-resize":"lm"===n||"um"===n?s="ns-resize":"ml"!==n&&"mr"!==n||(s="ew-resize"),i.highlight=!0):!n&&i.highlight&&(i.highlight=void 0);s!==e.root.style.cursor&&(e.root.style.cursor=s),this.plot.redraw()}}_onMouseClick(t){const e=this.plot._Mx;let i=!0;if(this.options.enableSelect||this.options.enableMove||this.options.enableResize){if(!this._selected){const e=this._selectBoxes(t.xpos,t.ypos,!1);if(e.length>0){let i;this.options.enableSelect&&(e[0].selected=!0),this.options.enableResize&&(i=this._isOverControlPoint(t.xpos,t.ypos,e[0])),this._selected={x:t.x,y:t.y,orig_box:Object.assign({},e[0]),box:e[0],controlPoint:i,which:t.which}}}const n=this._selected;if(!n)return;this._selected=void 0;const r=o.real_distance_to_pixel(this.plot._Mx,n.orig_box.x,n.orig_box.y,n.box.x,n.box.y),s=o.real_distance_to_pixel(this.plot._Mx,n.orig_box.x+n.orig_box.w,n.orig_box.y+n.orig_box.h,n.box.x+n.box.w,n.box.y+n.box.h);if(Math.abs(r.x)>3||Math.abs(r.y)>3||Math.abs(s.x)>3||Math.abs(s.y)>3){n.box.w<0&&(1===e.origin||4===e.origin?(n.box.x=n.box.x+n.box.w,n.box.w=Math.abs(n.box.w)):(n.box.x=n.box.x-n.box.w,n.box.w=Math.abs(n.box.w))),n.box.h<0&&(1===e.origin||2===e.origin?(n.box.y=n.box.y-n.box.h,n.box.h=Math.abs(n.box.h)):(n.box.y=n.box.y+n.box.h,n.box.h=Math.abs(n.box.h)));const i=document.createEvent("Event");return i.source=this,i.box=n.box,i.action=t.type,i.initEvent("boxmove",!0,!0),o.dispatchEvent(e,i),t.preventDefault(),void this.plot.redraw()}n.box.x=n.orig_box.x,n.box.y=n.orig_box.y,n.box.w=n.orig_box.w,n.box.h=n.orig_box.h;const a=[n.box];this._clickTimer&&clearTimeout(this._clickTimer),a.length>0&&this.options.enableSelect&&(t.preventDefault(),i=!1,this._clickTimer=setTimeout(()=>{const i=document.createEvent("Event");i.source=this,i.boxes=a,i.action=t.type,i.which=t.which,i.initEvent("boxselect",!0,!0),o.dispatchEvent(e,i),this.plot.redraw()},200))}return this._selected=void 0,i}menu(){return{text:"Boxes...",menu:{title:"BOXES",items:[{text:"Display",checked:this.display(),style:"checkbox",handler:()=>this.display(!this.display())},{text:"Enable Select",checked:this.enableSelect(),style:"checkbox",handler:()=>this.enableSelect(!this.enableSelect())},{text:"Enable Move",checked:this.enableMove(),style:"checkbox",handler:()=>this.enableMove(!this.enableMove())},{text:"Enable Resize",checked:this.enableResize(),style:"checkbox",handler:()=>this.enableResize(!this.enableResize())},{text:"Clear All",handler:()=>this.clearBoxes()}]}}}refresh(t){if(!this.options.display||0===this.boxes.length)return;const e=this.plot._Gx,i=this.plot._Mx,n=t.getContext("2d");if(e.x_cut_press_on||e.y_cut_press_on)return;let r,s,a,l,h,c,u;for(n.save(),n.beginPath(),n.rect(i.l,i.t,i.r-i.l,i.b-i.t),n.clip(),u=0;u<this.boxes.length;u++){if(r=this.boxes[u],!0===r.absolutePlacement||!0===this.options.absolutePlacement)s=r.x+i.l,a=r.y+i.t,l=r.w,h=r.h;else{const t=o.real_box_to_pixel(this.plot._Mx,r.x,r.y,r.w,r.h);s=t.ul.x,a=t.ul.y,l=t.w,h=t.h}if(n.strokeStyle=r.strokeStyle||this.options.strokeStyle||i.fg,n.lineWidth=r.lineWidth||this.options.lineWidth,r.highlight&&(n.lineWidth+=2),n.lineWidth%2==1&&(s+=.5,a+=.5),(r.fill||r.selected||this.options.fill)&&(n.globalAlpha=r.alpha||this.options.alpha,n.fillStyle=r.fillStyle||this.options.fillStyle||n.strokeStyle,n.fillRect(s,a,l,h),n.globalAlpha=1),n.strokeRect(s,a,l,h),this.options.enableResize&&(n.strokeStyle=r.strokeStyle||this.options.strokeStyle||i.fg,n.fillStyle=r.strokeStyle||this.options.strokeStyle||i.fg,n.fillRect(s-3,a-3,6,6),n.fillRect(s+l-3,a-3,6,6),n.fillRect(s+l-3,a+h-3,6,6),n.fillRect(s-3,a+h-3,6,6),n.fillRect(s+l/2-3,a-3,6,6),n.fillRect(s+l/2-3,a+h-3,6,6),n.fillRect(s-3,a+h/2-3,6,6),n.fillRect(s+l-3,a+h/2-3,6,6)),r.text){n.save(),n.font=r.font||this.options.font||i.text_h+"px Courier New, monospace",n.globalAlpha=1,n.textAlign="end",n.fillStyle=r.strokeStyle||this.options.strokeStyle||i.fg;let t=n.measureText("M").width;s-=t,a-=t/3,c=n.measureText(r.text).width,s-c<i.l&&(s+=l),n.fillText(r.text,s,a),n.restore()}}n.restore()}dispose(){this.plot.removeListener("mdown",this._onMouseDown),this.plot.removeListener("mmove",this._onMouseMove),this.plot.removeListener("mup",this._onMouseClick),this.plot.removeListener("mdblclick",this._onMouseClick),this.plot=void 0,this.boxes=[],this._clickTimer&&clearTimeout(this._clickTimer)}}},function(t,e,i){!function(){i(3);var e=i(4),n=i(5),r=function(t){this.options={display:!0,size:25,lineWidth:2,fillStyle:!1},n.update(this.options,t),this.state="paused",this.highlight=!1};r.prototype={init:function(t){this.plot=t;var e=this,i=this.plot._Mx;this.onmousemove=function(t){i.warpbox||(e.ismouseover(t.xpos,t.ypos)?e.set_highlight(!0):e.set_highlight(!1))},this.plot.addListener("mmove",this.onmousemove),this.onmousedown=function(t){i.warpbox||e.ismouseover(t.xpos,t.ypos)&&t.preventDefault()},this.plot.addListener("mdown",this.onmousedown),this.onmouseclick=function(t){i.warpbox||e.ismouseover(t.xpos,t.ypos)&&(e.toggle(),t.preventDefault())},this.plot.addListener("mclick",this.onmouseclick)},set_highlight:function(t){t!==this.highlight&&(this.highlight=t,this.plot.redraw())},toggle:function(t){if(t||(t="paused"===this.state?"playing":"paused"),t!==this.state&&this.plot){var i=this.plot._Mx,n=document.createEvent("Event");n.initEvent("playbackevt",!0,!0),n.state=t,e.dispatchEvent(i,n)&&(this.state=t),this.plot.redraw()}},addListener:function(t,i){var n=this.plot._Mx;e.addEventListener(n,t,i,!1)},removeListener:function(t,i){var n=this.plot._Mx;e.removeEventListener(n,t,i,!1)},ismouseover:function(t,e){var i=this.position(),n=Math.pow(t-i.x,2)+Math.pow(e-i.y,2),r=this.options.size/2;return n<Math.pow(r,2)},position:function(){if(this.options.position)return this.options.position;if(this.plot){var t=this.plot._Mx,e=this.options.size/2;return{x:t.l+e+this.options.lineWidth+1,y:t.t+e+this.options.lineWidth+1}}return{x:null,y:null}},refresh:function(t){if(this.options.display){this.plot._Gx;var e=this.plot._Mx,i=t.getContext("2d");i.lineWidth=this.options.lineWidth;var n=this.options.size/2;this.highlight&&(i.lineWidth+=2,n+=1);var r=this.position();if(i.beginPath(),i.arc(r.x,r.y,n-i.lineWidth,0,2*Math.PI,!0),i.closePath(),i.strokeStyle=this.options.strokeStyle||e.fg,i.stroke(),this.options.fillStyle&&(i.fillStyle=this.options.fillStyle,i.fill()),"paused"===this.state){var o={x:1.45*n,y:n},s={x:.8*n,y:1.45*n};(a={x:.8*n,y:.56*n}).x+=r.x-n,o.x+=r.x-n,s.x+=r.x-n,a.y+=r.y-n,o.y+=r.y-n,s.y+=r.y-n,i.beginPath(),i.moveTo(a.x,a.y),i.lineTo(o.x,o.y),i.lineTo(s.x,s.y),i.closePath(),i.fillStyle=this.options.strokeStyle||e.fg,i.fill()}else{var a;i.lineCap="round",i.lineWidth=Math.floor(Math.min(1,this.options.size/8)),o={x:.8*n,y:1.5*n},(a={x:.8*n,y:n/2}).x+=r.x-n,o.x+=r.x-n,a.y+=r.y-n,o.y+=r.y-n,i.beginPath(),i.moveTo(a.x,a.y),i.lineTo(o.x,o.y),i.closePath(),i.stroke(),o={x:n+n/5,y:1.5*n},(a={x:n+n/5,y:n/2}).x+=r.x-n,o.x+=r.x-n,a.y+=r.y-n,o.y+=r.y-n,i.beginPath(),i.moveTo(a.x,a.y),i.lineTo(o.x,o.y),i.closePath(),i.stroke()}i.restore()}},dispose:function(){this.plot=void 0,this.boxes=void 0}},t.exports=r}()},function(t,e,i){!function(){i(3);var e=i(4),n=i(5),r=function(t){this.options={display:!0,style:{lineWidth:1,lineCap:"square"},direction:"vertical",name:"Slider",prevent_drag:!1,add_box:!1,persistent_style:!1,slider_ID:0},n.update(this.options,t),this.position=void 0,this.location=void 0,this.paired_slider=void 0,this.name=this.options.name};r.prototype={init:function(t){this.plot=t;var i=t._Mx,n=this;this.onmousemove=function(t){if(void 0!==n.location&&!n.options.prevent_drag)if(t.xpos<i.l||t.xpos>i.r)n.set_highlight(!1);else if(t.ypos>i.b||t.ypos<i.t)n.set_highlight(!1);else{var r=n.options.style.lineWidth;if(n.dragging){var o=e.pixel_to_real(i,t.xpos,t.ypos);"vertical"===n.options.direction?(n.location=t.xpos,n.position=o.x):"horizontal"===n.options.direction?(n.location=t.ypos,n.position=o.y):"both"===n.options.direction&&(n.location.x=t.xpos,n.position.x=o.x,n.location.y=t.ypos,n.position.y=o.y),n.plot.redraw(),t.preventDefault()}else{if(i.warpbox)return;"vertical"===n.options.direction?Math.abs(n.location-t.xpos)<r+5?n.set_highlight(!0):n.set_highlight(!1):"horizontal"===n.options.direction?Math.abs(n.location-t.ypos)<r+5?n.set_highlight(!0):n.set_highlight(!1):"both"===n.options.direction&&(Math.abs(n.location.x-t.xpos)<r+5&&Math.abs(n.location.y-t.ypos)<r+5?n.set_highlight(!0):n.set_highlight(!1))}}},this.plot.addListener("mmove",this.onmousemove),this.onmousedown=function(t){if(void 0!==n.location&&!n.options.prevent_drag&&!(t.xpos<i.l||t.xpos>i.r||t.ypos>i.b||t.ypos<i.t||t.slider_drag)){var e=n.options.style.lineWidth;"vertical"===n.options.direction?Math.abs(n.location-t.xpos)<e+5&&(n.dragging=!0,t.slider_drag=!0,t.preventDefault()):"horizontal"===n.options.direction?Math.abs(n.location-t.ypos)<e+5&&(n.dragging=!0,t.slider_drag=!0,t.preventDefault()):"both"===n.options.direction&&Math.abs(n.location.x-t.xpos)<e+5&&Math.abs(n.location.y-t.ypos)<e+5&&(n.dragging=!0,t.slider_drag=!0,t.preventDefault())}},this.plot.addListener("mdown",this.onmousedown),this.onmouseup=function(t){n.dragging&&(t.preventDefault(),n.dragging=!1,(t=document.createEvent("Event")).source=n,t.initEvent("slidertag",!0,!0),"both"===n.options.direction?(t.location=n.location?JSON.parse(JSON.stringify(n.location)):void 0,t.position=n.position?JSON.parse(JSON.stringify(n.position)):void 0):(t.location=n.location,t.position=n.position),e.dispatchEvent(i,t),(t=document.createEvent("Event")).initEvent("sliderdrag",!0,!0),"both"===n.options.direction?(t.location=n.location?JSON.parse(JSON.stringify(n.location)):void 0,t.position=n.position?JSON.parse(JSON.stringify(n.position)):void 0):(t.location=n.location,t.position=n.position),e.dispatchEvent(i,t))},this.plot.addListener("mup",this.onmouseup)},menu:function(){var t=function(t){return function(){t.options.display=!t.options.display,t.plot.redraw()}}(this),e=function(t){return function(){var e=t.plot._Mx,i=e.stk[e.level],n=(i.xmax-i.xmin)/2+i.xmin,r=(i.ymax-i.ymin)/2+i.ymin;"vertical"===t.options.direction?t.set_position(n):"horizontal"===t.options.direction?t.set_position(r):"both"===t.options.direction&&t.set_position({x:n,y:r})}}(this);return{text:this.name+"...",menu:{title:"SLIDER",items:[{text:"Display",checked:this.options.display,style:"checkbox",handler:t},{text:"Center",handler:e}]}}},addListener:function(t,i){var n=this.plot._Mx,r=this;e.addEventListener(n,t,(function(t){if(t.source===r)return i(t)}),!1)},removeListener:function(t,i){var n=this.plot._Mx;e.removeEventListener(n,t,i,!1)},pair:function(t){if(t){if(t.direction!==this.direction)throw"paired sliders must use the same direction setting";this.paired_slider=t}else this.paired_slider=null},set_highlight:function(t){t!==this.highlight&&(this.highlight=t,this.plot.redraw())},set_position:function(t){if(!this.dragging){if("both"===this.options.direction){if(void 0!==this.position&&this.position.x===t.x&&this.position.y===t.y)return}else if(this.position===t)return;this.set_highlight(!1);var i,n=this.plot._Mx;"both"===this.options.direction?this.position=t?JSON.parse(JSON.stringify(t)):void 0:this.position=t,i="both"===this.options.direction?e.real_to_pixel(n,this.position.x,this.position.y):e.real_to_pixel(n,this.position,this.position),"vertical"===this.options.direction?this.location=i.x:"horizontal"===this.options.direction?this.location=i.y:"both"===this.options.direction&&(this.location={x:i.x,y:i.y});var r=document.createEvent("Event");r.initEvent("slidertag",!0,!0),"both"===this.options.direction?(r.location=this.location?JSON.parse(JSON.stringify(this.location)):void 0,r.position=this.position?JSON.parse(JSON.stringify(this.position)):void 0):(r.location=this.location,r.position=this.position),e.dispatchEvent(n,r),this.plot.redraw()}},set_location:function(t){if(!this.dragging){if("both"===this.options.direction){if(void 0!==this.location&&this.location.x===t.x&&this.location.y===t.y)return}else if(this.location===t)return;this.set_highlight(!1);var i,n=this.plot._Mx;"both"===this.options.direction?this.location=t?JSON.parse(JSON.stringify(t)):void 0:this.location=t,i="both"===this.options.direction?e.pixel_to_real(n,t.x,t.y):e.pixel_to_real(n,t,t),"vertical"===this.options.direction?this.position=i.x:"horizontal"===this.options.direction?this.position=i.y:"both"===this.options.direction&&(this.position={x:i.x,y:i.y});var r=document.createEvent("Event");r.initEvent("slidertag",!0,!0),"both"===this.options.direction?(r.location=this.location?JSON.parse(JSON.stringify(this.location)):void 0,r.position=this.position?JSON.parse(JSON.stringify(this.position)):void 0):(r.location=this.location,r.position=this.position),e.dispatchEvent(n,r),this.plot.redraw()}},get_position:function(){return this.position},get_location:function(){return this.location},refresh:function(t){if(this.options.display&&void 0!==this.position){var i,n=this.plot._Mx,r=t.getContext("2d");if(r.lineWidth=this.options.style.lineWidth,r.lineCap=this.options.style.lineCap,r.strokeStyle=void 0!==this.options.style.strokeStyle?this.options.style.strokeStyle:n.fg,(this.dragging||this.highlight)&&(r.lineWidth=Math.ceil(1.2*r.lineWidth)),i="both"===this.options.direction?e.real_to_pixel(n,this.position.x,this.position.y):e.real_to_pixel(n,this.position,this.position),"vertical"===this.options.direction){if(i.x<n.l||i.x>n.r)return;this.location=i.x}else if("horizontal"===this.options.direction){if(i.y<n.t||i.y>n.b)return;this.location=i.y}else if("both"===this.options.direction){if(i.x<n.l||i.x>n.r||i.y<n.t||i.y>n.b)return;this.location.x=i.x,this.location.y=i.y}if("vertical"===this.options.direction?(r.beginPath(),r.moveTo(this.location+.5,n.t),r.lineTo(this.location+.5,n.b),r.stroke()):"horizontal"===this.options.direction?(r.beginPath(),r.moveTo(n.l,this.location+.5),r.lineTo(n.r,this.location+.5),r.stroke()):"both"===this.options.direction&&(r.beginPath(),r.moveTo(n.l,this.location.y+.5),r.lineTo(n.r,this.location.y+.5),r.closePath(),r.moveTo(this.location.x+.5,n.t),r.lineTo(this.location.x+.5,n.b),r.stroke()),this.dragging||this.highlight||this.options.persistent_style){var o=2*n.text_h*this.options.slider_ID;if("vertical"===this.options.direction){r.textBaseline="alphabetic",r.textAlign="left",r.fillStyle=void 0!==this.options.style.textStyle?this.options.style.textStyle:n.fg,r.font=n.font.font;var s=e.format_g(this.position,6,3,!0).trim(),a=r.measureText(s).width;this.location+2*a>n.r?(r.textAlign="right",r.fillText(s,this.location-15,n.t+40+o)):r.fillText(s,this.location+15,n.t+40+o),this.options.add_box&&(this.location+2*a>n.r?(r.rect(this.location-2*a,n.t+20+o,2*a,2*n.text_h),r.strokeStyle=this.options.style.strokeStyle,r.stroke()):(r.rect(this.location+.5,n.t+20+o,2*a,2*n.text_h),r.strokeStyle=this.options.style.strokeStyle,r.stroke()))}else"horizontal"===this.options.direction?(r.textBaseline="alphabetic",r.textAlign="left",r.fillStyle=void 0!==this.options.style.textStyle?this.options.style.textStyle:n.fg,r.font=n.font.font,s=e.format_g(this.position,6,3,!0).trim(),o=2*(a=r.measureText(s).width)*this.options.slider_ID,this.location-2*n.text_h>n.t?r.fillText(s,n.l+20+o,this.location-5):r.fillText(s,n.l+20+o,this.location+5+n.text_h),this.options.add_box&&(this.location-2*n.text_h>n.t?(r.rect(n.l+15+o,this.location-2*n.text_h,2*a,2*n.text_h),r.strokeStyle=this.options.style.strokeStyle,r.stroke()):(r.rect(n.l+15+o,this.location,2*a,2*n.text_h),r.strokeStyle=this.options.style.strokeStyle,r.stroke()))):this.options.direction;if(this.paired_slider)if("vertical"===this.options.direction){var l=this.position-this.paired_slider.position,h=this.location-this.paired_slider.location,c=n.t+Math.round((n.b-n.t)/2);e.textline(n,this.location,c,this.paired_slider.location,c,{mode:"dashed",on:3,off:3}),r.textBaseline="alphabetic",r.textAlign="center",r.fillStyle=void 0!==this.options.style.textStyle?this.options.style.textStyle:n.fg,r.font=n.font.font,s=e.format_g(l,6,3,!0),r.fillText(s,this.location-Math.round(h/2),c-5)}else if("horizontal"===this.options.direction){l=this.position-this.paired_slider.position,h=this.location-this.paired_slider.location;var u=n.l+Math.round((n.r-n.l)/2);e.textline(n,u,this.location,u,this.paired_slider.location,{mode:"dashed",on:3,off:3}),r.textBaseline="alphabetic",r.textAlign="left",r.fillStyle=void 0!==this.options.style.textStyle?this.options.style.textStyle:n.fg,r.font=n.font.font,s=e.format_g(l,6,3,!0),r.fillText(s,u+5,this.location-Math.round(h/2))}else this.options.direction}}},dispose:function(){this.plot.removeListener("mmove",this.onmousemove),document.removeEventListener("mouseup",this.onmouseup,!1),this.plot=void 0,this.position=void 0}},t.exports=r}()},,function(t,e,i){t.exports=i(7)}])},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i.n(n),o=i(0),s=i.n(o),a=i(2);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p(t);if(e){var r=p(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(s,t);var e,i,n,o=d(s);function s(){return h(this,s),o.apply(this,arguments)}return e=s,(i=[{key:"render",value:function(){var t=this.props,e=t.children,i=t.id,n=t.height,o=t.width,s=t.display,l=t.style,h=t.options;return r.a.Children.map(e,(function(t){return console.log(t)})),r.a.createElement("div",{id:i},r.a.createElement(a.SigPlot,{height:n,width:o,display:s,styles:l,options:h},e))}}])&&c(e.prototype,i),n&&c(e,n),s}(n.Component);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=w(t);if(e){var r=w(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return g(this,i)}}function g(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}x.defaultProps={height:300,width:300,display:"inline-block",options:{all:!0,expand:!0,autol:100,autohide_panbars:!0}},x.propTypes={id:s.a.string,children:s.a.oneOfType([s.a.any,s.a.arrayOf(s.a.any)]),height:s.a.number,width:s.a.number,display:s.a.string,style:s.a.object,options:s.a.object};var M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(s,t);var e,i,n,o=b(s);function s(){return y(this,s),o.apply(this,arguments)}return e=s,(i=[{key:"render",value:function(){var t=this.props,e=t.data,i=t.id,n=t.options,o=t.layerOptions;return r.a.createElement("div",{id:i},r.a.createElement(a.ArrayLayer,{data:e,options:n,layerOptions:o}))}}])&&v(e.prototype,i),n&&v(e,n),s}(n.Component);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=L(t);if(e){var r=L(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return C(this,i)}}function C(t,e){if(e&&("object"===k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}M.defaultProps={},M.propTypes={id:s.a.string,data:s.a.arrayOf(s.a.oneOfType([s.a.number,s.a.arrayOf(s.a.number)])),options:s.a.object,layerOptions:s.a.object};var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(s,t);var e,i,n,o=z(s);function s(){return S(this,s),o.apply(this,arguments)}return e=s,(i=[{key:"render",value:function(){var t=this.props,e=t.id,i=t.href,n=t.onload,o=t.options;return r.a.createElement("div",{id:e},r.a.createElement(a.HrefLayer,{href:i,onload:n,options:o}))}}])&&E(e.prototype,i),n&&E(e,n),s}(n.Component);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=N(t);if(e){var r=N(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return D(this,i)}}function D(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}T.defaultProps={},T.propTypes={id:s.a.string,href:s.a.string,onload:s.a.func,options:s.a.object};var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(s,t);var e,i,n,o=I(s);function s(){return P(this,s),o.apply(this,arguments)}return e=s,(i=[{key:"render",value:function(){var t=this.props,e=t.data,i=t.id,n=t.options,o=t.layerOptions;return r.a.createElement("div",{id:i},r.a.createElement(a.PipeLayer,{data:e,options:n,layerOptions:o}))}}])&&G(e.prototype,i),n&&G(e,n),s}(n.Component);B.defaultProps={},B.propTypes={id:s.a.string,data:s.a.arrayOf(s.a.oneOfType([s.a.number,s.a.arrayOf(s.a.number)])),options:s.a.object,layerOptions:s.a.object},i.d(e,"SigPlot",(function(){return x})),i.d(e,"ArrayLayer",(function(){return M})),i.d(e,"HrefLayer",(function(){return T})),i.d(e,"PipeLayer",(function(){return B}))}]);
//# sourceMappingURL=dash_sigplot_components.min.js.map
//# sourceMappingURL=dash_sigplot_components.min.js.map